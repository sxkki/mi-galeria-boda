function BE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function zE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var t_={exports:{}},Du={},n_={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=Symbol.for("react.element"),$E=Symbol.for("react.portal"),HE=Symbol.for("react.fragment"),WE=Symbol.for("react.strict_mode"),qE=Symbol.for("react.profiler"),KE=Symbol.for("react.provider"),GE=Symbol.for("react.context"),QE=Symbol.for("react.forward_ref"),XE=Symbol.for("react.suspense"),YE=Symbol.for("react.memo"),JE=Symbol.for("react.lazy"),gm=Symbol.iterator;function ZE(t){return t===null||typeof t!="object"?null:(t=gm&&t[gm]||t["@@iterator"],typeof t=="function"?t:null)}var r_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i_=Object.assign,s_={};function Os(t,e,n){this.props=t,this.context=e,this.refs=s_,this.updater=n||r_}Os.prototype.isReactComponent={};Os.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Os.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function o_(){}o_.prototype=Os.prototype;function Md(t,e,n){this.props=t,this.context=e,this.refs=s_,this.updater=n||r_}var Ud=Md.prototype=new o_;Ud.constructor=Md;i_(Ud,Os.prototype);Ud.isPureReactComponent=!0;var ym=Array.isArray,a_=Object.prototype.hasOwnProperty,Fd={current:null},l_={key:!0,ref:!0,__self:!0,__source:!0};function u_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)a_.call(e,r)&&!l_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:da,type:t,key:s,ref:o,props:i,_owner:Fd.current}}function eT(t,e){return{$$typeof:da,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jd(t){return typeof t=="object"&&t!==null&&t.$$typeof===da}function tT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _m=/\/+/g;function Nc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tT(""+t.key):e.toString(36)}function pl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case da:case $E:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Nc(o,0):r,ym(i)?(n="",t!=null&&(n=t.replace(_m,"$&/")+"/"),pl(i,e,n,"",function(c){return c})):i!=null&&(jd(i)&&(i=eT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_m,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ym(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Nc(s,a);o+=pl(s,e,n,u,i)}else if(u=ZE(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Nc(s,a++),o+=pl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $a(t,e,n){if(t==null)return t;var r=[],i=0;return pl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function nT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},ml={transition:null},rT={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:ml,ReactCurrentOwner:Fd};function c_(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:$a,forEach:function(t,e,n){$a(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $a(t,function(){e++}),e},toArray:function(t){return $a(t,function(e){return e})||[]},only:function(t){if(!jd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Os;ue.Fragment=HE;ue.Profiler=qE;ue.PureComponent=Md;ue.StrictMode=WE;ue.Suspense=XE;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rT;ue.act=c_;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=i_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Fd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)a_.call(e,u)&&!l_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:da,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:GE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KE,_context:t},t.Consumer=t};ue.createElement=u_;ue.createFactory=function(t){var e=u_.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:QE,render:t}};ue.isValidElement=jd;ue.lazy=function(t){return{$$typeof:JE,_payload:{_status:-1,_result:t},_init:nT}};ue.memo=function(t,e){return{$$typeof:YE,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=ml.transition;ml.transition={};try{t()}finally{ml.transition=e}};ue.unstable_act=c_;ue.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ue.useContext=function(t){return Mt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ue.useId=function(){return Mt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ue.useRef=function(t){return Mt.current.useRef(t)};ue.useState=function(t){return Mt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Mt.current.useTransition()};ue.version="18.3.1";n_.exports=ue;var X=n_.exports;const iT=zE(X),sT=BE({__proto__:null,default:iT},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT=X,aT=Symbol.for("react.element"),lT=Symbol.for("react.fragment"),uT=Object.prototype.hasOwnProperty,cT=oT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hT={key:!0,ref:!0,__self:!0,__source:!0};function h_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)uT.call(e,r)&&!hT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aT,type:t,key:s,ref:o,props:i,_owner:cT.current}}Du.Fragment=lT;Du.jsx=h_;Du.jsxs=h_;t_.exports=Du;var W=t_.exports,d_={exports:{}},nn={},f_={exports:{}},p_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,M){var j=U.length;U.push(M);e:for(;0<j;){var J=j-1>>>1,H=U[J];if(0<i(H,M))U[J]=M,U[j]=H,j=J;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var M=U[0],j=U.pop();if(j!==M){U[0]=j;e:for(var J=0,H=U.length,Y=H>>>1;J<Y;){var K=2*(J+1)-1,$=U[K],ne=K+1,de=U[ne];if(0>i($,j))ne<H&&0>i(de,$)?(U[J]=de,U[ne]=j,J=ne):(U[J]=$,U[K]=j,J=K);else if(ne<H&&0>i(de,j))U[J]=de,U[ne]=j,J=ne;else break e}}return M}function i(U,M){var j=U.sortIndex-M.sortIndex;return j!==0?j:U.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,d=null,f=3,y=!1,E=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=U)r(c),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(c)}}function D(U){if(k=!1,C(U),!E)if(n(u)!==null)E=!0,O(V);else{var M=n(c);M!==null&&N(D,M.startTime-U)}}function V(U,M){E=!1,k&&(k=!1,v(m),m=-1),y=!0;var j=f;try{for(C(M),d=n(u);d!==null&&(!(d.expirationTime>M)||U&&!I());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var H=J(d.expirationTime<=M);M=t.unstable_now(),typeof H=="function"?d.callback=H:d===n(u)&&r(u),C(M)}else r(u);d=n(u)}if(d!==null)var Y=!0;else{var K=n(c);K!==null&&N(D,K.startTime-M),Y=!1}return Y}finally{d=null,f=j,y=!1}}var b=!1,S=null,m=-1,g=5,w=-1;function I(){return!(t.unstable_now()-w<g)}function R(){if(S!==null){var U=t.unstable_now();w=U;var M=!0;try{M=S(!0,U)}finally{M?T():(b=!1,S=null)}}else b=!1}var T;if(typeof A=="function")T=function(){A(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=R,T=function(){B.postMessage(null)}}else T=function(){x(R,0)};function O(U){S=U,b||(b=!0,T())}function N(U,M){m=x(function(){U(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,O(V))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var j=f;f=M;try{return U()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,M){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var j=f;f=U;try{return M()}finally{f=j}},t.unstable_scheduleCallback=function(U,M,j){var J=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?J+j:J):j=J,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=j+H,U={id:h++,callback:M,priorityLevel:U,startTime:j,expirationTime:H,sortIndex:-1},j>J?(U.sortIndex=j,e(c,U),n(u)===null&&U===n(c)&&(k?(v(m),m=-1):k=!0,N(D,j-J))):(U.sortIndex=H,e(u,U),E||y||(E=!0,O(V))),U},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(U){var M=f;return function(){var j=f;f=M;try{return U.apply(this,arguments)}finally{f=j}}}})(p_);f_.exports=p_;var dT=f_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT=X,tn=dT;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m_=new Set,Mo={};function Di(t,e){vs(t,e),vs(t+"Capture",e)}function vs(t,e){for(Mo[t]=e,t=0;t<e.length;t++)m_.add(e[t])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_h=Object.prototype.hasOwnProperty,pT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vm={},wm={};function mT(t){return _h.call(wm,t)?!0:_h.call(vm,t)?!1:pT.test(t)?wm[t]=!0:(vm[t]=!0,!1)}function gT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yT(t,e,n,r){if(e===null||typeof e>"u"||gT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bd=/[\-:]([a-z])/g;function zd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bd,zd);yt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bd,zd);yt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bd,zd);yt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function $d(t,e,n,r){var i=yt.hasOwnProperty(e)?yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yT(e,n,i,r)&&(n=null),r||i===null?mT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fr=fT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ha=Symbol.for("react.element"),Qi=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),Hd=Symbol.for("react.strict_mode"),vh=Symbol.for("react.profiler"),g_=Symbol.for("react.provider"),y_=Symbol.for("react.context"),Wd=Symbol.for("react.forward_ref"),wh=Symbol.for("react.suspense"),Eh=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),__=Symbol.for("react.offscreen"),Em=Symbol.iterator;function no(t){return t===null||typeof t!="object"?null:(t=Em&&t[Em]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,bc;function fo(t){if(bc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bc=e&&e[1]||""}return`
`+bc+t}var Dc=!1;function Oc(t,e){if(!t||Dc)return"";Dc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Dc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fo(t):""}function _T(t){switch(t.tag){case 5:return fo(t.type);case 16:return fo("Lazy");case 13:return fo("Suspense");case 19:return fo("SuspenseList");case 0:case 2:case 15:return t=Oc(t.type,!1),t;case 11:return t=Oc(t.type.render,!1),t;case 1:return t=Oc(t.type,!0),t;default:return""}}function Th(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xi:return"Fragment";case Qi:return"Portal";case vh:return"Profiler";case Hd:return"StrictMode";case wh:return"Suspense";case Eh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y_:return(t.displayName||"Context")+".Consumer";case g_:return(t._context.displayName||"Context")+".Provider";case Wd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qd:return e=t.displayName||null,e!==null?e:Th(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return Th(t(e))}catch{}}return null}function vT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Th(e);case 8:return e===Hd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function v_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wT(t){var e=v_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wa(t){t._valueTracker||(t._valueTracker=wT(t))}function w_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=v_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ul(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ih(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E_(t,e){e=e.checked,e!=null&&$d(t,"checked",e,!1)}function Sh(t,e){E_(t,e);var n=Gr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ah(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ah(t,e.type,Gr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Im(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ah(t,e,n){(e!=="number"||Ul(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var po=Array.isArray;function us(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(po(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gr(n)}}function T_(t,e){var n=Gr(e.value),r=Gr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Am(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ch(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qa,S_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ET=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(t){ET.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),To[e]=To[t]})});function A_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||To.hasOwnProperty(t)&&To[t]?(""+e).trim():e+"px"}function R_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=A_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var TT=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ph(t,e){if(e){if(TT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function kh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xh=null;function Kd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nh=null,cs=null,hs=null;function Rm(t){if(t=ma(t)){if(typeof Nh!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Uu(e),Nh(t.stateNode,t.type,e))}}function C_(t){cs?hs?hs.push(t):hs=[t]:cs=t}function P_(){if(cs){var t=cs,e=hs;if(hs=cs=null,Rm(t),e)for(t=0;t<e.length;t++)Rm(e[t])}}function k_(t,e){return t(e)}function x_(){}var Lc=!1;function N_(t,e,n){if(Lc)return t(e,n);Lc=!0;try{return k_(t,e,n)}finally{Lc=!1,(cs!==null||hs!==null)&&(x_(),P_())}}function Fo(t,e){var n=t.stateNode;if(n===null)return null;var r=Uu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var bh=!1;if(sr)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){bh=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{bh=!1}function IT(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Io=!1,Fl=null,jl=!1,Dh=null,ST={onError:function(t){Io=!0,Fl=t}};function AT(t,e,n,r,i,s,o,a,u){Io=!1,Fl=null,IT.apply(ST,arguments)}function RT(t,e,n,r,i,s,o,a,u){if(AT.apply(this,arguments),Io){if(Io){var c=Fl;Io=!1,Fl=null}else throw Error(Q(198));jl||(jl=!0,Dh=c)}}function Oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function b_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cm(t){if(Oi(t)!==t)throw Error(Q(188))}function CT(t){var e=t.alternate;if(!e){if(e=Oi(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cm(i),t;if(s===r)return Cm(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function D_(t){return t=CT(t),t!==null?O_(t):null}function O_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=O_(t);if(e!==null)return e;t=t.sibling}return null}var L_=tn.unstable_scheduleCallback,Pm=tn.unstable_cancelCallback,PT=tn.unstable_shouldYield,kT=tn.unstable_requestPaint,Ge=tn.unstable_now,xT=tn.unstable_getCurrentPriorityLevel,Gd=tn.unstable_ImmediatePriority,V_=tn.unstable_UserBlockingPriority,Bl=tn.unstable_NormalPriority,NT=tn.unstable_LowPriority,M_=tn.unstable_IdlePriority,Ou=null,Vn=null;function bT(t){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Ou,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:LT,DT=Math.log,OT=Math.LN2;function LT(t){return t>>>=0,t===0?32:31-(DT(t)/OT|0)|0}var Ka=64,Ga=4194304;function mo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=mo(a):(s&=o,s!==0&&(r=mo(s)))}else o=n&~i,o!==0?r=mo(o):s!==0&&(r=mo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),i=1<<n,r|=t[n],e&=~i;return r}function VT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Sn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=VT(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Oh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function U_(){var t=Ka;return Ka<<=1,!(Ka&4194240)&&(Ka=64),t}function Vc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function UT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Sn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Qd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function F_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j_,Xd,B_,z_,$_,Lh=!1,Qa=[],Or=null,Lr=null,Vr=null,jo=new Map,Bo=new Map,Ir=[],FT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function km(t,e){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bo.delete(e.pointerId)}}function io(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ma(e),e!==null&&Xd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jT(t,e,n,r,i){switch(e){case"focusin":return Or=io(Or,t,e,n,r,i),!0;case"dragenter":return Lr=io(Lr,t,e,n,r,i),!0;case"mouseover":return Vr=io(Vr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return jo.set(s,io(jo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Bo.set(s,io(Bo.get(s)||null,t,e,n,r,i)),!0}return!1}function H_(t){var e=fi(t.target);if(e!==null){var n=Oi(e);if(n!==null){if(e=n.tag,e===13){if(e=b_(n),e!==null){t.blockedOn=e,$_(t.priority,function(){B_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xh=r,n.target.dispatchEvent(r),xh=null}else return e=ma(n),e!==null&&Xd(e),t.blockedOn=n,!1;e.shift()}return!0}function xm(t,e,n){gl(t)&&n.delete(e)}function BT(){Lh=!1,Or!==null&&gl(Or)&&(Or=null),Lr!==null&&gl(Lr)&&(Lr=null),Vr!==null&&gl(Vr)&&(Vr=null),jo.forEach(xm),Bo.forEach(xm)}function so(t,e){t.blockedOn===e&&(t.blockedOn=null,Lh||(Lh=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,BT)))}function zo(t){function e(i){return so(i,t)}if(0<Qa.length){so(Qa[0],t);for(var n=1;n<Qa.length;n++){var r=Qa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Or!==null&&so(Or,t),Lr!==null&&so(Lr,t),Vr!==null&&so(Vr,t),jo.forEach(e),Bo.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)H_(n),n.blockedOn===null&&Ir.shift()}var ds=fr.ReactCurrentBatchConfig,$l=!0;function zT(t,e,n,r){var i=Ee,s=ds.transition;ds.transition=null;try{Ee=1,Yd(t,e,n,r)}finally{Ee=i,ds.transition=s}}function $T(t,e,n,r){var i=Ee,s=ds.transition;ds.transition=null;try{Ee=4,Yd(t,e,n,r)}finally{Ee=i,ds.transition=s}}function Yd(t,e,n,r){if($l){var i=Vh(t,e,n,r);if(i===null)qc(t,e,r,Hl,n),km(t,r);else if(jT(i,t,e,n,r))r.stopPropagation();else if(km(t,r),e&4&&-1<FT.indexOf(t)){for(;i!==null;){var s=ma(i);if(s!==null&&j_(s),s=Vh(t,e,n,r),s===null&&qc(t,e,r,Hl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else qc(t,e,r,null,n)}}var Hl=null;function Vh(t,e,n,r){if(Hl=null,t=Kd(r),t=fi(t),t!==null)if(e=Oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=b_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hl=t,null}function W_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xT()){case Gd:return 1;case V_:return 4;case Bl:case NT:return 16;case M_:return 536870912;default:return 16}default:return 16}}var xr=null,Jd=null,yl=null;function q_(){if(yl)return yl;var t,e=Jd,n=e.length,r,i="value"in xr?xr.value:xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return yl=i.slice(t,1<r?1-r:void 0)}function _l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xa(){return!0}function Nm(){return!1}function rn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xa:Nm,this.isPropagationStopped=Nm,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),e}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zd=rn(Ls),pa=je({},Ls,{view:0,detail:0}),HT=rn(pa),Mc,Uc,oo,Lu=je({},pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ef,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oo&&(oo&&t.type==="mousemove"?(Mc=t.screenX-oo.screenX,Uc=t.screenY-oo.screenY):Uc=Mc=0,oo=t),Mc)},movementY:function(t){return"movementY"in t?t.movementY:Uc}}),bm=rn(Lu),WT=je({},Lu,{dataTransfer:0}),qT=rn(WT),KT=je({},pa,{relatedTarget:0}),Fc=rn(KT),GT=je({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),QT=rn(GT),XT=je({},Ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YT=rn(XT),JT=je({},Ls,{data:0}),Dm=rn(JT),ZT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tI[t])?!!e[t]:!1}function ef(){return nI}var rI=je({},pa,{key:function(t){if(t.key){var e=ZT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ef,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iI=rn(rI),sI=je({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Om=rn(sI),oI=je({},pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ef}),aI=rn(oI),lI=je({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),uI=rn(lI),cI=je({},Lu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hI=rn(cI),dI=[9,13,27,32],tf=sr&&"CompositionEvent"in window,So=null;sr&&"documentMode"in document&&(So=document.documentMode);var fI=sr&&"TextEvent"in window&&!So,K_=sr&&(!tf||So&&8<So&&11>=So),Lm=" ",Vm=!1;function G_(t,e){switch(t){case"keyup":return dI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yi=!1;function pI(t,e){switch(t){case"compositionend":return Q_(e);case"keypress":return e.which!==32?null:(Vm=!0,Lm);case"textInput":return t=e.data,t===Lm&&Vm?null:t;default:return null}}function mI(t,e){if(Yi)return t==="compositionend"||!tf&&G_(t,e)?(t=q_(),yl=Jd=xr=null,Yi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K_&&e.locale!=="ko"?null:e.data;default:return null}}var gI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gI[t.type]:e==="textarea"}function X_(t,e,n,r){C_(r),e=Wl(e,"onChange"),0<e.length&&(n=new Zd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ao=null,$o=null;function yI(t){av(t,0)}function Vu(t){var e=es(t);if(w_(e))return t}function _I(t,e){if(t==="change")return e}var Y_=!1;if(sr){var jc;if(sr){var Bc="oninput"in document;if(!Bc){var Um=document.createElement("div");Um.setAttribute("oninput","return;"),Bc=typeof Um.oninput=="function"}jc=Bc}else jc=!1;Y_=jc&&(!document.documentMode||9<document.documentMode)}function Fm(){Ao&&(Ao.detachEvent("onpropertychange",J_),$o=Ao=null)}function J_(t){if(t.propertyName==="value"&&Vu($o)){var e=[];X_(e,$o,t,Kd(t)),N_(yI,e)}}function vI(t,e,n){t==="focusin"?(Fm(),Ao=e,$o=n,Ao.attachEvent("onpropertychange",J_)):t==="focusout"&&Fm()}function wI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vu($o)}function EI(t,e){if(t==="click")return Vu(e)}function TI(t,e){if(t==="input"||t==="change")return Vu(e)}function II(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:II;function Ho(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_h.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function jm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bm(t,e){var n=jm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jm(n)}}function Z_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Z_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ev(){for(var t=window,e=Ul();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ul(t.document)}return e}function nf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SI(t){var e=ev(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Z_(n.ownerDocument.documentElement,n)){if(r!==null&&nf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Bm(n,s);var o=Bm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AI=sr&&"documentMode"in document&&11>=document.documentMode,Ji=null,Mh=null,Ro=null,Uh=!1;function zm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uh||Ji==null||Ji!==Ul(r)||(r=Ji,"selectionStart"in r&&nf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ro&&Ho(Ro,r)||(Ro=r,r=Wl(Mh,"onSelect"),0<r.length&&(e=new Zd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ji)))}function Ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zi={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionend:Ya("Transition","TransitionEnd")},zc={},tv={};sr&&(tv=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function Mu(t){if(zc[t])return zc[t];if(!Zi[t])return t;var e=Zi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tv)return zc[t]=e[n];return t}var nv=Mu("animationend"),rv=Mu("animationiteration"),iv=Mu("animationstart"),sv=Mu("transitionend"),ov=new Map,$m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){ov.set(t,e),Di(e,[t])}for(var $c=0;$c<$m.length;$c++){var Hc=$m[$c],RI=Hc.toLowerCase(),CI=Hc[0].toUpperCase()+Hc.slice(1);ei(RI,"on"+CI)}ei(nv,"onAnimationEnd");ei(rv,"onAnimationIteration");ei(iv,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(sv,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Di("onBeforeInput",["compositionend","keypress","textInput","paste"]);Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PI=new Set("cancel close invalid load scroll toggle".split(" ").concat(go));function Hm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RT(r,e,void 0,t),t.currentTarget=null}function av(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Hm(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Hm(i,a,c),s=u}}}if(jl)throw t=Dh,jl=!1,Dh=null,t}function Ne(t,e){var n=e[$h];n===void 0&&(n=e[$h]=new Set);var r=t+"__bubble";n.has(r)||(lv(e,t,2,!1),n.add(r))}function Wc(t,e,n){var r=0;e&&(r|=4),lv(n,t,r,e)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Wo(t){if(!t[Ja]){t[Ja]=!0,m_.forEach(function(n){n!=="selectionchange"&&(PI.has(n)||Wc(n,!1,t),Wc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ja]||(e[Ja]=!0,Wc("selectionchange",!1,e))}}function lv(t,e,n,r){switch(W_(e)){case 1:var i=zT;break;case 4:i=$T;break;default:i=Yd}n=i.bind(null,e,n,t),i=void 0,!bh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}N_(function(){var c=s,h=Kd(n),d=[];e:{var f=ov.get(t);if(f!==void 0){var y=Zd,E=t;switch(t){case"keypress":if(_l(n)===0)break e;case"keydown":case"keyup":y=iI;break;case"focusin":E="focus",y=Fc;break;case"focusout":E="blur",y=Fc;break;case"beforeblur":case"afterblur":y=Fc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=qT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=aI;break;case nv:case rv:case iv:y=QT;break;case sv:y=uI;break;case"scroll":y=HT;break;case"wheel":y=hI;break;case"copy":case"cut":case"paste":y=YT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Om}var k=(e&4)!==0,x=!k&&t==="scroll",v=k?f!==null?f+"Capture":null:f;k=[];for(var A=c,C;A!==null;){C=A;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,v!==null&&(D=Fo(A,v),D!=null&&k.push(qo(A,D,C)))),x)break;A=A.return}0<k.length&&(f=new y(f,E,null,n,h),d.push({event:f,listeners:k}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==xh&&(E=n.relatedTarget||n.fromElement)&&(fi(E)||E[or]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=c,E=E?fi(E):null,E!==null&&(x=Oi(E),E!==x||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=c),y!==E)){if(k=bm,D="onMouseLeave",v="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(k=Om,D="onPointerLeave",v="onPointerEnter",A="pointer"),x=y==null?f:es(y),C=E==null?f:es(E),f=new k(D,A+"leave",y,n,h),f.target=x,f.relatedTarget=C,D=null,fi(h)===c&&(k=new k(v,A+"enter",E,n,h),k.target=C,k.relatedTarget=x,D=k),x=D,y&&E)t:{for(k=y,v=E,A=0,C=k;C;C=Wi(C))A++;for(C=0,D=v;D;D=Wi(D))C++;for(;0<A-C;)k=Wi(k),A--;for(;0<C-A;)v=Wi(v),C--;for(;A--;){if(k===v||v!==null&&k===v.alternate)break t;k=Wi(k),v=Wi(v)}k=null}else k=null;y!==null&&Wm(d,f,y,k,!1),E!==null&&x!==null&&Wm(d,x,E,k,!0)}}e:{if(f=c?es(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var V=_I;else if(Mm(f))if(Y_)V=TI;else{V=wI;var b=vI}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(V=EI);if(V&&(V=V(t,c))){X_(d,V,n,h);break e}b&&b(t,f,c),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&Ah(f,"number",f.value)}switch(b=c?es(c):window,t){case"focusin":(Mm(b)||b.contentEditable==="true")&&(Ji=b,Mh=c,Ro=null);break;case"focusout":Ro=Mh=Ji=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,zm(d,n,h);break;case"selectionchange":if(AI)break;case"keydown":case"keyup":zm(d,n,h)}var S;if(tf)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Yi?G_(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(K_&&n.locale!=="ko"&&(Yi||m!=="onCompositionStart"?m==="onCompositionEnd"&&Yi&&(S=q_()):(xr=h,Jd="value"in xr?xr.value:xr.textContent,Yi=!0)),b=Wl(c,m),0<b.length&&(m=new Dm(m,t,null,n,h),d.push({event:m,listeners:b}),S?m.data=S:(S=Q_(n),S!==null&&(m.data=S)))),(S=fI?pI(t,n):mI(t,n))&&(c=Wl(c,"onBeforeInput"),0<c.length&&(h=new Dm("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}av(d,e)})}function qo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Fo(t,n),s!=null&&r.unshift(qo(t,s,i)),s=Fo(t,e),s!=null&&r.push(qo(t,s,i))),t=t.return}return r}function Wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wm(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Fo(n,s),u!=null&&o.unshift(qo(n,u,a))):i||(u=Fo(n,s),u!=null&&o.push(qo(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kI=/\r\n?/g,xI=/\u0000|\uFFFD/g;function qm(t){return(typeof t=="string"?t:""+t).replace(kI,`
`).replace(xI,"")}function Za(t,e,n){if(e=qm(e),qm(t)!==e&&n)throw Error(Q(425))}function ql(){}var Fh=null,jh=null;function Bh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zh=typeof setTimeout=="function"?setTimeout:void 0,NI=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,bI=typeof queueMicrotask=="function"?queueMicrotask:typeof Km<"u"?function(t){return Km.resolve(null).then(t).catch(DI)}:zh;function DI(t){setTimeout(function(){throw t})}function Kc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),zo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zo(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),On="__reactFiber$"+Vs,Ko="__reactProps$"+Vs,or="__reactContainer$"+Vs,$h="__reactEvents$"+Vs,OI="__reactListeners$"+Vs,LI="__reactHandles$"+Vs;function fi(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gm(t);t!==null;){if(n=t[On])return n;t=Gm(t)}return e}t=n,n=t.parentNode}return null}function ma(t){return t=t[On]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Uu(t){return t[Ko]||null}var Hh=[],ts=-1;function ti(t){return{current:t}}function be(t){0>ts||(t.current=Hh[ts],Hh[ts]=null,ts--)}function Pe(t,e){ts++,Hh[ts]=t.current,t.current=e}var Qr={},xt=ti(Qr),Ht=ti(!1),Ti=Qr;function ws(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wt(t){return t=t.childContextTypes,t!=null}function Kl(){be(Ht),be(xt)}function Qm(t,e,n){if(xt.current!==Qr)throw Error(Q(168));Pe(xt,e),Pe(Ht,n)}function uv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,vT(t)||"Unknown",i));return je({},n,r)}function Gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Ti=xt.current,Pe(xt,t),Pe(Ht,Ht.current),!0}function Xm(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=uv(t,e,Ti),r.__reactInternalMemoizedMergedChildContext=t,be(Ht),be(xt),Pe(xt,t)):be(Ht),Pe(Ht,n)}var Yn=null,Fu=!1,Gc=!1;function cv(t){Yn===null?Yn=[t]:Yn.push(t)}function VI(t){Fu=!0,cv(t)}function ni(){if(!Gc&&Yn!==null){Gc=!0;var t=0,e=Ee;try{var n=Yn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yn=null,Fu=!1}catch(i){throw Yn!==null&&(Yn=Yn.slice(t+1)),L_(Gd,ni),i}finally{Ee=e,Gc=!1}}return null}var ns=[],rs=0,Ql=null,Xl=0,ln=[],un=0,Ii=null,Jn=1,Zn="";function ci(t,e){ns[rs++]=Xl,ns[rs++]=Ql,Ql=t,Xl=e}function hv(t,e,n){ln[un++]=Jn,ln[un++]=Zn,ln[un++]=Ii,Ii=t;var r=Jn;t=Zn;var i=32-Sn(r)-1;r&=~(1<<i),n+=1;var s=32-Sn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jn=1<<32-Sn(e)+i|n<<i|r,Zn=s+t}else Jn=1<<s|n<<i|r,Zn=t}function rf(t){t.return!==null&&(ci(t,1),hv(t,1,0))}function sf(t){for(;t===Ql;)Ql=ns[--rs],ns[rs]=null,Xl=ns[--rs],ns[rs]=null;for(;t===Ii;)Ii=ln[--un],ln[un]=null,Zn=ln[--un],ln[un]=null,Jn=ln[--un],ln[un]=null}var en=null,Jt=null,Oe=!1,Tn=null;function dv(t,e){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ym(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,en=t,Jt=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,en=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ii!==null?{id:Jn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,en=t,Jt=null,!0):!1;default:return!1}}function Wh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qh(t){if(Oe){var e=Jt;if(e){var n=e;if(!Ym(t,e)){if(Wh(t))throw Error(Q(418));e=Mr(n.nextSibling);var r=en;e&&Ym(t,e)?dv(r,n):(t.flags=t.flags&-4097|2,Oe=!1,en=t)}}else{if(Wh(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Oe=!1,en=t}}}function Jm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;en=t}function el(t){if(t!==en)return!1;if(!Oe)return Jm(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bh(t.type,t.memoizedProps)),e&&(e=Jt)){if(Wh(t))throw fv(),Error(Q(418));for(;e;)dv(t,e),e=Mr(e.nextSibling)}if(Jm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=en?Mr(t.stateNode.nextSibling):null;return!0}function fv(){for(var t=Jt;t;)t=Mr(t.nextSibling)}function Es(){Jt=en=null,Oe=!1}function of(t){Tn===null?Tn=[t]:Tn.push(t)}var MI=fr.ReactCurrentBatchConfig;function ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function tl(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zm(t){var e=t._init;return e(t._payload)}function pv(t){function e(v,A){if(t){var C=v.deletions;C===null?(v.deletions=[A],v.flags|=16):C.push(A)}}function n(v,A){if(!t)return null;for(;A!==null;)e(v,A),A=A.sibling;return null}function r(v,A){for(v=new Map;A!==null;)A.key!==null?v.set(A.key,A):v.set(A.index,A),A=A.sibling;return v}function i(v,A){return v=Br(v,A),v.index=0,v.sibling=null,v}function s(v,A,C){return v.index=C,t?(C=v.alternate,C!==null?(C=C.index,C<A?(v.flags|=2,A):C):(v.flags|=2,A)):(v.flags|=1048576,A)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,A,C,D){return A===null||A.tag!==6?(A=th(C,v.mode,D),A.return=v,A):(A=i(A,C),A.return=v,A)}function u(v,A,C,D){var V=C.type;return V===Xi?h(v,A,C.props.children,D,C.key):A!==null&&(A.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Er&&Zm(V)===A.type)?(D=i(A,C.props),D.ref=ao(v,A,C),D.return=v,D):(D=Al(C.type,C.key,C.props,null,v.mode,D),D.ref=ao(v,A,C),D.return=v,D)}function c(v,A,C,D){return A===null||A.tag!==4||A.stateNode.containerInfo!==C.containerInfo||A.stateNode.implementation!==C.implementation?(A=nh(C,v.mode,D),A.return=v,A):(A=i(A,C.children||[]),A.return=v,A)}function h(v,A,C,D,V){return A===null||A.tag!==7?(A=vi(C,v.mode,D,V),A.return=v,A):(A=i(A,C),A.return=v,A)}function d(v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return A=th(""+A,v.mode,C),A.return=v,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ha:return C=Al(A.type,A.key,A.props,null,v.mode,C),C.ref=ao(v,null,A),C.return=v,C;case Qi:return A=nh(A,v.mode,C),A.return=v,A;case Er:var D=A._init;return d(v,D(A._payload),C)}if(po(A)||no(A))return A=vi(A,v.mode,C,null),A.return=v,A;tl(v,A)}return null}function f(v,A,C,D){var V=A!==null?A.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return V!==null?null:a(v,A,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ha:return C.key===V?u(v,A,C,D):null;case Qi:return C.key===V?c(v,A,C,D):null;case Er:return V=C._init,f(v,A,V(C._payload),D)}if(po(C)||no(C))return V!==null?null:h(v,A,C,D,null);tl(v,C)}return null}function y(v,A,C,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return v=v.get(C)||null,a(A,v,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ha:return v=v.get(D.key===null?C:D.key)||null,u(A,v,D,V);case Qi:return v=v.get(D.key===null?C:D.key)||null,c(A,v,D,V);case Er:var b=D._init;return y(v,A,C,b(D._payload),V)}if(po(D)||no(D))return v=v.get(C)||null,h(A,v,D,V,null);tl(A,D)}return null}function E(v,A,C,D){for(var V=null,b=null,S=A,m=A=0,g=null;S!==null&&m<C.length;m++){S.index>m?(g=S,S=null):g=S.sibling;var w=f(v,S,C[m],D);if(w===null){S===null&&(S=g);break}t&&S&&w.alternate===null&&e(v,S),A=s(w,A,m),b===null?V=w:b.sibling=w,b=w,S=g}if(m===C.length)return n(v,S),Oe&&ci(v,m),V;if(S===null){for(;m<C.length;m++)S=d(v,C[m],D),S!==null&&(A=s(S,A,m),b===null?V=S:b.sibling=S,b=S);return Oe&&ci(v,m),V}for(S=r(v,S);m<C.length;m++)g=y(S,v,m,C[m],D),g!==null&&(t&&g.alternate!==null&&S.delete(g.key===null?m:g.key),A=s(g,A,m),b===null?V=g:b.sibling=g,b=g);return t&&S.forEach(function(I){return e(v,I)}),Oe&&ci(v,m),V}function k(v,A,C,D){var V=no(C);if(typeof V!="function")throw Error(Q(150));if(C=V.call(C),C==null)throw Error(Q(151));for(var b=V=null,S=A,m=A=0,g=null,w=C.next();S!==null&&!w.done;m++,w=C.next()){S.index>m?(g=S,S=null):g=S.sibling;var I=f(v,S,w.value,D);if(I===null){S===null&&(S=g);break}t&&S&&I.alternate===null&&e(v,S),A=s(I,A,m),b===null?V=I:b.sibling=I,b=I,S=g}if(w.done)return n(v,S),Oe&&ci(v,m),V;if(S===null){for(;!w.done;m++,w=C.next())w=d(v,w.value,D),w!==null&&(A=s(w,A,m),b===null?V=w:b.sibling=w,b=w);return Oe&&ci(v,m),V}for(S=r(v,S);!w.done;m++,w=C.next())w=y(S,v,m,w.value,D),w!==null&&(t&&w.alternate!==null&&S.delete(w.key===null?m:w.key),A=s(w,A,m),b===null?V=w:b.sibling=w,b=w);return t&&S.forEach(function(R){return e(v,R)}),Oe&&ci(v,m),V}function x(v,A,C,D){if(typeof C=="object"&&C!==null&&C.type===Xi&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ha:e:{for(var V=C.key,b=A;b!==null;){if(b.key===V){if(V=C.type,V===Xi){if(b.tag===7){n(v,b.sibling),A=i(b,C.props.children),A.return=v,v=A;break e}}else if(b.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Er&&Zm(V)===b.type){n(v,b.sibling),A=i(b,C.props),A.ref=ao(v,b,C),A.return=v,v=A;break e}n(v,b);break}else e(v,b);b=b.sibling}C.type===Xi?(A=vi(C.props.children,v.mode,D,C.key),A.return=v,v=A):(D=Al(C.type,C.key,C.props,null,v.mode,D),D.ref=ao(v,A,C),D.return=v,v=D)}return o(v);case Qi:e:{for(b=C.key;A!==null;){if(A.key===b)if(A.tag===4&&A.stateNode.containerInfo===C.containerInfo&&A.stateNode.implementation===C.implementation){n(v,A.sibling),A=i(A,C.children||[]),A.return=v,v=A;break e}else{n(v,A);break}else e(v,A);A=A.sibling}A=nh(C,v.mode,D),A.return=v,v=A}return o(v);case Er:return b=C._init,x(v,A,b(C._payload),D)}if(po(C))return E(v,A,C,D);if(no(C))return k(v,A,C,D);tl(v,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,A!==null&&A.tag===6?(n(v,A.sibling),A=i(A,C),A.return=v,v=A):(n(v,A),A=th(C,v.mode,D),A.return=v,v=A),o(v)):n(v,A)}return x}var Ts=pv(!0),mv=pv(!1),Yl=ti(null),Jl=null,is=null,af=null;function lf(){af=is=Jl=null}function uf(t){var e=Yl.current;be(Yl),t._currentValue=e}function Kh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fs(t,e){Jl=t,af=is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(af!==t)if(t={context:t,memoizedValue:e,next:null},is===null){if(Jl===null)throw Error(Q(308));is=t,Jl.dependencies={lanes:0,firstContext:t}}else is=is.next=t;return e}var pi=null;function cf(t){pi===null?pi=[t]:pi.push(t)}function gv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cf(e)):(n.next=i.next,i.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function hf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ar(t,n)}return i=r.interleaved,i===null?(e.next=e,cf(r)):(e.next=i.next,i.next=e),r.interleaved=e,ar(t,n)}function vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qd(t,n)}}function eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zl(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var d=i.baseState;o=0,h=c=u=null,a=s;do{var f=a.lane,y=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,k=a;switch(f=e,y=n,k.tag){case 1:if(E=k.payload,typeof E=="function"){d=E.call(y,d,f);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=k.payload,f=typeof E=="function"?E.call(y,d,f):E,f==null)break e;d=je({},d,f);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=d):h=h.next=y,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ai|=o,t.lanes=o,t.memoizedState=d}}function tg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var ga={},Mn=ti(ga),Go=ti(ga),Qo=ti(ga);function mi(t){if(t===ga)throw Error(Q(174));return t}function df(t,e){switch(Pe(Qo,e),Pe(Go,t),Pe(Mn,ga),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ch(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ch(e,t)}be(Mn),Pe(Mn,e)}function Is(){be(Mn),be(Go),be(Qo)}function _v(t){mi(Qo.current);var e=mi(Mn.current),n=Ch(e,t.type);e!==n&&(Pe(Go,t),Pe(Mn,n))}function ff(t){Go.current===t&&(be(Mn),be(Go))}var Ue=ti(0);function eu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qc=[];function pf(){for(var t=0;t<Qc.length;t++)Qc[t]._workInProgressVersionPrimary=null;Qc.length=0}var wl=fr.ReactCurrentDispatcher,Xc=fr.ReactCurrentBatchConfig,Si=0,Fe=null,nt=null,ut=null,tu=!1,Co=!1,Xo=0,UI=0;function It(){throw Error(Q(321))}function mf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function gf(t,e,n,r,i,s){if(Si=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wl.current=t===null||t.memoizedState===null?zI:$I,t=n(r,i),Co){s=0;do{if(Co=!1,Xo=0,25<=s)throw Error(Q(301));s+=1,ut=nt=null,e.updateQueue=null,wl.current=HI,t=n(r,i)}while(Co)}if(wl.current=nu,e=nt!==null&&nt.next!==null,Si=0,ut=nt=Fe=null,tu=!1,e)throw Error(Q(300));return t}function yf(){var t=Xo!==0;return Xo=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Fe.memoizedState=ut=t:ut=ut.next=t,ut}function pn(){if(nt===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=ut===null?Fe.memoizedState:ut.next;if(e!==null)ut=e,nt=t;else{if(t===null)throw Error(Q(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ut===null?Fe.memoizedState=ut=t:ut=ut.next=t}return ut}function Yo(t,e){return typeof e=="function"?e(t):e}function Yc(t){var e=pn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=nt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Si&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,Fe.lanes|=h,Ai|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Cn(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Fe.lanes|=s,Ai|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jc(t){var e=pn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cn(s,e.memoizedState)||($t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vv(){}function wv(t,e){var n=Fe,r=pn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,$t=!0),r=r.queue,_f(Iv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,Jo(9,Tv.bind(null,n,r,i,e),void 0,null),ct===null)throw Error(Q(349));Si&30||Ev(n,e,i)}return i}function Ev(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Tv(t,e,n,r){e.value=n,e.getSnapshot=r,Sv(e)&&Av(t)}function Iv(t,e,n){return n(function(){Sv(e)&&Av(t)})}function Sv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function Av(t){var e=ar(t,1);e!==null&&An(e,t,1,-1)}function ng(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:t},e.queue=t,t=t.dispatch=BI.bind(null,Fe,t),[e.memoizedState,t]}function Jo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rv(){return pn().memoizedState}function El(t,e,n,r){var i=bn();Fe.flags|=t,i.memoizedState=Jo(1|e,n,void 0,r===void 0?null:r)}function ju(t,e,n,r){var i=pn();r=r===void 0?null:r;var s=void 0;if(nt!==null){var o=nt.memoizedState;if(s=o.destroy,r!==null&&mf(r,o.deps)){i.memoizedState=Jo(e,n,s,r);return}}Fe.flags|=t,i.memoizedState=Jo(1|e,n,s,r)}function rg(t,e){return El(8390656,8,t,e)}function _f(t,e){return ju(2048,8,t,e)}function Cv(t,e){return ju(4,2,t,e)}function Pv(t,e){return ju(4,4,t,e)}function kv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xv(t,e,n){return n=n!=null?n.concat([t]):null,ju(4,4,kv.bind(null,e,t),n)}function vf(){}function Nv(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bv(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dv(t,e,n){return Si&21?(Cn(n,e)||(n=U_(),Fe.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function FI(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=Xc.transition;Xc.transition={};try{t(!1),e()}finally{Ee=n,Xc.transition=r}}function Ov(){return pn().memoizedState}function jI(t,e,n){var r=jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lv(t))Vv(e,n);else if(n=gv(t,e,n,r),n!==null){var i=Vt();An(n,t,r,i),Mv(n,e,r)}}function BI(t,e,n){var r=jr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lv(t))Vv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Cn(a,o)){var u=e.interleaved;u===null?(i.next=i,cf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=gv(t,e,i,r),n!==null&&(i=Vt(),An(n,t,r,i),Mv(n,e,r))}}function Lv(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function Vv(t,e){Co=tu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qd(t,n)}}var nu={readContext:fn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},zI={readContext:fn,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:rg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,El(4194308,4,kv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return El(4194308,4,t,e)},useInsertionEffect:function(t,e){return El(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jI.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:ng,useDebugValue:vf,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=ng(!1),e=t[0];return t=FI.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,i=bn();if(Oe){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),ct===null)throw Error(Q(349));Si&30||Ev(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,rg(Iv.bind(null,r,s,t),[t]),r.flags|=2048,Jo(9,Tv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=bn(),e=ct.identifierPrefix;if(Oe){var n=Zn,r=Jn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$I={readContext:fn,useCallback:Nv,useContext:fn,useEffect:_f,useImperativeHandle:xv,useInsertionEffect:Cv,useLayoutEffect:Pv,useMemo:bv,useReducer:Yc,useRef:Rv,useState:function(){return Yc(Yo)},useDebugValue:vf,useDeferredValue:function(t){var e=pn();return Dv(e,nt.memoizedState,t)},useTransition:function(){var t=Yc(Yo)[0],e=pn().memoizedState;return[t,e]},useMutableSource:vv,useSyncExternalStore:wv,useId:Ov,unstable_isNewReconciler:!1},HI={readContext:fn,useCallback:Nv,useContext:fn,useEffect:_f,useImperativeHandle:xv,useInsertionEffect:Cv,useLayoutEffect:Pv,useMemo:bv,useReducer:Jc,useRef:Rv,useState:function(){return Jc(Yo)},useDebugValue:vf,useDeferredValue:function(t){var e=pn();return nt===null?e.memoizedState=t:Dv(e,nt.memoizedState,t)},useTransition:function(){var t=Jc(Yo)[0],e=pn().memoizedState;return[t,e]},useMutableSource:vv,useSyncExternalStore:wv,useId:Ov,unstable_isNewReconciler:!1};function wn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bu={isMounted:function(t){return(t=t._reactInternals)?Oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vt(),i=jr(t),s=ir(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(An(e,t,i,r),vl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vt(),i=jr(t),s=ir(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(An(e,t,i,r),vl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),r=jr(t),i=ir(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ur(t,i,r),e!==null&&(An(e,t,r,n),vl(e,t,r))}};function ig(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ho(n,r)||!Ho(i,s):!0}function Uv(t,e,n){var r=!1,i=Qr,s=e.contextType;return typeof s=="object"&&s!==null?s=fn(s):(i=Wt(e)?Ti:xt.current,r=e.contextTypes,s=(r=r!=null)?ws(t,i):Qr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Bu.enqueueReplaceState(e,e.state,null)}function Qh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},hf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=fn(s):(s=Wt(e)?Ti:xt.current,i.context=ws(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Gh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Bu.enqueueReplaceState(i,i.state,null),Zl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ss(t,e){try{var n="",r=e;do n+=_T(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WI=typeof WeakMap=="function"?WeakMap:Map;function Fv(t,e,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){iu||(iu=!0,od=r),Xh(t,e)},n}function jv(t,e,n){n=ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xh(t,e),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function og(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=sS.bind(null,t,e,n),e.then(t,t))}function ag(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ir(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var qI=fr.ReactCurrentOwner,$t=!1;function Lt(t,e,n,r){e.child=t===null?mv(e,null,n,r):Ts(e,t.child,n,r)}function ug(t,e,n,r,i){n=n.render;var s=e.ref;return fs(e,i),r=gf(t,e,n,r,s,i),n=yf(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Oe&&n&&rf(e),e.flags|=1,Lt(t,e,r,i),e.child)}function cg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Cf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Bv(t,e,s,r,i)):(t=Al(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ho,n(o,r)&&t.ref===e.ref)return lr(t,e,i)}return e.flags|=1,t=Br(s,r),t.ref=e.ref,t.return=e,e.child=t}function Bv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ho(s,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,lr(t,e,i)}return Yh(t,e,n,r,i)}function zv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(os,Yt),Yt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(os,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(os,Yt),Yt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pe(os,Yt),Yt|=r;return Lt(t,e,i,n),e.child}function $v(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yh(t,e,n,r,i){var s=Wt(n)?Ti:xt.current;return s=ws(e,s),fs(e,i),n=gf(t,e,n,r,s,i),r=yf(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Oe&&r&&rf(e),e.flags|=1,Lt(t,e,n,i),e.child)}function hg(t,e,n,r,i){if(Wt(n)){var s=!0;Gl(e)}else s=!1;if(fs(e,i),e.stateNode===null)Tl(t,e),Uv(e,n,r),Qh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fn(c):(c=Wt(n)?Ti:xt.current,c=ws(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&sg(e,o,r,c),Tr=!1;var f=e.memoizedState;o.state=f,Zl(e,r,o,i),u=e.memoizedState,a!==r||f!==u||Ht.current||Tr?(typeof h=="function"&&(Gh(e,n,h,r),u=e.memoizedState),(a=Tr||ig(e,n,a,r,f,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yv(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:wn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=fn(u):(u=Wt(n)?Ti:xt.current,u=ws(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==u)&&sg(e,o,r,u),Tr=!1,f=e.memoizedState,o.state=f,Zl(e,r,o,i);var E=e.memoizedState;a!==d||f!==E||Ht.current||Tr?(typeof y=="function"&&(Gh(e,n,y,r),E=e.memoizedState),(c=Tr||ig(e,n,c,r,f,E,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Jh(t,e,n,r,s,i)}function Jh(t,e,n,r,i,s){$v(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Xm(e,n,!1),lr(t,e,s);r=e.stateNode,qI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ts(e,t.child,null,s),e.child=Ts(e,null,a,s)):Lt(t,e,a,s),e.memoizedState=r.state,i&&Xm(e,n,!0),e.child}function Hv(t){var e=t.stateNode;e.pendingContext?Qm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qm(t,e.context,!1),df(t,e.containerInfo)}function dg(t,e,n,r,i){return Es(),of(i),e.flags|=256,Lt(t,e,n,r),e.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function ed(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wv(t,e,n){var r=e.pendingProps,i=Ue.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe(Ue,i&1),t===null)return qh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hu(o,r,0,null),t=vi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ed(n),e.memoizedState=Zh,t):wf(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return KI(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Br(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Br(a,s):(s=vi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ed(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zh,r}return s=t.child,t=s.sibling,r=Br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wf(t,e){return e=Hu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nl(t,e,n,r){return r!==null&&of(r),Ts(e,t.child,null,n),t=wf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Zc(Error(Q(422))),nl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hu({mode:"visible",children:r.children},i,0,null),s=vi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ts(e,t.child,null,o),e.child.memoizedState=ed(o),e.memoizedState=Zh,s);if(!(e.mode&1))return nl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=Zc(s,r,void 0),nl(t,e,o,r)}if(a=(o&t.childLanes)!==0,$t||a){if(r=ct,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ar(t,i),An(r,t,i,-1))}return Rf(),r=Zc(Error(Q(421))),nl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=oS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jt=Mr(i.nextSibling),en=e,Oe=!0,Tn=null,t!==null&&(ln[un++]=Jn,ln[un++]=Zn,ln[un++]=Ii,Jn=t.id,Zn=t.overflow,Ii=e),e=wf(e,r.children),e.flags|=4096,e)}function fg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kh(t.return,e,n)}function eh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Lt(t,e,r.children,n),r=Ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fg(t,n,e);else if(t.tag===19)fg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Ue,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&eu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),eh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&eu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}eh(e,!0,n,null,s);break;case"together":eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GI(t,e,n){switch(e.tag){case 3:Hv(e),Es();break;case 5:_v(e);break;case 1:Wt(e.type)&&Gl(e);break;case 4:df(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(Yl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?Wv(t,e,n):(Pe(Ue,Ue.current&1),t=lr(t,e,n),t!==null?t.sibling:null);Pe(Ue,Ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Ue,Ue.current),r)break;return null;case 22:case 23:return e.lanes=0,zv(t,e,n)}return lr(t,e,n)}var Kv,td,Gv,Qv;Kv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};td=function(){};Gv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,mi(Mn.current);var s=null;switch(n){case"input":i=Ih(t,i),r=Ih(t,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=Rh(t,i),r=Rh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ql)}Ph(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Mo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Mo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ne("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Qv=function(t,e,n,r){n!==r&&(e.flags|=4)};function lo(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function QI(t,e,n){var r=e.pendingProps;switch(sf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Wt(e.type)&&Kl(),St(e),null;case 3:return r=e.stateNode,Is(),be(Ht),be(xt),pf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(el(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tn!==null&&(ud(Tn),Tn=null))),td(t,e),St(e),null;case 5:ff(e);var i=mi(Qo.current);if(n=e.type,t!==null&&e.stateNode!=null)Gv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return St(e),null}if(t=mi(Mn.current),el(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[Ko]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<go.length;i++)Ne(go[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Tm(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":Sm(r,s),Ne("invalid",r)}Ph(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Za(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Za(r.textContent,a,t),i=["children",""+a]):Mo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Wa(r),Im(r,s,!0);break;case"textarea":Wa(r),Am(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ql)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[Ko]=r,Kv(t,e,!1,!1),e.stateNode=t;e:{switch(o=kh(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<go.length;i++)Ne(go[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":Tm(t,r),i=Ih(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Sm(t,r),i=Rh(t,r),Ne("invalid",t);break;default:i=r}Ph(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?R_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&S_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Uo(t,u):typeof u=="number"&&Uo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ne("scroll",t):u!=null&&$d(t,s,u,o))}switch(n){case"input":Wa(t),Im(t,r,!1);break;case"textarea":Wa(t),Am(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?us(t,!!r.multiple,s,!1):r.defaultValue!=null&&us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)Qv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=mi(Qo.current),mi(Mn.current),el(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=en,t!==null))switch(t.tag){case 3:Za(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Za(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return St(e),null;case 13:if(be(Ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Jt!==null&&e.mode&1&&!(e.flags&128))fv(),Es(),e.flags|=98560,s=!1;else if(s=el(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[On]=e}else Es(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else Tn!==null&&(ud(Tn),Tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?it===0&&(it=3):Rf())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return Is(),td(t,e),t===null&&Wo(e.stateNode.containerInfo),St(e),null;case 10:return uf(e.type._context),St(e),null;case 17:return Wt(e.type)&&Kl(),St(e),null;case 19:if(be(Ue),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)lo(s,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=eu(t),o!==null){for(e.flags|=128,lo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Ue,Ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>As&&(e.flags|=128,r=!0,lo(s,!1),e.lanes=4194304)}else{if(!r)if(t=eu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oe)return St(e),null}else 2*Ge()-s.renderingStartTime>As&&n!==1073741824&&(e.flags|=128,r=!0,lo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=Ue.current,Pe(Ue,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return Af(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function XI(t,e){switch(sf(e),e.tag){case 1:return Wt(e.type)&&Kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Is(),be(Ht),be(xt),pf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ff(e),null;case 13:if(be(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Es()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ue),null;case 4:return Is(),null;case 10:return uf(e.type._context),null;case 22:case 23:return Af(),null;case 24:return null;default:return null}}var rl=!1,Pt=!1,YI=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ss(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function nd(t,e,n){try{n()}catch(r){$e(t,e,r)}}var pg=!1;function JI(t,e){if(Fh=$l,t=ev(),nf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(u=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(jh={focusedElem:t,selectionRange:n},$l=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var k=E.memoizedProps,x=E.memoizedState,v=e.stateNode,A=v.getSnapshotBeforeUpdate(e.elementType===e.type?k:wn(e.type,k),x);v.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(D){$e(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return E=pg,pg=!1,E}function Po(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&nd(e,n,s)}i=i.next}while(i!==r)}}function zu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xv(t){var e=t.alternate;e!==null&&(t.alternate=null,Xv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[Ko],delete e[$h],delete e[OI],delete e[LI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yv(t){return t.tag===5||t.tag===3||t.tag===4}function mg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ql));else if(r!==4&&(t=t.child,t!==null))for(id(t,e,n),t=t.sibling;t!==null;)id(t,e,n),t=t.sibling}function sd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sd(t,e,n),t=t.sibling;t!==null;)sd(t,e,n),t=t.sibling}var dt=null,En=!1;function vr(t,e,n){for(n=n.child;n!==null;)Jv(t,e,n),n=n.sibling}function Jv(t,e,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Ou,n)}catch{}switch(n.tag){case 5:Pt||ss(n,e);case 6:var r=dt,i=En;dt=null,vr(t,e,n),dt=r,En=i,dt!==null&&(En?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(En?(t=dt,n=n.stateNode,t.nodeType===8?Kc(t.parentNode,n):t.nodeType===1&&Kc(t,n),zo(t)):Kc(dt,n.stateNode));break;case 4:r=dt,i=En,dt=n.stateNode.containerInfo,En=!0,vr(t,e,n),dt=r,En=i;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nd(n,e,o),i=i.next}while(i!==r)}vr(t,e,n);break;case 1:if(!Pt&&(ss(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$e(n,e,a)}vr(t,e,n);break;case 21:vr(t,e,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,vr(t,e,n),Pt=r):vr(t,e,n);break;default:vr(t,e,n)}}function gg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YI),e.forEach(function(r){var i=aS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:dt=a.stateNode,En=!1;break e;case 3:dt=a.stateNode.containerInfo,En=!0;break e;case 4:dt=a.stateNode.containerInfo,En=!0;break e}a=a.return}if(dt===null)throw Error(Q(160));Jv(s,o,i),dt=null,En=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){$e(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zv(e,t),e=e.sibling}function Zv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(e,t),Nn(t),r&4){try{Po(3,t,t.return),zu(3,t)}catch(k){$e(t,t.return,k)}try{Po(5,t,t.return)}catch(k){$e(t,t.return,k)}}break;case 1:_n(e,t),Nn(t),r&512&&n!==null&&ss(n,n.return);break;case 5:if(_n(e,t),Nn(t),r&512&&n!==null&&ss(n,n.return),t.flags&32){var i=t.stateNode;try{Uo(i,"")}catch(k){$e(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&E_(i,s),kh(a,o);var c=kh(a,s);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];h==="style"?R_(i,d):h==="dangerouslySetInnerHTML"?S_(i,d):h==="children"?Uo(i,d):$d(i,h,d,c)}switch(a){case"input":Sh(i,s);break;case"textarea":T_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?us(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?us(i,!!s.multiple,s.defaultValue,!0):us(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ko]=s}catch(k){$e(t,t.return,k)}}break;case 6:if(_n(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){$e(t,t.return,k)}}break;case 3:if(_n(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zo(e.containerInfo)}catch(k){$e(t,t.return,k)}break;case 4:_n(e,t),Nn(t);break;case 13:_n(e,t),Nn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(If=Ge())),r&4&&gg(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(c=Pt)||h,_n(e,t),Pt=c):_n(e,t),Nn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(d=ee=h;ee!==null;){switch(f=ee,y=f.child,f.tag){case 0:case 11:case 14:case 15:Po(4,f,f.return);break;case 1:ss(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(k){$e(r,n,k)}}break;case 5:ss(f,f.return);break;case 22:if(f.memoizedState!==null){_g(d);continue}}y!==null?(y.return=f,ee=y):_g(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=A_("display",o))}catch(k){$e(t,t.return,k)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(k){$e(t,t.return,k)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_n(e,t),Nn(t),r&4&&gg(t);break;case 21:break;default:_n(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yv(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Uo(i,""),r.flags&=-33);var s=mg(t);sd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=mg(t);id(t,a,o);break;default:throw Error(Q(161))}}catch(u){$e(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ZI(t,e,n){ee=t,e0(t)}function e0(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||rl;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Pt;a=rl;var c=Pt;if(rl=o,(Pt=u)&&!c)for(ee=i;ee!==null;)o=ee,u=o.child,o.tag===22&&o.memoizedState!==null?vg(i):u!==null?(u.return=o,ee=u):vg(i);for(;s!==null;)ee=s,e0(s),s=s.sibling;ee=i,rl=a,Pt=c}yg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):yg(t)}}function yg(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||zu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:wn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&zo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Pt||e.flags&512&&rd(e)}catch(f){$e(e,e.return,f)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function _g(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function vg(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zu(4,e)}catch(u){$e(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){$e(e,i,u)}}var s=e.return;try{rd(e)}catch(u){$e(e,s,u)}break;case 5:var o=e.return;try{rd(e)}catch(u){$e(e,o,u)}}}catch(u){$e(e,e.return,u)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var eS=Math.ceil,ru=fr.ReactCurrentDispatcher,Ef=fr.ReactCurrentOwner,dn=fr.ReactCurrentBatchConfig,pe=0,ct=null,Je=null,mt=0,Yt=0,os=ti(0),it=0,Zo=null,Ai=0,$u=0,Tf=0,ko=null,Bt=null,If=0,As=1/0,Xn=null,iu=!1,od=null,Fr=null,il=!1,Nr=null,su=0,xo=0,ad=null,Il=-1,Sl=0;function Vt(){return pe&6?Ge():Il!==-1?Il:Il=Ge()}function jr(t){return t.mode&1?pe&2&&mt!==0?mt&-mt:MI.transition!==null?(Sl===0&&(Sl=U_()),Sl):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:W_(t.type)),t):1}function An(t,e,n,r){if(50<xo)throw xo=0,ad=null,Error(Q(185));fa(t,n,r),(!(pe&2)||t!==ct)&&(t===ct&&(!(pe&2)&&($u|=n),it===4&&Sr(t,mt)),qt(t,r),n===1&&pe===0&&!(e.mode&1)&&(As=Ge()+500,Fu&&ni()))}function qt(t,e){var n=t.callbackNode;MT(t,e);var r=zl(t,t===ct?mt:0);if(r===0)n!==null&&Pm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pm(n),e===1)t.tag===0?VI(wg.bind(null,t)):cv(wg.bind(null,t)),bI(function(){!(pe&6)&&ni()}),n=null;else{switch(F_(r)){case 1:n=Gd;break;case 4:n=V_;break;case 16:n=Bl;break;case 536870912:n=M_;break;default:n=Bl}n=l0(n,t0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function t0(t,e){if(Il=-1,Sl=0,pe&6)throw Error(Q(327));var n=t.callbackNode;if(ps()&&t.callbackNode!==n)return null;var r=zl(t,t===ct?mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ou(t,r);else{e=r;var i=pe;pe|=2;var s=r0();(ct!==t||mt!==e)&&(Xn=null,As=Ge()+500,_i(t,e));do try{rS();break}catch(a){n0(t,a)}while(!0);lf(),ru.current=s,pe=i,Je!==null?e=0:(ct=null,mt=0,e=it)}if(e!==0){if(e===2&&(i=Oh(t),i!==0&&(r=i,e=ld(t,i))),e===1)throw n=Zo,_i(t,0),Sr(t,r),qt(t,Ge()),n;if(e===6)Sr(t,r);else{if(i=t.current.alternate,!(r&30)&&!tS(i)&&(e=ou(t,r),e===2&&(s=Oh(t),s!==0&&(r=s,e=ld(t,s))),e===1))throw n=Zo,_i(t,0),Sr(t,r),qt(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:hi(t,Bt,Xn);break;case 3:if(Sr(t,r),(r&130023424)===r&&(e=If+500-Ge(),10<e)){if(zl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zh(hi.bind(null,t,Bt,Xn),e);break}hi(t,Bt,Xn);break;case 4:if(Sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Sn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eS(r/1960))-r,10<r){t.timeoutHandle=zh(hi.bind(null,t,Bt,Xn),r);break}hi(t,Bt,Xn);break;case 5:hi(t,Bt,Xn);break;default:throw Error(Q(329))}}}return qt(t,Ge()),t.callbackNode===n?t0.bind(null,t):null}function ld(t,e){var n=ko;return t.current.memoizedState.isDehydrated&&(_i(t,e).flags|=256),t=ou(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&ud(e)),t}function ud(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function tS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sr(t,e){for(e&=~Tf,e&=~$u,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function wg(t){if(pe&6)throw Error(Q(327));ps();var e=zl(t,0);if(!(e&1))return qt(t,Ge()),null;var n=ou(t,e);if(t.tag!==0&&n===2){var r=Oh(t);r!==0&&(e=r,n=ld(t,r))}if(n===1)throw n=Zo,_i(t,0),Sr(t,e),qt(t,Ge()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hi(t,Bt,Xn),qt(t,Ge()),null}function Sf(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(As=Ge()+500,Fu&&ni())}}function Ri(t){Nr!==null&&Nr.tag===0&&!(pe&6)&&ps();var e=pe;pe|=1;var n=dn.transition,r=Ee;try{if(dn.transition=null,Ee=1,t)return t()}finally{Ee=r,dn.transition=n,pe=e,!(pe&6)&&ni()}}function Af(){Yt=os.current,be(os)}function _i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NI(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(sf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kl();break;case 3:Is(),be(Ht),be(xt),pf();break;case 5:ff(r);break;case 4:Is();break;case 13:be(Ue);break;case 19:be(Ue);break;case 10:uf(r.type._context);break;case 22:case 23:Af()}n=n.return}if(ct=t,Je=t=Br(t.current,null),mt=Yt=e,it=0,Zo=null,Tf=$u=Ai=0,Bt=ko=null,pi!==null){for(e=0;e<pi.length;e++)if(n=pi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}pi=null}return t}function n0(t,e){do{var n=Je;try{if(lf(),wl.current=nu,tu){for(var r=Fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}tu=!1}if(Si=0,ut=nt=Fe=null,Co=!1,Xo=0,Ef.current=null,n===null||n.return===null){it=1,Zo=e,Je=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=mt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=ag(o);if(y!==null){y.flags&=-257,lg(y,o,a,s,e),y.mode&1&&og(s,c,e),e=y,u=c;var E=e.updateQueue;if(E===null){var k=new Set;k.add(u),e.updateQueue=k}else E.add(u);break e}else{if(!(e&1)){og(s,c,e),Rf();break e}u=Error(Q(426))}}else if(Oe&&a.mode&1){var x=ag(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),lg(x,o,a,s,e),of(Ss(u,a));break e}}s=u=Ss(u,a),it!==4&&(it=2),ko===null?ko=[s]:ko.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Fv(s,u,e);eg(s,v);break e;case 1:a=u;var A=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Fr===null||!Fr.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=jv(s,a,e);eg(s,D);break e}}s=s.return}while(s!==null)}s0(n)}catch(V){e=V,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function r0(){var t=ru.current;return ru.current=nu,t===null?nu:t}function Rf(){(it===0||it===3||it===2)&&(it=4),ct===null||!(Ai&268435455)&&!($u&268435455)||Sr(ct,mt)}function ou(t,e){var n=pe;pe|=2;var r=r0();(ct!==t||mt!==e)&&(Xn=null,_i(t,e));do try{nS();break}catch(i){n0(t,i)}while(!0);if(lf(),pe=n,ru.current=r,Je!==null)throw Error(Q(261));return ct=null,mt=0,it}function nS(){for(;Je!==null;)i0(Je)}function rS(){for(;Je!==null&&!PT();)i0(Je)}function i0(t){var e=a0(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?s0(t):Je=e,Ef.current=null}function s0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XI(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,Je=null;return}}else if(n=QI(n,e,Yt),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);it===0&&(it=5)}function hi(t,e,n){var r=Ee,i=dn.transition;try{dn.transition=null,Ee=1,iS(t,e,n,r)}finally{dn.transition=i,Ee=r}return null}function iS(t,e,n,r){do ps();while(Nr!==null);if(pe&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(UT(t,s),t===ct&&(Je=ct=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||il||(il=!0,l0(Bl,function(){return ps(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=dn.transition,dn.transition=null;var o=Ee;Ee=1;var a=pe;pe|=4,Ef.current=null,JI(t,n),Zv(n,t),SI(jh),$l=!!Fh,jh=Fh=null,t.current=n,ZI(n),kT(),pe=a,Ee=o,dn.transition=s}else t.current=n;if(il&&(il=!1,Nr=t,su=i),s=t.pendingLanes,s===0&&(Fr=null),bT(n.stateNode),qt(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(iu)throw iu=!1,t=od,od=null,t;return su&1&&t.tag!==0&&ps(),s=t.pendingLanes,s&1?t===ad?xo++:(xo=0,ad=t):xo=0,ni(),null}function ps(){if(Nr!==null){var t=F_(su),e=dn.transition,n=Ee;try{if(dn.transition=null,Ee=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,su=0,pe&6)throw Error(Q(331));var i=pe;for(pe|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(ee=c;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:Po(8,h,s)}var d=h.child;if(d!==null)d.return=h,ee=d;else for(;ee!==null;){h=ee;var f=h.sibling,y=h.return;if(Xv(h),h===c){ee=null;break}if(f!==null){f.return=y,ee=f;break}ee=y}}}var E=s.alternate;if(E!==null){var k=E.child;if(k!==null){E.child=null;do{var x=k.sibling;k.sibling=null,k=x}while(k!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Po(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ee=v;break e}ee=s.return}}var A=t.current;for(ee=A;ee!==null;){o=ee;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ee=C;else e:for(o=A;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zu(9,a)}}catch(V){$e(a,a.return,V)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(pe=i,ni(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Ou,t)}catch{}r=!0}return r}finally{Ee=n,dn.transition=e}}return!1}function Eg(t,e,n){e=Ss(n,e),e=Fv(t,e,1),t=Ur(t,e,1),e=Vt(),t!==null&&(fa(t,1,e),qt(t,e))}function $e(t,e,n){if(t.tag===3)Eg(t,t,n);else for(;e!==null;){if(e.tag===3){Eg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){t=Ss(n,t),t=jv(e,t,1),e=Ur(e,t,1),t=Vt(),e!==null&&(fa(e,1,t),qt(e,t));break}}e=e.return}}function sS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,ct===t&&(mt&n)===n&&(it===4||it===3&&(mt&130023424)===mt&&500>Ge()-If?_i(t,0):Tf|=n),qt(t,e)}function o0(t,e){e===0&&(t.mode&1?(e=Ga,Ga<<=1,!(Ga&130023424)&&(Ga=4194304)):e=1);var n=Vt();t=ar(t,e),t!==null&&(fa(t,e,n),qt(t,n))}function oS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o0(t,n)}function aS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),o0(t,n)}var a0;a0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,GI(t,e,n);$t=!!(t.flags&131072)}else $t=!1,Oe&&e.flags&1048576&&hv(e,Xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tl(t,e),t=e.pendingProps;var i=ws(e,xt.current);fs(e,n),i=gf(null,e,r,t,i,n);var s=yf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(r)?(s=!0,Gl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hf(e),i.updater=Bu,e.stateNode=i,i._reactInternals=e,Qh(e,r,t,n),e=Jh(null,e,r,!0,s,n)):(e.tag=0,Oe&&s&&rf(e),Lt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uS(r),t=wn(r,t),i){case 0:e=Yh(null,e,r,t,n);break e;case 1:e=hg(null,e,r,t,n);break e;case 11:e=ug(null,e,r,t,n);break e;case 14:e=cg(null,e,r,wn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wn(r,i),Yh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wn(r,i),hg(t,e,r,i,n);case 3:e:{if(Hv(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,yv(t,e),Zl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ss(Error(Q(423)),e),e=dg(t,e,r,n,i);break e}else if(r!==i){i=Ss(Error(Q(424)),e),e=dg(t,e,r,n,i);break e}else for(Jt=Mr(e.stateNode.containerInfo.firstChild),en=e,Oe=!0,Tn=null,n=mv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Es(),r===i){e=lr(t,e,n);break e}Lt(t,e,r,n)}e=e.child}return e;case 5:return _v(e),t===null&&qh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Bh(r,i)?o=null:s!==null&&Bh(r,s)&&(e.flags|=32),$v(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&qh(e),null;case 13:return Wv(t,e,n);case 4:return df(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ts(e,null,r,n):Lt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wn(r,i),ug(t,e,r,i,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Pe(Yl,r._currentValue),r._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===i.children&&!Ht.current){e=lr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ir(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Kh(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Kh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fs(e,n),i=fn(i),r=r(i),e.flags|=1,Lt(t,e,r,n),e.child;case 14:return r=e.type,i=wn(r,e.pendingProps),i=wn(r.type,i),cg(t,e,r,i,n);case 15:return Bv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wn(r,i),Tl(t,e),e.tag=1,Wt(r)?(t=!0,Gl(e)):t=!1,fs(e,n),Uv(e,r,i),Qh(e,r,i,n),Jh(null,e,r,!0,t,n);case 19:return qv(t,e,n);case 22:return zv(t,e,n)}throw Error(Q(156,e.tag))};function l0(t,e){return L_(t,e)}function lS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,n,r){return new lS(t,e,n,r)}function Cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uS(t){if(typeof t=="function")return Cf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wd)return 11;if(t===qd)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Al(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Cf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xi:return vi(n.children,i,s,e);case Hd:o=8,i|=8;break;case vh:return t=hn(12,n,e,i|2),t.elementType=vh,t.lanes=s,t;case wh:return t=hn(13,n,e,i),t.elementType=wh,t.lanes=s,t;case Eh:return t=hn(19,n,e,i),t.elementType=Eh,t.lanes=s,t;case __:return Hu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g_:o=10;break e;case y_:o=9;break e;case Wd:o=11;break e;case qd:o=14;break e;case Er:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=hn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function vi(t,e,n,r){return t=hn(7,t,r,e),t.lanes=n,t}function Hu(t,e,n,r){return t=hn(22,t,r,e),t.elementType=__,t.lanes=n,t.stateNode={isHidden:!1},t}function th(t,e,n){return t=hn(6,t,null,e),t.lanes=n,t}function nh(t,e,n){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vc(0),this.expirationTimes=Vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pf(t,e,n,r,i,s,o,a,u){return t=new cS(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(s),t}function hS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function u0(t){if(!t)return Qr;t=t._reactInternals;e:{if(Oi(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Wt(n))return uv(t,n,e)}return e}function c0(t,e,n,r,i,s,o,a,u){return t=Pf(n,r,!0,t,i,s,o,a,u),t.context=u0(null),n=t.current,r=Vt(),i=jr(n),s=ir(r,i),s.callback=e??null,Ur(n,s,i),t.current.lanes=i,fa(t,i,r),qt(t,r),t}function Wu(t,e,n,r){var i=e.current,s=Vt(),o=jr(i);return n=u0(n),e.context===null?e.context=n:e.pendingContext=n,e=ir(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(i,e,o),t!==null&&(An(t,i,o,s),vl(t,i,o)),o}function au(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kf(t,e){Tg(t,e),(t=t.alternate)&&Tg(t,e)}function dS(){return null}var h0=typeof reportError=="function"?reportError:function(t){console.error(t)};function xf(t){this._internalRoot=t}qu.prototype.render=xf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Wu(t,e,null,null)};qu.prototype.unmount=xf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ri(function(){Wu(null,t,null,null)}),e[or]=null}};function qu(t){this._internalRoot=t}qu.prototype.unstable_scheduleHydration=function(t){if(t){var e=z_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&H_(t)}};function Nf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ig(){}function fS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=au(o);s.call(c)}}var o=c0(e,r,t,0,null,!1,!1,"",Ig);return t._reactRootContainer=o,t[or]=o.current,Wo(t.nodeType===8?t.parentNode:t),Ri(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=au(u);a.call(c)}}var u=Pf(t,0,!1,null,null,!1,!1,"",Ig);return t._reactRootContainer=u,t[or]=u.current,Wo(t.nodeType===8?t.parentNode:t),Ri(function(){Wu(e,u,n,r)}),u}function Gu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=au(o);a.call(u)}}Wu(e,o,t,i)}else o=fS(n,e,t,i,r);return au(o)}j_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mo(e.pendingLanes);n!==0&&(Qd(e,n|1),qt(e,Ge()),!(pe&6)&&(As=Ge()+500,ni()))}break;case 13:Ri(function(){var r=ar(t,1);if(r!==null){var i=Vt();An(r,t,1,i)}}),kf(t,1)}};Xd=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Vt();An(e,t,134217728,n)}kf(t,134217728)}};B_=function(t){if(t.tag===13){var e=jr(t),n=ar(t,e);if(n!==null){var r=Vt();An(n,t,e,r)}kf(t,e)}};z_=function(){return Ee};$_=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Nh=function(t,e,n){switch(e){case"input":if(Sh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Uu(r);if(!i)throw Error(Q(90));w_(r),Sh(r,i)}}}break;case"textarea":T_(t,n);break;case"select":e=n.value,e!=null&&us(t,!!n.multiple,e,!1)}};k_=Sf;x_=Ri;var pS={usingClientEntryPoint:!1,Events:[ma,es,Uu,C_,P_,Sf]},uo={findFiberByHostInstance:fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mS={bundleType:uo.bundleType,version:uo.version,rendererPackageName:uo.rendererPackageName,rendererConfig:uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D_(t),t===null?null:t.stateNode},findFiberByHostInstance:uo.findFiberByHostInstance||dS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{Ou=sl.inject(mS),Vn=sl}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pS;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nf(e))throw Error(Q(200));return hS(t,e,null,n)};nn.createRoot=function(t,e){if(!Nf(t))throw Error(Q(299));var n=!1,r="",i=h0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pf(t,1,!1,null,null,n,!1,r,i),t[or]=e.current,Wo(t.nodeType===8?t.parentNode:t),new xf(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=D_(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return Ri(t)};nn.hydrate=function(t,e,n){if(!Ku(e))throw Error(Q(200));return Gu(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!Nf(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=h0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=c0(e,null,t,1,n??null,i,!1,s,o),t[or]=e.current,Wo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qu(e)};nn.render=function(t,e,n){if(!Ku(e))throw Error(Q(200));return Gu(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!Ku(t))throw Error(Q(40));return t._reactRootContainer?(Ri(function(){Gu(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};nn.unstable_batchedUpdates=Sf;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ku(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Gu(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function d0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d0)}catch(t){console.error(t)}}d0(),d_.exports=nn;var gS=d_.exports,f0,Sg=gS;f0=Sg.createRoot,Sg.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ea.apply(this,arguments)}var br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(br||(br={}));const Ag="popstate";function yS(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return cd("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:lu(i)}return vS(e,n,null,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function p0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _S(){return Math.random().toString(36).substr(2,8)}function Rg(t,e){return{usr:t.state,key:t.key,idx:e}}function cd(t,e,n,r){return n===void 0&&(n=null),ea({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ms(e):e,{state:n,key:e&&e.key||r||_S()})}function lu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ms(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vS(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=br.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(ea({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=br.Pop;let x=h(),v=x==null?null:x-c;c=x,u&&u({action:a,location:k.location,delta:v})}function f(x,v){a=br.Push;let A=cd(k.location,x,v);c=h()+1;let C=Rg(A,c),D=k.createHref(A);try{o.pushState(C,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(D)}s&&u&&u({action:a,location:k.location,delta:1})}function y(x,v){a=br.Replace;let A=cd(k.location,x,v);c=h();let C=Rg(A,c),D=k.createHref(A);o.replaceState(C,"",D),s&&u&&u({action:a,location:k.location,delta:0})}function E(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof x=="string"?x:lu(x);return A=A.replace(/ $/,"%20"),Ze(v,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,v)}let k={get action(){return a},get location(){return t(i,o)},listen(x){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ag,d),u=x,()=>{i.removeEventListener(Ag,d),u=null}},createHref(x){return e(i,x)},createURL:E,encodeLocation(x){let v=E(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:y,go(x){return o.go(x)}};return k}var Cg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cg||(Cg={}));function wS(t,e,n){return n===void 0&&(n="/"),ES(t,e,n,!1)}function ES(t,e,n,r){let i=typeof e=="string"?Ms(e):e,s=bf(i.pathname||"/",n);if(s==null)return null;let o=m0(t);TS(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=DS(s);a=NS(o[u],c,r)}return a}function m0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ze(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=zr([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Ze(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),m0(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:kS(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of g0(s.path))i(s,o,u)}),e}function g0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=g0(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function TS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IS=/^:[\w-]+$/,SS=3,AS=2,RS=1,CS=10,PS=-2,Pg=t=>t==="*";function kS(t,e){let n=t.split("/"),r=n.length;return n.some(Pg)&&(r+=PS),e&&(r+=AS),n.filter(i=>!Pg(i)).reduce((i,s)=>i+(IS.test(s)?SS:s===""?RS:CS),r)}function xS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function NS(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=kg({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),f=u.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=kg({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:zr([s,d.pathname]),pathnameBase:MS(zr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=zr([s,d.pathnameBase]))}return o}function kg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bS(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:y}=h;if(f==="*"){let k=a[d]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const E=a[d];return y&&!E?c[f]=void 0:c[f]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function bS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),p0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return p0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function OS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ms(t):t;return{pathname:n?n.startsWith("/")?n:LS(n,e):e,search:US(r),hash:FS(i)}}function LS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function rh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function y0(t,e){let n=VS(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _0(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ms(t):(i=ea({},t),Ze(!i.pathname||!i.pathname.includes("?"),rh("?","pathname","search",i)),Ze(!i.pathname||!i.pathname.includes("#"),rh("#","pathname","hash",i)),Ze(!i.search||!i.search.includes("#"),rh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let u=OS(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const zr=t=>t.join("/").replace(/\/\/+/g,"/"),MS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),US=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const v0=["post","put","patch","delete"];new Set(v0);const BS=["get",...v0];new Set(BS);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ta.apply(this,arguments)}const Df=X.createContext(null),zS=X.createContext(null),Li=X.createContext(null),Qu=X.createContext(null),Vi=X.createContext({outlet:null,matches:[],isDataRoute:!1}),w0=X.createContext(null);function $S(t,e){let{relative:n}=e===void 0?{}:e;ya()||Ze(!1);let{basename:r,navigator:i}=X.useContext(Li),{hash:s,pathname:o,search:a}=I0(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:zr([r,o])),i.createHref({pathname:u,search:a,hash:s})}function ya(){return X.useContext(Qu)!=null}function Xu(){return ya()||Ze(!1),X.useContext(Qu).location}function E0(t){X.useContext(Li).static||X.useLayoutEffect(t)}function T0(){let{isDataRoute:t}=X.useContext(Vi);return t?nA():HS()}function HS(){ya()||Ze(!1);let t=X.useContext(Df),{basename:e,future:n,navigator:r}=X.useContext(Li),{matches:i}=X.useContext(Vi),{pathname:s}=Xu(),o=JSON.stringify(y0(i,n.v7_relativeSplatPath)),a=X.useRef(!1);return E0(()=>{a.current=!0}),X.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=_0(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:zr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function I0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=X.useContext(Li),{matches:i}=X.useContext(Vi),{pathname:s}=Xu(),o=JSON.stringify(y0(i,r.v7_relativeSplatPath));return X.useMemo(()=>_0(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function WS(t,e){return qS(t,e)}function qS(t,e,n,r){ya()||Ze(!1);let{navigator:i}=X.useContext(Li),{matches:s}=X.useContext(Vi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Xu(),h;if(e){var d;let x=typeof e=="string"?Ms(e):e;u==="/"||(d=x.pathname)!=null&&d.startsWith(u)||Ze(!1),h=x}else h=c;let f=h.pathname||"/",y=f;if(u!=="/"){let x=u.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let E=wS(t,{pathname:y}),k=YS(E&&E.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:zr([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:zr([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&k?X.createElement(Qu.Provider,{value:{location:ta({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:br.Pop}},k):k}function KS(){let t=tA(),e=jS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),n?X.createElement("pre",{style:i},n):null,null)}const GS=X.createElement(KS,null);class QS extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?X.createElement(Vi.Provider,{value:this.props.routeContext},X.createElement(w0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XS(t){let{routeContext:e,match:n,children:r}=t,i=X.useContext(Df);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),X.createElement(Vi.Provider,{value:e},r)}function YS(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Ze(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:y}=n,E=d.route.loader&&f[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||E){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let y,E=!1,k=null,x=null;n&&(y=a&&d.route.id?a[d.route.id]:void 0,k=d.route.errorElement||GS,u&&(c<0&&f===0?(E=!0,x=null):c===f&&(E=!0,x=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),A=()=>{let C;return y?C=k:E?C=x:d.route.Component?C=X.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=h,X.createElement(XS,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?X.createElement(QS,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:A(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):A()},null)}var S0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(S0||{}),uu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(uu||{});function JS(t){let e=X.useContext(Df);return e||Ze(!1),e}function ZS(t){let e=X.useContext(zS);return e||Ze(!1),e}function eA(t){let e=X.useContext(Vi);return e||Ze(!1),e}function A0(t){let e=eA(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function tA(){var t;let e=X.useContext(w0),n=ZS(uu.UseRouteError),r=A0(uu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nA(){let{router:t}=JS(S0.UseNavigateStable),e=A0(uu.UseNavigateStable),n=X.useRef(!1);return E0(()=>{n.current=!0}),X.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ta({fromRouteId:e},s)))},[t,e])}function Rl(t){Ze(!1)}function rA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=br.Pop,navigator:s,static:o=!1,future:a}=t;ya()&&Ze(!1);let u=e.replace(/^\/*/,"/"),c=X.useMemo(()=>({basename:u,navigator:s,static:o,future:ta({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Ms(r));let{pathname:h="/",search:d="",hash:f="",state:y=null,key:E="default"}=r,k=X.useMemo(()=>{let x=bf(h,u);return x==null?null:{location:{pathname:x,search:d,hash:f,state:y,key:E},navigationType:i}},[u,h,d,f,y,E,i]);return k==null?null:X.createElement(Li.Provider,{value:c},X.createElement(Qu.Provider,{children:n,value:k}))}function iA(t){let{children:e,location:n}=t;return WS(hd(e),n)}new Promise(()=>{});function hd(t,e){e===void 0&&(e=[]);let n=[];return X.Children.forEach(t,(r,i)=>{if(!X.isValidElement(r))return;let s=[...e,i];if(r.type===X.Fragment){n.push.apply(n,hd(r.props.children,s));return}r.type!==Rl&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hd(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function sA(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function oA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aA(t,e){return t.button===0&&(!e||e==="_self")&&!oA(t)}const lA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uA="6";try{window.__reactRouterVersion=uA}catch{}const cA="startTransition",xg=sT[cA];function hA(t){let{basename:e,children:n,future:r,window:i}=t,s=X.useRef();s.current==null&&(s.current=yS({window:i,v5Compat:!0}));let o=s.current,[a,u]=X.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=X.useCallback(d=>{c&&xg?xg(()=>u(d)):u(d)},[u,c]);return X.useLayoutEffect(()=>o.listen(h),[o,h]),X.createElement(rA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const dA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R0=X.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:d}=e,f=sA(e,lA),{basename:y}=X.useContext(Li),E,k=!1;if(typeof c=="string"&&fA.test(c)&&(E=c,dA))try{let C=new URL(window.location.href),D=c.startsWith("//")?new URL(C.protocol+c):new URL(c),V=bf(D.pathname,y);D.origin===C.origin&&V!=null?c=V+D.search+D.hash:k=!0}catch{}let x=$S(c,{relative:i}),v=pA(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,viewTransition:d});function A(C){r&&r(C),C.defaultPrevented||v(C)}return X.createElement("a",dd({},f,{href:E||x,onClick:k||s?r:A,ref:n,target:u}))});var Ng;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ng||(Ng={}));var bg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bg||(bg={}));function pA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,u=T0(),c=Xu(),h=I0(t,{relative:o});return X.useCallback(d=>{if(aA(d,n)){d.preventDefault();let f=r!==void 0?r:lu(c)===lu(h);u(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,u,h,r,i,n,t,s,o,a])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),qn=(t,e)=>{const n=X.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:u,...c},h)=>X.createElement("svg",{ref:h,...mA,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${gA(t)}`,a].join(" "),...c},[...e.map(([d,f])=>X.createElement(d,f)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=qn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=qn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=qn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=qn("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=qn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=qn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=qn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=qn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=qn("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=qn("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var Dg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},b0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(f=64)),r.push(n[h],n[d],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(N0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new SA;const f=s<<2|a>>4;if(r.push(f),c!==64){const y=a<<4&240|c>>2;if(r.push(y),d!==64){const E=c<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AA=function(t){const e=N0(t);return b0.encodeByteArray(e,!0)},cu=function(t){return AA(t).replace(/\./g,"")},D0=function(t){try{return b0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=()=>RA().__FIREBASE_DEFAULTS__,PA=()=>{if(typeof process>"u"||typeof Dg>"u")return;const t=Dg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&D0(t[1]);return e&&JSON.parse(e)},Yu=()=>{try{return CA()||PA()||kA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},O0=t=>{var e,n;return(n=(e=Yu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},L0=t=>{const e=O0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},V0=()=>{var t;return(t=Yu())===null||t===void 0?void 0:t.config},M0=t=>{var e;return(e=Yu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cu(JSON.stringify(n)),cu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function bA(){var t;const e=(t=Yu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VA(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MA(){return!bA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UA(){try{return typeof indexedDB=="object"}catch{return!1}}function FA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="FirebaseError";class Kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jA,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_a.prototype.create)}}class _a{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?BA(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kn(i,a,r)}}function BA(t,e){return t.replace(zA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zA=/\{\$([^}]+)}/g;function $A(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Og(s)&&Og(o)){if(!hu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Og(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function _o(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HA(t,e){const n=new WA(t,e);return n.subscribe.bind(n)}class WA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ih),i.error===void 0&&(i.error=ih),i.complete===void 0&&(i.complete=ih);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ih(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return t&&t._delegate?t._delegate:t}class Xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QA(e))try{this.getOrInitializeService({instanceIdentifier:di})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=di){return this.instances.has(e)}getOptions(e=di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=di){return this.component?this.component.multipleInstances?e:di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GA(t){return t===di?void 0:t}function QA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const YA={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},JA=he.INFO,ZA={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},e2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ZA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Of{constructor(e){this.name=e,this._logLevel=JA,this._logHandler=e2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const t2=(t,e)=>e.some(n=>t instanceof n);let Lg,Vg;function n2(){return Lg||(Lg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r2(){return Vg||(Vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const F0=new WeakMap,fd=new WeakMap,j0=new WeakMap,sh=new WeakMap,Lf=new WeakMap;function i2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n($r(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&F0.set(n,t)}).catch(()=>{}),Lf.set(e,t),e}function s2(t){if(fd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fd.set(t,e)}let pd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function o2(t){pd=t(pd)}function a2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(oh(this),e,...n);return j0.set(r,e.sort?e.sort():[e]),$r(r)}:r2().includes(t)?function(...e){return t.apply(oh(this),e),$r(F0.get(this))}:function(...e){return $r(t.apply(oh(this),e))}}function l2(t){return typeof t=="function"?a2(t):(t instanceof IDBTransaction&&s2(t),t2(t,n2())?new Proxy(t,pd):t)}function $r(t){if(t instanceof IDBRequest)return i2(t);if(sh.has(t))return sh.get(t);const e=l2(t);return e!==t&&(sh.set(t,e),Lf.set(e,t)),e}const oh=t=>Lf.get(t);function u2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=$r(o);return r&&o.addEventListener("upgradeneeded",u=>{r($r(o.result),u.oldVersion,u.newVersion,$r(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const c2=["get","getKey","getAll","getAllKeys","count"],h2=["put","add","delete","clear"],ah=new Map;function Mg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ah.get(e))return ah.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=h2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||c2.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return ah.set(e,s),s}o2(t=>({...t,get:(e,n,r)=>Mg(e,n)||t.get(e,n,r),has:(e,n)=>!!Mg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(f2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function f2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const md="@firebase/app",Ug="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new Of("@firebase/app"),p2="@firebase/app-compat",m2="@firebase/analytics-compat",g2="@firebase/analytics",y2="@firebase/app-check-compat",_2="@firebase/app-check",v2="@firebase/auth",w2="@firebase/auth-compat",E2="@firebase/database",T2="@firebase/data-connect",I2="@firebase/database-compat",S2="@firebase/functions",A2="@firebase/functions-compat",R2="@firebase/installations",C2="@firebase/installations-compat",P2="@firebase/messaging",k2="@firebase/messaging-compat",x2="@firebase/performance",N2="@firebase/performance-compat",b2="@firebase/remote-config",D2="@firebase/remote-config-compat",O2="@firebase/storage",L2="@firebase/storage-compat",V2="@firebase/firestore",M2="@firebase/vertexai-preview",U2="@firebase/firestore-compat",F2="firebase",j2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="[DEFAULT]",B2={[md]:"fire-core",[p2]:"fire-core-compat",[g2]:"fire-analytics",[m2]:"fire-analytics-compat",[_2]:"fire-app-check",[y2]:"fire-app-check-compat",[v2]:"fire-auth",[w2]:"fire-auth-compat",[E2]:"fire-rtdb",[T2]:"fire-data-connect",[I2]:"fire-rtdb-compat",[S2]:"fire-fn",[A2]:"fire-fn-compat",[R2]:"fire-iid",[C2]:"fire-iid-compat",[P2]:"fire-fcm",[k2]:"fire-fcm-compat",[x2]:"fire-perf",[N2]:"fire-perf-compat",[b2]:"fire-rc",[D2]:"fire-rc-compat",[O2]:"fire-gcs",[L2]:"fire-gcs-compat",[V2]:"fire-fst",[U2]:"fire-fst-compat",[M2]:"fire-vertex","fire-js":"fire-js",[F2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new Map,z2=new Map,yd=new Map;function Fg(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ci(t){const e=t.name;if(yd.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;yd.set(e,t);for(const n of du.values())Fg(n,t);for(const n of z2.values())Fg(n,t);return!0}function Ju(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function er(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new _a("app","Firebase",$2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=j2;function B0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hr.create("bad-app-name",{appName:String(i)});if(n||(n=V0()),!n)throw Hr.create("no-options");const s=du.get(i);if(s){if(hu(n,s.options)&&hu(r,s.config))return s;throw Hr.create("duplicate-app",{appName:i})}const o=new XA(i);for(const u of yd.values())o.addComponent(u);const a=new H2(n,r,o);return du.set(i,a),a}function Vf(t=gd){const e=du.get(t);if(!e&&t===gd&&V0())return B0();if(!e)throw Hr.create("no-app",{appName:t});return e}function Un(t,e,n){var r;let i=(r=B2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(a.join(" "));return}Ci(new Xr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="firebase-heartbeat-database",q2=1,na="firebase-heartbeat-store";let lh=null;function z0(){return lh||(lh=u2(W2,q2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(na)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hr.create("idb-open",{originalErrorMessage:t.message})})),lh}async function K2(t){try{const n=(await z0()).transaction(na),r=await n.objectStore(na).get($0(t));return await n.done,r}catch(e){if(e instanceof Kn)ur.warn(e.message);else{const n=Hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function jg(t,e){try{const r=(await z0()).transaction(na,"readwrite");await r.objectStore(na).put(e,$0(t)),await r.done}catch(n){if(n instanceof Kn)ur.warn(n.message);else{const r=Hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function $0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=1024,Q2=30*24*60*60*1e3;class X2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new J2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Q2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bg(),{heartbeatsToSend:r,unsentEntries:i}=Y2(this._heartbeatsCache.heartbeats),s=cu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ur.warn(n),""}}}function Bg(){return new Date().toISOString().substring(0,10)}function Y2(t,e=G2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class J2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UA()?FA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await K2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zg(t){return cu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t){Ci(new Xr("platform-logger",e=>new d2(e),"PRIVATE")),Ci(new Xr("heartbeat",e=>new X2(e),"PRIVATE")),Un(md,Ug,t),Un(md,Ug,"esm2017"),Un("fire-js","")}Z2("");var $g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,H0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,m){function g(){}g.prototype=m.prototype,S.D=m.prototype,S.prototype=new g,S.prototype.constructor=S,S.C=function(w,I,R){for(var T=Array(arguments.length-2),L=2;L<arguments.length;L++)T[L-2]=arguments[L];return m.prototype[I].apply(w,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,m,g){g||(g=0);var w=Array(16);if(typeof m=="string")for(var I=0;16>I;++I)w[I]=m.charCodeAt(g++)|m.charCodeAt(g++)<<8|m.charCodeAt(g++)<<16|m.charCodeAt(g++)<<24;else for(I=0;16>I;++I)w[I]=m[g++]|m[g++]<<8|m[g++]<<16|m[g++]<<24;m=S.g[0],g=S.g[1],I=S.g[2];var R=S.g[3],T=m+(R^g&(I^R))+w[0]+3614090360&4294967295;m=g+(T<<7&4294967295|T>>>25),T=R+(I^m&(g^I))+w[1]+3905402710&4294967295,R=m+(T<<12&4294967295|T>>>20),T=I+(g^R&(m^g))+w[2]+606105819&4294967295,I=R+(T<<17&4294967295|T>>>15),T=g+(m^I&(R^m))+w[3]+3250441966&4294967295,g=I+(T<<22&4294967295|T>>>10),T=m+(R^g&(I^R))+w[4]+4118548399&4294967295,m=g+(T<<7&4294967295|T>>>25),T=R+(I^m&(g^I))+w[5]+1200080426&4294967295,R=m+(T<<12&4294967295|T>>>20),T=I+(g^R&(m^g))+w[6]+2821735955&4294967295,I=R+(T<<17&4294967295|T>>>15),T=g+(m^I&(R^m))+w[7]+4249261313&4294967295,g=I+(T<<22&4294967295|T>>>10),T=m+(R^g&(I^R))+w[8]+1770035416&4294967295,m=g+(T<<7&4294967295|T>>>25),T=R+(I^m&(g^I))+w[9]+2336552879&4294967295,R=m+(T<<12&4294967295|T>>>20),T=I+(g^R&(m^g))+w[10]+4294925233&4294967295,I=R+(T<<17&4294967295|T>>>15),T=g+(m^I&(R^m))+w[11]+2304563134&4294967295,g=I+(T<<22&4294967295|T>>>10),T=m+(R^g&(I^R))+w[12]+1804603682&4294967295,m=g+(T<<7&4294967295|T>>>25),T=R+(I^m&(g^I))+w[13]+4254626195&4294967295,R=m+(T<<12&4294967295|T>>>20),T=I+(g^R&(m^g))+w[14]+2792965006&4294967295,I=R+(T<<17&4294967295|T>>>15),T=g+(m^I&(R^m))+w[15]+1236535329&4294967295,g=I+(T<<22&4294967295|T>>>10),T=m+(I^R&(g^I))+w[1]+4129170786&4294967295,m=g+(T<<5&4294967295|T>>>27),T=R+(g^I&(m^g))+w[6]+3225465664&4294967295,R=m+(T<<9&4294967295|T>>>23),T=I+(m^g&(R^m))+w[11]+643717713&4294967295,I=R+(T<<14&4294967295|T>>>18),T=g+(R^m&(I^R))+w[0]+3921069994&4294967295,g=I+(T<<20&4294967295|T>>>12),T=m+(I^R&(g^I))+w[5]+3593408605&4294967295,m=g+(T<<5&4294967295|T>>>27),T=R+(g^I&(m^g))+w[10]+38016083&4294967295,R=m+(T<<9&4294967295|T>>>23),T=I+(m^g&(R^m))+w[15]+3634488961&4294967295,I=R+(T<<14&4294967295|T>>>18),T=g+(R^m&(I^R))+w[4]+3889429448&4294967295,g=I+(T<<20&4294967295|T>>>12),T=m+(I^R&(g^I))+w[9]+568446438&4294967295,m=g+(T<<5&4294967295|T>>>27),T=R+(g^I&(m^g))+w[14]+3275163606&4294967295,R=m+(T<<9&4294967295|T>>>23),T=I+(m^g&(R^m))+w[3]+4107603335&4294967295,I=R+(T<<14&4294967295|T>>>18),T=g+(R^m&(I^R))+w[8]+1163531501&4294967295,g=I+(T<<20&4294967295|T>>>12),T=m+(I^R&(g^I))+w[13]+2850285829&4294967295,m=g+(T<<5&4294967295|T>>>27),T=R+(g^I&(m^g))+w[2]+4243563512&4294967295,R=m+(T<<9&4294967295|T>>>23),T=I+(m^g&(R^m))+w[7]+1735328473&4294967295,I=R+(T<<14&4294967295|T>>>18),T=g+(R^m&(I^R))+w[12]+2368359562&4294967295,g=I+(T<<20&4294967295|T>>>12),T=m+(g^I^R)+w[5]+4294588738&4294967295,m=g+(T<<4&4294967295|T>>>28),T=R+(m^g^I)+w[8]+2272392833&4294967295,R=m+(T<<11&4294967295|T>>>21),T=I+(R^m^g)+w[11]+1839030562&4294967295,I=R+(T<<16&4294967295|T>>>16),T=g+(I^R^m)+w[14]+4259657740&4294967295,g=I+(T<<23&4294967295|T>>>9),T=m+(g^I^R)+w[1]+2763975236&4294967295,m=g+(T<<4&4294967295|T>>>28),T=R+(m^g^I)+w[4]+1272893353&4294967295,R=m+(T<<11&4294967295|T>>>21),T=I+(R^m^g)+w[7]+4139469664&4294967295,I=R+(T<<16&4294967295|T>>>16),T=g+(I^R^m)+w[10]+3200236656&4294967295,g=I+(T<<23&4294967295|T>>>9),T=m+(g^I^R)+w[13]+681279174&4294967295,m=g+(T<<4&4294967295|T>>>28),T=R+(m^g^I)+w[0]+3936430074&4294967295,R=m+(T<<11&4294967295|T>>>21),T=I+(R^m^g)+w[3]+3572445317&4294967295,I=R+(T<<16&4294967295|T>>>16),T=g+(I^R^m)+w[6]+76029189&4294967295,g=I+(T<<23&4294967295|T>>>9),T=m+(g^I^R)+w[9]+3654602809&4294967295,m=g+(T<<4&4294967295|T>>>28),T=R+(m^g^I)+w[12]+3873151461&4294967295,R=m+(T<<11&4294967295|T>>>21),T=I+(R^m^g)+w[15]+530742520&4294967295,I=R+(T<<16&4294967295|T>>>16),T=g+(I^R^m)+w[2]+3299628645&4294967295,g=I+(T<<23&4294967295|T>>>9),T=m+(I^(g|~R))+w[0]+4096336452&4294967295,m=g+(T<<6&4294967295|T>>>26),T=R+(g^(m|~I))+w[7]+1126891415&4294967295,R=m+(T<<10&4294967295|T>>>22),T=I+(m^(R|~g))+w[14]+2878612391&4294967295,I=R+(T<<15&4294967295|T>>>17),T=g+(R^(I|~m))+w[5]+4237533241&4294967295,g=I+(T<<21&4294967295|T>>>11),T=m+(I^(g|~R))+w[12]+1700485571&4294967295,m=g+(T<<6&4294967295|T>>>26),T=R+(g^(m|~I))+w[3]+2399980690&4294967295,R=m+(T<<10&4294967295|T>>>22),T=I+(m^(R|~g))+w[10]+4293915773&4294967295,I=R+(T<<15&4294967295|T>>>17),T=g+(R^(I|~m))+w[1]+2240044497&4294967295,g=I+(T<<21&4294967295|T>>>11),T=m+(I^(g|~R))+w[8]+1873313359&4294967295,m=g+(T<<6&4294967295|T>>>26),T=R+(g^(m|~I))+w[15]+4264355552&4294967295,R=m+(T<<10&4294967295|T>>>22),T=I+(m^(R|~g))+w[6]+2734768916&4294967295,I=R+(T<<15&4294967295|T>>>17),T=g+(R^(I|~m))+w[13]+1309151649&4294967295,g=I+(T<<21&4294967295|T>>>11),T=m+(I^(g|~R))+w[4]+4149444226&4294967295,m=g+(T<<6&4294967295|T>>>26),T=R+(g^(m|~I))+w[11]+3174756917&4294967295,R=m+(T<<10&4294967295|T>>>22),T=I+(m^(R|~g))+w[2]+718787259&4294967295,I=R+(T<<15&4294967295|T>>>17),T=g+(R^(I|~m))+w[9]+3951481745&4294967295,S.g[0]=S.g[0]+m&4294967295,S.g[1]=S.g[1]+(I+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+R&4294967295}r.prototype.u=function(S,m){m===void 0&&(m=S.length);for(var g=m-this.blockSize,w=this.B,I=this.h,R=0;R<m;){if(I==0)for(;R<=g;)i(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<m;)if(w[I++]=S.charCodeAt(R++),I==this.blockSize){i(this,w),I=0;break}}else for(;R<m;)if(w[I++]=S[R++],I==this.blockSize){i(this,w),I=0;break}}this.h=I,this.o+=m},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var m=1;m<S.length-8;++m)S[m]=0;var g=8*this.o;for(m=S.length-8;m<S.length;++m)S[m]=g&255,g/=256;for(this.u(S),S=Array(16),m=g=0;4>m;++m)for(var w=0;32>w;w+=8)S[g++]=this.g[m]>>>w&255;return S};function s(S,m){var g=a;return Object.prototype.hasOwnProperty.call(g,S)?g[S]:g[S]=m(S)}function o(S,m){this.h=m;for(var g=[],w=!0,I=S.length-1;0<=I;I--){var R=S[I]|0;w&&R==m||(g[I]=R,w=!1)}this.g=g}var a={};function u(S){return-128<=S&&128>S?s(S,function(m){return new o([m|0],0>m?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return x(c(-S));for(var m=[],g=1,w=0;S>=g;w++)m[w]=S/g|0,g*=4294967296;return new o(m,0)}function h(S,m){if(S.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(S.charAt(0)=="-")return x(h(S.substring(1),m));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=c(Math.pow(m,8)),w=d,I=0;I<S.length;I+=8){var R=Math.min(8,S.length-I),T=parseInt(S.substring(I,I+R),m);8>R?(R=c(Math.pow(m,R)),w=w.j(R).add(c(T))):(w=w.j(g),w=w.add(c(T)))}return w}var d=u(0),f=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-x(this).m();for(var S=0,m=1,g=0;g<this.g.length;g++){var w=this.i(g);S+=(0<=w?w:4294967296+w)*m,m*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(k(this))return"-"+x(this).toString(S);for(var m=c(Math.pow(S,6)),g=this,w="";;){var I=D(g,m).g;g=v(g,I.j(m));var R=((0<g.g.length?g.g[0]:g.h)>>>0).toString(S);if(g=I,E(g))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(var m=0;m<S.g.length;m++)if(S.g[m]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=v(this,S),k(S)?-1:E(S)?0:1};function x(S){for(var m=S.g.length,g=[],w=0;w<m;w++)g[w]=~S.g[w];return new o(g,~S.h).add(f)}t.abs=function(){return k(this)?x(this):this},t.add=function(S){for(var m=Math.max(this.g.length,S.g.length),g=[],w=0,I=0;I<=m;I++){var R=w+(this.i(I)&65535)+(S.i(I)&65535),T=(R>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);w=T>>>16,R&=65535,T&=65535,g[I]=T<<16|R}return new o(g,g[g.length-1]&-2147483648?-1:0)};function v(S,m){return S.add(x(m))}t.j=function(S){if(E(this)||E(S))return d;if(k(this))return k(S)?x(this).j(x(S)):x(x(this).j(S));if(k(S))return x(this.j(x(S)));if(0>this.l(y)&&0>S.l(y))return c(this.m()*S.m());for(var m=this.g.length+S.g.length,g=[],w=0;w<2*m;w++)g[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<S.g.length;I++){var R=this.i(w)>>>16,T=this.i(w)&65535,L=S.i(I)>>>16,B=S.i(I)&65535;g[2*w+2*I]+=T*B,A(g,2*w+2*I),g[2*w+2*I+1]+=R*B,A(g,2*w+2*I+1),g[2*w+2*I+1]+=T*L,A(g,2*w+2*I+1),g[2*w+2*I+2]+=R*L,A(g,2*w+2*I+2)}for(w=0;w<m;w++)g[w]=g[2*w+1]<<16|g[2*w];for(w=m;w<2*m;w++)g[w]=0;return new o(g,0)};function A(S,m){for(;(S[m]&65535)!=S[m];)S[m+1]+=S[m]>>>16,S[m]&=65535,m++}function C(S,m){this.g=S,this.h=m}function D(S,m){if(E(m))throw Error("division by zero");if(E(S))return new C(d,d);if(k(S))return m=D(x(S),m),new C(x(m.g),x(m.h));if(k(m))return m=D(S,x(m)),new C(x(m.g),m.h);if(30<S.g.length){if(k(S)||k(m))throw Error("slowDivide_ only works with positive integers.");for(var g=f,w=m;0>=w.l(S);)g=V(g),w=V(w);var I=b(g,1),R=b(w,1);for(w=b(w,2),g=b(g,2);!E(w);){var T=R.add(w);0>=T.l(S)&&(I=I.add(g),R=T),w=b(w,1),g=b(g,1)}return m=v(S,I.j(m)),new C(I,m)}for(I=d;0<=S.l(m);){for(g=Math.max(1,Math.floor(S.m()/m.m())),w=Math.ceil(Math.log(g)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=c(g),T=R.j(m);k(T)||0<T.l(S);)g-=w,R=c(g),T=R.j(m);E(R)&&(R=f),I=I.add(R),S=v(S,T)}return new C(I,S)}t.A=function(S){return D(this,S).h},t.and=function(S){for(var m=Math.max(this.g.length,S.g.length),g=[],w=0;w<m;w++)g[w]=this.i(w)&S.i(w);return new o(g,this.h&S.h)},t.or=function(S){for(var m=Math.max(this.g.length,S.g.length),g=[],w=0;w<m;w++)g[w]=this.i(w)|S.i(w);return new o(g,this.h|S.h)},t.xor=function(S){for(var m=Math.max(this.g.length,S.g.length),g=[],w=0;w<m;w++)g[w]=this.i(w)^S.i(w);return new o(g,this.h^S.h)};function V(S){for(var m=S.g.length+1,g=[],w=0;w<m;w++)g[w]=S.i(w)<<1|S.i(w-1)>>>31;return new o(g,S.h)}function b(S,m){var g=m>>5;m%=32;for(var w=S.g.length-g,I=[],R=0;R<w;R++)I[R]=0<m?S.i(R+g)>>>m|S.i(R+g+1)<<32-m:S.i(R+g);return new o(I,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,H0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,wi=o}).apply(typeof $g<"u"?$g:typeof self<"u"?self:typeof window<"u"?window:{});var ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W0,vo,q0,Cl,_d,K0,G0,Q0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,_){return l==Array.prototype||l==Object.prototype||(l[p]=_.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ol=="object"&&ol];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(l,p){if(p)e:{var _=r;l=l.split(".");for(var P=0;P<l.length-1;P++){var F=l[P];if(!(F in _))break e;_=_[F]}l=l[l.length-1],P=_[l],p=p(P),p!=P&&p!=null&&e(_,l,{configurable:!0,writable:!0,value:p})}}function s(l,p){l instanceof String&&(l+="");var _=0,P=!1,F={next:function(){if(!P&&_<l.length){var z=_++;return{value:p(z,l[z]),done:!1}}return P=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return s(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function c(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function h(l,p,_){return l.call.apply(l.bind,arguments)}function d(l,p,_){if(!l)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,P),l.apply(p,F)}}return function(){return l.apply(p,arguments)}}function f(l,p,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function y(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var P=_.slice();return P.push.apply(P,arguments),l.apply(this,P)}}function E(l,p){function _(){}_.prototype=p.prototype,l.aa=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(P,F,z){for(var Z=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)Z[Se-2]=arguments[Se];return p.prototype[F].apply(P,Z)}}function k(l){const p=l.length;if(0<p){const _=Array(p);for(let P=0;P<p;P++)_[P]=l[P];return _}return[]}function x(l,p){for(let _=1;_<arguments.length;_++){const P=arguments[_];if(u(P)){const F=l.length||0,z=P.length||0;l.length=F+z;for(let Z=0;Z<z;Z++)l[F+Z]=P[Z]}else l.push(P)}}class v{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function A(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var V=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function b(l,p,_){for(const P in l)p.call(_,l[P],P,l)}function S(l,p){for(const _ in l)p.call(void 0,l[_],_,l)}function m(l){const p={};for(const _ in l)p[_]=l[_];return p}const g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,p){let _,P;for(let F=1;F<arguments.length;F++){P=arguments[F];for(_ in P)l[_]=P[_];for(let z=0;z<g.length;z++)_=g[z],Object.prototype.hasOwnProperty.call(P,_)&&(l[_]=P[_])}}function I(l){var p=1;l=l.split(":");const _=[];for(;0<p&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function R(l){a.setTimeout(()=>{throw l},0)}function T(){var l=M;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class L{constructor(){this.h=this.g=null}add(p,_){const P=B.get();P.set(p,_),this.h?this.h.next=P:this.g=P,this.h=P}}var B=new v(()=>new O,l=>l.reset());class O{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let N,U=!1,M=new L,j=()=>{const l=a.Promise.resolve(void 0);N=()=>{l.then(J)}};var J=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(_){R(_)}var p=B;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}U=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return l}();function $(l,p){if(Y.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,P=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(V){e:{try{D(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement);this.relatedTarget=p,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ne[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&$.aa.h.call(this)}}E($,Y);var ne={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),ve=0;function me(l,p,_,P,F){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!P,this.ha=F,this.key=++ve,this.da=this.fa=!1}function _e(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ae(l){this.src=l,this.g={},this.h=0}Ae.prototype.add=function(l,p,_,P,F){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var Z=mn(l,p,P,F);return-1<Z?(p=l[Z],_||(p.fa=!1)):(p=new me(p,this.src,z,!!P,F),p.fa=_,l.push(p)),p};function Ve(l,p){var _=p.type;if(_ in l.g){var P=l.g[_],F=Array.prototype.indexOf.call(P,p,void 0),z;(z=0<=F)&&Array.prototype.splice.call(P,F,1),z&&(_e(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function mn(l,p,_,P){for(var F=0;F<l.length;++F){var z=l[F];if(!z.da&&z.listener==p&&z.capture==!!_&&z.ha==P)return F}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),Re={};function et(l,p,_,P,F){if(Array.isArray(p)){for(var z=0;z<p.length;z++)et(l,p[z],_,P,F);return null}return _=wt(_),l&&l[de]?l.K(p,_,c(P)?!!P.capture:!!P,F):Ce(l,p,_,!1,P,F)}function Ce(l,p,_,P,F,z){if(!p)throw Error("Invalid event type");var Z=c(F)?!!F.capture:!!F,Se=De(l);if(Se||(l[Ft]=Se=new Ae(l)),_=Se.add(p,_,P,Z,z),_.proxy)return _;if(P=Ie(),_.proxy=P,P.src=l,P.listener=_,l.addEventListener)K||(F=Z),F===void 0&&(F=!1),l.addEventListener(p.toString(),P,F);else if(l.attachEvent)l.attachEvent(Me(p.toString()),P);else if(l.addListener&&l.removeListener)l.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ie(){function l(_){return p.call(l.src,l.listener,_)}const p=bt;return l}function Qe(l,p,_,P,F){if(Array.isArray(p))for(var z=0;z<p.length;z++)Qe(l,p[z],_,P,F);else P=c(P)?!!P.capture:!!P,_=wt(_),l&&l[de]?(l=l.i,p=String(p).toString(),p in l.g&&(z=l.g[p],_=mn(z,_,P,F),-1<_&&(_e(z[_]),Array.prototype.splice.call(z,_,1),z.length==0&&(delete l.g[p],l.h--)))):l&&(l=De(l))&&(p=l.g[p.toString()],l=-1,p&&(l=mn(p,_,P,F)),(_=-1<l?p[l]:null)&&tt(_))}function tt(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[de])Ve(p.i,l);else{var _=l.type,P=l.proxy;p.removeEventListener?p.removeEventListener(_,P,l.capture):p.detachEvent?p.detachEvent(Me(_),P):p.addListener&&p.removeListener&&p.removeListener(P),(_=De(p))?(Ve(_,l),_.h==0&&(_.src=null,p[Ft]=null)):_e(l)}}}function Me(l){return l in Re?Re[l]:Re[l]="on"+l}function bt(l,p){if(l.da)l=!0;else{p=new $(p,this);var _=l.listener,P=l.ha||l.src;l.fa&&tt(l),l=_.call(P,p)}return l}function De(l){return l=l[Ft],l instanceof Ae?l:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(l){return typeof l=="function"?l:(l[we]||(l[we]=function(p){return l.handleEvent(p)}),l[we])}function ke(){H.call(this),this.i=new Ae(this),this.M=this,this.F=null}E(ke,H),ke.prototype[de]=!0,ke.prototype.removeEventListener=function(l,p,_,P){Qe(this,l,p,_,P)};function Xe(l,p){var _,P=l.F;if(P)for(_=[];P;P=P.F)_.push(P);if(l=l.M,P=p.type||p,typeof p=="string")p=new Y(p,l);else if(p instanceof Y)p.target=p.target||l;else{var F=p;p=new Y(P,l),w(p,F)}if(F=!0,_)for(var z=_.length-1;0<=z;z--){var Z=p.g=_[z];F=qe(Z,P,!0,p)&&F}if(Z=p.g=l,F=qe(Z,P,!0,p)&&F,F=qe(Z,P,!1,p)&&F,_)for(z=0;z<_.length;z++)Z=p.g=_[z],F=qe(Z,P,!1,p)&&F}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var _=l.g[p],P=0;P<_.length;P++)_e(_[P]);delete l.g[p],l.h--}}this.F=null},ke.prototype.K=function(l,p,_,P){return this.i.add(String(l),p,!1,_,P)},ke.prototype.L=function(l,p,_,P){return this.i.add(String(l),p,!0,_,P)};function qe(l,p,_,P){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,z=0;z<p.length;++z){var Z=p[z];if(Z&&!Z.da&&Z.capture==_){var Se=Z.listener,ht=Z.ha||Z.src;Z.fa&&Ve(l.i,Z),F=Se.call(ht,P)!==!1&&F}}return F&&!P.defaultPrevented}function kn(l,p,_){if(typeof l=="function")_&&(l=f(l,_));else if(l&&typeof l.handleEvent=="function")l=f(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function ot(l){l.g=kn(()=>{l.g=null,l.i&&(l.i=!1,ot(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Kt extends H{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function at(l){H.call(this),this.h=l,this.g={}}E(at,H);var sn=[];function Gt(l){b(l.g,function(p,_){this.g.hasOwnProperty(_)&&tt(p)},l),l.g={}}at.prototype.N=function(){at.aa.N.call(this),Gt(this)},at.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=a.JSON.stringify,Hs=a.JSON.parse,_c=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function ii(){}ii.prototype.h=null;function Ws(l){return l.h||(l.h=l.i())}function pr(){}var si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function on(){Y.call(this,"d")}E(on,Y);function an(){Y.call(this,"c")}E(an,Y);var jt={},mr=null;function oi(){return mr=mr||new ke}jt.La="serverreachability";function xn(l){Y.call(this,jt.La,l)}E(xn,Y);function Qt(l){const p=oi();Xe(p,new xn(p))}jt.STAT_EVENT="statevent";function kp(l,p){Y.call(this,jt.STAT_EVENT,l),this.stat=p}E(kp,Y);function Dt(l){const p=oi();Xe(p,new kp(p,l))}jt.Ma="timingevent";function xp(l,p){Y.call(this,jt.Ma,l),this.size=p}E(xp,Y);function qs(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function Ks(){this.g=!0}Ks.prototype.xa=function(){this.g=!1};function _E(l,p,_,P,F,z){l.info(function(){if(l.g)if(z)for(var Z="",Se=z.split("&"),ht=0;ht<Se.length;ht++){var ge=Se[ht].split("=");if(1<ge.length){var Et=ge[0];ge=ge[1];var Tt=Et.split("_");Z=2<=Tt.length&&Tt[1]=="type"?Z+(Et+"="+ge+"&"):Z+(Et+"=redacted&")}}else Z=null;else Z=z;return"XMLHTTP REQ ("+P+") [attempt "+F+"]: "+p+`
`+_+`
`+Z})}function vE(l,p,_,P,F,z,Z){l.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+F+"]: "+p+`
`+_+`
`+z+" "+Z})}function Bi(l,p,_,P){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+EE(l,_)+(P?" "+P:"")})}function wE(l,p){l.info(function(){return"TIMEOUT: "+p})}Ks.prototype.info=function(){};function EE(l,p){if(!l.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var P=_[l];if(!(2>P.length)){var F=P[1];if(Array.isArray(F)&&!(1>F.length)){var z=F[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Z=1;Z<F.length;Z++)F[Z]=""}}}}return gn(_)}catch{return p}}var ka={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Np={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vc;function xa(){}E(xa,ii),xa.prototype.g=function(){return new XMLHttpRequest},xa.prototype.i=function(){return{}},vc=new xa;function gr(l,p,_,P){this.j=l,this.i=p,this.l=_,this.R=P||1,this.U=new at(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bp}function bp(){this.i=null,this.g="",this.h=!1}var Dp={},wc={};function Ec(l,p,_){l.L=1,l.v=Oa(Gn(p)),l.m=_,l.P=!0,Op(l,null)}function Op(l,p){l.F=Date.now(),Na(l),l.A=Gn(l.v);var _=l.A,P=l.R;Array.isArray(P)||(P=[String(P)]),Gp(_.i,"t",P),l.C=0,_=l.j.J,l.h=new bp,l.g=dm(l.j,_?p:null,!l.m),0<l.O&&(l.M=new Kt(f(l.Y,l,l.g),l.O)),p=l.U,_=l.g,P=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(sn[0]=F.toString()),F=sn);for(var z=0;z<F.length;z++){var Z=et(_,F[z],P||p.handleEvent,!1,p.h||p);if(!Z)break;p.g[Z.key]=Z}p=l.H?m(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),Qt(),_E(l.i,l.u,l.A,l.l,l.R,l.m)}gr.prototype.ca=function(l){l=l.target;const p=this.M;p&&Qn(l)==3?p.j():this.Y(l)},gr.prototype.Y=function(l){try{if(l==this.g)e:{const Tt=Qn(this.g);var p=this.g.Ba();const Hi=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||tm(this.g)))){this.J||Tt!=4||p==7||(p==8||0>=Hi?Qt(3):Qt(2)),Tc(this);var _=this.g.Z();this.X=_;t:if(Lp(this)){var P=tm(this.g);l="";var F=P.length,z=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),Gs(this);var Z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,l+=this.h.i.decode(P[p],{stream:!(z&&p==F-1)});P.length=0,this.h.g+=l,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=_==200,vE(this.i,this.u,this.A,this.l,this.R,Tt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ht=this.g;if((Se=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Se)){var ge=Se;break t}}ge=null}if(_=ge)Bi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ic(this,_);else{this.o=!1,this.s=3,Dt(12),ai(this),Gs(this);break e}}if(this.P){_=!0;let yn;for(;!this.J&&this.C<Z.length;)if(yn=TE(this,Z),yn==wc){Tt==4&&(this.s=4,Dt(14),_=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Dp){this.s=4,Dt(15),Bi(this.i,this.l,Z,"[Invalid Chunk]"),_=!1;break}else Bi(this.i,this.l,yn,null),Ic(this,yn);if(Lp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||Z.length!=0||this.h.h||(this.s=1,Dt(16),_=!1),this.o=this.o&&_,!_)Bi(this.i,this.l,Z,"[Invalid Chunked Response]"),ai(this),Gs(this);else if(0<Z.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),kc(Et),Et.M=!0,Dt(11))}}else Bi(this.i,this.l,Z,null),Ic(this,Z);Tt==4&&ai(this),this.o&&!this.J&&(Tt==4?lm(this.j,this):(this.o=!1,Na(this)))}else FE(this.g),_==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),ai(this),Gs(this)}}}catch{}finally{}};function Lp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function TE(l,p){var _=l.C,P=p.indexOf(`
`,_);return P==-1?wc:(_=Number(p.substring(_,P)),isNaN(_)?Dp:(P+=1,P+_>p.length?wc:(p=p.slice(P,P+_),l.C=P+_,p)))}gr.prototype.cancel=function(){this.J=!0,ai(this)};function Na(l){l.S=Date.now()+l.I,Vp(l,l.I)}function Vp(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=qs(f(l.ba,l),p)}function Tc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}gr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(wE(this.i,this.A),this.L!=2&&(Qt(),Dt(17)),ai(this),this.s=2,Gs(this)):Vp(this,this.S-l)};function Gs(l){l.j.G==0||l.J||lm(l.j,l)}function ai(l){Tc(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Gt(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Ic(l,p){try{var _=l.j;if(_.G!=0&&(_.g==l||Sc(_.h,l))){if(!l.K&&Sc(_.h,l)&&_.G==3){try{var P=_.Da.g.parse(p)}catch{P=null}if(Array.isArray(P)&&P.length==3){var F=P;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)ja(_),Ua(_);else break e;Pc(_),Dt(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=qs(f(_.Za,_),6e3));if(1>=Fp(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ui(_,11)}else if((l.K||_.g==l)&&ja(_),!A(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let ge=F[p];if(_.T=ge[0],ge=ge[1],_.G==2)if(ge[0]=="c"){_.K=ge[1],_.ia=ge[2];const Et=ge[3];Et!=null&&(_.la=Et,_.j.info("VER="+_.la));const Tt=ge[4];Tt!=null&&(_.Aa=Tt,_.j.info("SVER="+_.Aa));const Hi=ge[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(P=1.5*Hi,_.L=P,_.j.info("backChannelRequestTimeoutMs_="+P)),P=_;const yn=l.g;if(yn){const za=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var z=P.h;z.g||za.indexOf("spdy")==-1&&za.indexOf("quic")==-1&&za.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Ac(z,z.h),z.h=null))}if(P.D){const xc=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;xc&&(P.ya=xc,xe(P.I,P.D,xc))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),P=_;var Z=l;if(P.qa=hm(P,P.J?P.ia:null,P.W),Z.K){jp(P.h,Z);var Se=Z,ht=P.L;ht&&(Se.I=ht),Se.B&&(Tc(Se),Na(Se)),P.g=Z}else om(P);0<_.i.length&&Fa(_)}else ge[0]!="stop"&&ge[0]!="close"||ui(_,7);else _.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ui(_,7):Cc(_):ge[0]!="noop"&&_.l&&_.l.ta(ge),_.v=0)}}Qt(4)}catch{}}var IE=class{constructor(l,p){this.g=l,this.map=p}};function Mp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Up(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Fp(l){return l.h?1:l.g?l.g.size:0}function Sc(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Ac(l,p){l.g?l.g.add(p):l.h=p}function jp(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Mp.prototype.cancel=function(){if(this.i=Bp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Bp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const _ of l.g.values())p=p.concat(_.D);return p}return k(l.i)}function SE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var p=[],_=l.length,P=0;P<_;P++)p.push(l[P]);return p}p=[],_=0;for(P in l)p[_++]=l[P];return p}function AE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var p=[];l=l.length;for(var _=0;_<l;_++)p.push(_);return p}p=[],_=0;for(const P in l)p[_++]=P;return p}}}function zp(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var _=AE(l),P=SE(l),F=P.length,z=0;z<F;z++)p.call(void 0,P[z],_&&_[z],l)}var $p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RE(l,p){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var P=l[_].indexOf("="),F=null;if(0<=P){var z=l[_].substring(0,P);F=l[_].substring(P+1)}else z=l[_];p(z,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function li(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof li){this.h=l.h,ba(this,l.j),this.o=l.o,this.g=l.g,Da(this,l.s),this.l=l.l;var p=l.i,_=new Ys;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Hp(this,_),this.m=l.m}else l&&(p=String(l).match($p))?(this.h=!1,ba(this,p[1]||"",!0),this.o=Qs(p[2]||""),this.g=Qs(p[3]||"",!0),Da(this,p[4]),this.l=Qs(p[5]||"",!0),Hp(this,p[6]||"",!0),this.m=Qs(p[7]||"")):(this.h=!1,this.i=new Ys(null,this.h))}li.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Xs(p,Wp,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Xs(p,Wp,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Xs(_,_.charAt(0)=="/"?kE:PE,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Xs(_,NE)),l.join("")};function Gn(l){return new li(l)}function ba(l,p,_){l.j=_?Qs(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Da(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Hp(l,p,_){p instanceof Ys?(l.i=p,bE(l.i,l.h)):(_||(p=Xs(p,xE)),l.i=new Ys(p,l.h))}function xe(l,p,_){l.i.set(p,_)}function Oa(l){return xe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Qs(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Xs(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,CE),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function CE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Wp=/[#\/\?@]/g,PE=/[#\?:]/g,kE=/[#\?]/g,xE=/[#\?@]/g,NE=/#/g;function Ys(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function yr(l){l.g||(l.g=new Map,l.h=0,l.i&&RE(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=Ys.prototype,t.add=function(l,p){yr(this),this.i=null,l=zi(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function qp(l,p){yr(l),p=zi(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Kp(l,p){return yr(l),p=zi(l,p),l.g.has(p)}t.forEach=function(l,p){yr(this),this.g.forEach(function(_,P){_.forEach(function(F){l.call(p,F,P,this)},this)},this)},t.na=function(){yr(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let P=0;P<p.length;P++){const F=l[P];for(let z=0;z<F.length;z++)_.push(p[P])}return _},t.V=function(l){yr(this);let p=[];if(typeof l=="string")Kp(this,l)&&(p=p.concat(this.g.get(zi(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)p=p.concat(l[_])}return p},t.set=function(l,p){return yr(this),this.i=null,l=zi(this,l),Kp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Gp(l,p,_){qp(l,p),0<_.length&&(l.i=null,l.g.set(zi(l,p),k(_)),l.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var P=p[_];const z=encodeURIComponent(String(P)),Z=this.V(P);for(P=0;P<Z.length;P++){var F=z;Z[P]!==""&&(F+="="+encodeURIComponent(String(Z[P]))),l.push(F)}}return this.i=l.join("&")};function zi(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function bE(l,p){p&&!l.j&&(yr(l),l.i=null,l.g.forEach(function(_,P){var F=P.toLowerCase();P!=F&&(qp(this,P),Gp(this,F,_))},l)),l.j=p}function DE(l,p){const _=new Ks;if(a.Image){const P=new Image;P.onload=y(_r,_,"TestLoadImage: loaded",!0,p,P),P.onerror=y(_r,_,"TestLoadImage: error",!1,p,P),P.onabort=y(_r,_,"TestLoadImage: abort",!1,p,P),P.ontimeout=y(_r,_,"TestLoadImage: timeout",!1,p,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=l}else p(!1)}function OE(l,p){const _=new Ks,P=new AbortController,F=setTimeout(()=>{P.abort(),_r(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:P.signal}).then(z=>{clearTimeout(F),z.ok?_r(_,"TestPingServer: ok",!0,p):_r(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),_r(_,"TestPingServer: error",!1,p)})}function _r(l,p,_,P,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),P(_)}catch{}}function LE(){this.g=new _c}function VE(l,p,_){const P=_||"";try{zp(l,function(F,z){let Z=F;c(F)&&(Z=gn(F)),p.push(P+z+"="+encodeURIComponent(Z))})}catch(F){throw p.push(P+"type="+encodeURIComponent("_badmap")),F}}function La(l){this.l=l.Ub||null,this.j=l.eb||!1}E(La,ii),La.prototype.g=function(){return new Va(this.l,this.j)},La.prototype.i=function(l){return function(){return l}}({});function Va(l,p){ke.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Va,ke),t=Va.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Zs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Js(this):Zs(this),this.readyState==3&&Qp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Js(this))},t.Qa=function(l){this.g&&(this.response=l,Js(this))},t.ga=function(){this.g&&Js(this)};function Js(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Zs(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function Zs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Xp(l){let p="";return b(l,function(_,P){p+=P,p+=":",p+=_,p+=`\r
`}),p}function Rc(l,p,_){e:{for(P in _){var P=!1;break e}P=!0}P||(_=Xp(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):xe(l,p,_))}function ze(l){ke.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ze,ke);var ME=/^https?$/i,UE=["POST","PUT"];t=ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,_,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vc.g(),this.v=this.o?Ws(this.o):Ws(vc),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(z){Yp(this,z);return}if(l=_||"",_=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var F in P)_.set(F,P[F]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const z of P.keys())_.set(z,P.get(z));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(UE,p,void 0))||P||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Z]of _)this.g.setRequestHeader(z,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{em(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){Yp(this,z)}};function Yp(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,Jp(l),Ma(l)}function Jp(l){l.A||(l.A=!0,Xe(l,"complete"),Xe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Xe(this,"complete"),Xe(this,"abort"),Ma(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zp(this):this.bb())},t.bb=function(){Zp(this)};function Zp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Qn(l)!=4||l.Z()!=2)){if(l.u&&Qn(l)==4)kn(l.Ea,0,l);else if(Xe(l,"readystatechange"),Qn(l)==4){l.h=!1;try{const Z=l.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var P;if(P=Z===0){var F=String(l.D).match($p)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),P=!ME.test(F?F.toLowerCase():"")}_=P}if(_)Xe(l,"complete"),Xe(l,"success");else{l.m=6;try{var z=2<Qn(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Jp(l)}}finally{Ma(l)}}}}function Ma(l,p){if(l.g){em(l);const _=l.g,P=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Xe(l,"ready");try{_.onreadystatechange=P}catch{}}}function em(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Qn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Hs(p)}};function tm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function FE(l){const p={};l=(l.g&&2<=Qn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<l.length;P++){if(A(l[P]))continue;var _=I(l[P]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=p[F]||[];p[F]=z,z.push(_)}S(p,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function nm(l){this.Aa=0,this.i=[],this.j=new Ks,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eo("baseRetryDelayMs",5e3,l),this.cb=eo("retryDelaySeedMs",1e4,l),this.Wa=eo("forwardChannelMaxRetries",2,l),this.wa=eo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Mp(l&&l.concurrentRequestLimit),this.Da=new LE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nm.prototype,t.la=8,t.G=1,t.connect=function(l,p,_,P){Dt(0),this.W=l,this.H=p||{},_&&P!==void 0&&(this.H.OSID=_,this.H.OAID=P),this.F=this.X,this.I=hm(this,null,this.W),Fa(this)};function Cc(l){if(rm(l),l.G==3){var p=l.U++,_=Gn(l.I);if(xe(_,"SID",l.K),xe(_,"RID",p),xe(_,"TYPE","terminate"),to(l,_),p=new gr(l,l.j,p),p.L=2,p.v=Oa(Gn(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=p.v,_=!0),_||(p.g=dm(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Na(p)}cm(l)}function Ua(l){l.g&&(kc(l),l.g.cancel(),l.g=null)}function rm(l){Ua(l),l.u&&(a.clearTimeout(l.u),l.u=null),ja(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Fa(l){if(!Up(l.h)&&!l.s){l.s=!0;var p=l.Ga;N||j(),U||(N(),U=!0),M.add(p,l),l.B=0}}function jE(l,p){return Fp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=qs(f(l.Ga,l,p),um(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new gr(this,this.j,l);let z=this.o;if(this.S&&(z?(z=m(z),w(z,this.S)):z=this.S),this.m!==null||this.O||(F.H=z,z=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var P=this.i[_];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(p+=P,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=sm(this,F,p),_=Gn(this.I),xe(_,"RID",l),xe(_,"CVER",22),this.D&&xe(_,"X-HTTP-Session-Id",this.D),to(this,_),z&&(this.O?p="headers="+encodeURIComponent(String(Xp(z)))+"&"+p:this.m&&Rc(_,this.m,z)),Ac(this.h,F),this.Ua&&xe(_,"TYPE","init"),this.P?(xe(_,"$req",p),xe(_,"SID","null"),F.T=!0,Ec(F,_,null)):Ec(F,_,p),this.G=2}}else this.G==3&&(l?im(this,l):this.i.length==0||Up(this.h)||im(this))};function im(l,p){var _;p?_=p.l:_=l.U++;const P=Gn(l.I);xe(P,"SID",l.K),xe(P,"RID",_),xe(P,"AID",l.T),to(l,P),l.m&&l.o&&Rc(P,l.m,l.o),_=new gr(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),p&&(l.i=p.D.concat(l.i)),p=sm(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ac(l.h,_),Ec(_,P,p)}function to(l,p){l.H&&b(l.H,function(_,P){xe(p,P,_)}),l.l&&zp({},function(_,P){xe(p,P,_)})}function sm(l,p,_){_=Math.min(l.i.length,_);var P=l.l?f(l.l.Na,l.l,l):null;e:{var F=l.i;let z=-1;for(;;){const Z=["count="+_];z==-1?0<_?(z=F[0].g,Z.push("ofs="+z)):z=0:Z.push("ofs="+z);let Se=!0;for(let ht=0;ht<_;ht++){let ge=F[ht].g;const Et=F[ht].map;if(ge-=z,0>ge)z=Math.max(0,F[ht].g-100),Se=!1;else try{VE(Et,Z,"req"+ge+"_")}catch{P&&P(Et)}}if(Se){P=Z.join("&");break e}}}return l=l.i.splice(0,_),p.D=l,P}function om(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;N||j(),U||(N(),U=!0),M.add(p,l),l.v=0}}function Pc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=qs(f(l.Fa,l),um(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,am(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=qs(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Ua(this),am(this))};function kc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function am(l){l.g=new gr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=Gn(l.qa);xe(p,"RID","rpc"),xe(p,"SID",l.K),xe(p,"AID",l.T),xe(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&xe(p,"TO",l.ja),xe(p,"TYPE","xmlhttp"),to(l,p),l.m&&l.o&&Rc(p,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Oa(Gn(p)),_.m=null,_.P=!0,Op(_,l)}t.Za=function(){this.C!=null&&(this.C=null,Ua(this),Pc(this),Dt(19))};function ja(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function lm(l,p){var _=null;if(l.g==p){ja(l),kc(l),l.g=null;var P=2}else if(Sc(l.h,p))_=p.D,jp(l.h,p),P=1;else return;if(l.G!=0){if(p.o)if(P==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=l.B;P=oi(),Xe(P,new xp(P,_)),Fa(l)}else om(l);else if(F=p.s,F==3||F==0&&0<p.X||!(P==1&&jE(l,p)||P==2&&Pc(l)))switch(_&&0<_.length&&(p=l.h,p.i=p.i.concat(_)),F){case 1:ui(l,5);break;case 4:ui(l,10);break;case 3:ui(l,6);break;default:ui(l,2)}}}function um(l,p){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*p}function ui(l,p){if(l.j.info("Error code "+p),p==2){var _=f(l.fb,l),P=l.Xa;const F=!P;P=new li(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ba(P,"https"),Oa(P),F?DE(P.toString(),_):OE(P.toString(),_)}else Dt(2);l.G=0,l.l&&l.l.sa(p),cm(l),rm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function cm(l){if(l.G=0,l.ka=[],l.l){const p=Bp(l.h);(p.length!=0||l.i.length!=0)&&(x(l.ka,p),x(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function hm(l,p,_){var P=_ instanceof li?Gn(_):new li(_);if(P.g!="")p&&(P.g=p+"."+P.g),Da(P,P.s);else{var F=a.location;P=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var z=new li(null);P&&ba(z,P),p&&(z.g=p),F&&Da(z,F),_&&(z.l=_),P=z}return _=l.D,p=l.ya,_&&p&&xe(P,_,p),xe(P,"VER",l.la),to(l,P),P}function dm(l,p,_){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new ze(new La({eb:_})):new ze(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fm(){}t=fm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ba(){}Ba.prototype.g=function(l,p){return new Xt(l,p)};function Xt(l,p){ke.call(this),this.g=new nm(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!A(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new $i(this)}E(Xt,ke),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Cc(this.g)},Xt.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=gn(l),l=_);p.i.push(new IE(p.Ya++,l)),p.G==3&&Fa(p)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Cc(this.g),delete this.g,Xt.aa.N.call(this)};function pm(l){on.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const _ in p){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}E(pm,on);function mm(){an.call(this),this.status=1}E(mm,an);function $i(l){this.g=l}E($i,fm),$i.prototype.ua=function(){Xe(this.g,"a")},$i.prototype.ta=function(l){Xe(this.g,new pm(l))},$i.prototype.sa=function(l){Xe(this.g,new mm)},$i.prototype.ra=function(){Xe(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,Q0=function(){return new Ba},G0=function(){return oi()},K0=jt,_d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,Cl=ka,Np.COMPLETE="complete",q0=Np,pr.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",ke.prototype.listen=ke.prototype.K,vo=pr,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,W0=ze}).apply(typeof ol<"u"?ol:typeof self<"u"?self:typeof window<"u"?window:{});const Hg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Us="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Of("@firebase/firestore");function co(){return Pi.logLevel}function te(t,...e){if(Pi.logLevel<=he.DEBUG){const n=e.map(Mf);Pi.debug(`Firestore (${Us}): ${t}`,...n)}}function cr(t,...e){if(Pi.logLevel<=he.ERROR){const n=e.map(Mf);Pi.error(`Firestore (${Us}): ${t}`,...n)}}function Rs(t,...e){if(Pi.logLevel<=he.WARN){const n=e.map(Mf);Pi.warn(`Firestore (${Us}): ${t}`,...n)}}function Mf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function Te(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class tR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nR{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new X0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Ct(e)}}class rR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new sR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Cs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new st(0,0))}static max(){return new ae(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ra.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ra?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends ra{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const lR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends ra{construct(e,n,r){return new pt(e,n,r)}static isValidIdentifier(e){return lR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new re(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(n)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Le.fromString(e))}static fromName(e){return new ie(Le.fromString(e).popFirst(5))}static empty(){return new ie(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Le(e.slice()))}}function uR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Yr(i,ie.empty(),e)}function cR(t){return new Yr(t.readTime,t.key,-1)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(ae.min(),ie.empty(),-1)}static max(){return new Yr(ae.max(),ie.empty(),-1)}}function hR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==dR)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function pR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Uf.oe=-1;function Zu(t){return t==null}function fu(t){return t===0&&1/t==-1/0}function mR(t){return typeof t=="number"&&Number.isInteger(t)&&!fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function J0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new al(this.root,e,this.comparator,!1)}getReverseIterator(){return new al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new al(this.root,e,this.comparator,!0)}}class al{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ft.RED,this.left=i??ft.EMPTY,this.right=s??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ft(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ft.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qg(this.data.getIterator())}getIteratorFrom(e){return new qg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class qg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new In([])}unionWith(e){let n=new gt(pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Z0("Invalid base64 string: "+s):s}}(e);return new vt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const gR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(Te(!!t),typeof t=="string"){let e=0;const n=gR.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ki(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jf(t){const e=t.mapValue.fields.__previous_value__;return Ff(e)?jf(e):e}function ia(t){const e=Jr(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ff(t)?4:vR(t)?9007199254740991:_R(t)?10:11:oe()}function Hn(t,e){if(t===e)return!0;const n=xi(t);if(n!==xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jr(i.timestampValue),a=Jr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ki(i.bytesValue).isEqual(ki(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?fu(o)===fu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Cs(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Wg(o)!==Wg(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Hn(o[u],a[u])))return!1;return!0}(t,e);default:return oe()}}function oa(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function Ps(t,e){if(t===e)return 0;const n=xi(t),r=xi(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),u=Ke(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Kg(t.timestampValue,e.timestampValue);case 4:return Kg(ia(t),ia(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ki(s),u=ki(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=ye(a[c],u[c]);if(h!==0)return h}return ye(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ye(Ke(s.latitude),Ke(o.latitude));return a!==0?a:ye(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const d=s.fields||{},f=o.fields||{},y=(a=d.value)===null||a===void 0?void 0:a.arrayValue,E=(u=f.value)===null||u===void 0?void 0:u.arrayValue,k=ye(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:Gg(y,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ll.mapValue&&o===ll.mapValue)return 0;if(s===ll.mapValue)return 1;if(o===ll.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const f=ye(u[d],h[d]);if(f!==0)return f;const y=Ps(a[u[d]],c[h[d]]);if(y!==0)return y}return ye(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function Kg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Jr(t),r=Jr(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function Gg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ps(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function ks(t){return vd(t)}function vd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ki(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${vd(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function wd(t){return!!t&&"integerValue"in t}function Bf(t){return!!t&&"arrayValue"in t}function Qg(t){return!!t&&"nullValue"in t}function Xg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function _R(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function No(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=No(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=No(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=No(n)}setAll(e){let n=pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=No(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cn(No(this.value))}}function e1(t){const e=[];return Fs(t.fields,(n,r)=>{const i=new pt([n]);if(Pl(r)){const s=e1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kt(e,0,ae.min(),ae.min(),ae.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new kt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new kt(e,2,n,ae.min(),ae.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,ae.min(),ae.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.position=e,this.inclusive=n}}function Yg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Ps(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Jg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function wR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{}class rt extends t1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TR(e,n,r):n==="array-contains"?new AR(e,r):n==="in"?new RR(e,r):n==="not-in"?new CR(e,r):n==="array-contains-any"?new PR(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IR(e,r):new SR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ps(n,this.value)):n!==null&&xi(this.value)===xi(n)&&this.matchesComparison(Ps(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends t1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wn(e,n)}matches(e){return n1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function n1(t){return t.op==="and"}function r1(t){return ER(t)&&n1(t)}function ER(t){for(const e of t.filters)if(e instanceof Wn)return!1;return!0}function Ed(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+ks(t.value);if(r1(t))return t.filters.map(e=>Ed(e)).join(",");{const e=t.filters.map(n=>Ed(n)).join(",");return`${t.op}(${e})`}}function i1(t,e){return t instanceof rt?function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&Hn(r.value,i.value)}(t,e):t instanceof Wn?function(r,i){return i instanceof Wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&i1(o,i.filters[a]),!0):!1}(t,e):void oe()}function s1(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${ks(n.value)}`}(t):t instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(s1).join(" ,")+"}"}(t):"Filter"}class TR extends rt{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class IR extends rt{constructor(e,n){super(e,"in",n),this.keys=o1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SR extends rt{constructor(e,n){super(e,"not-in",n),this.keys=o1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function o1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class AR extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bf(n)&&oa(n.arrayValue,this.value)}}class RR extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oa(this.value.arrayValue,n)}}class CR extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!oa(this.value.arrayValue,n)}}class PR extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Zg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new kR(t,e,n,r,i,s,o)}function zf(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ed(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ks(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ks(r)).join(",")),e.ue=n}return e.ue}function $f(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!i1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jg(t.startAt,e.startAt)&&Jg(t.endAt,e.endAt)}function Td(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xR(t,e,n,r,i,s,o,a){return new ec(t,e,n,r,i,s,o,a)}function a1(t){return new ec(t)}function ey(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NR(t){return t.collectionGroup!==null}function bo(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new gt(pt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new mu(s,r))}),n.has(pt.keyField().canonicalString())||e.ce.push(new mu(pt.keyField(),r))}return e.ce}function Fn(t){const e=le(t);return e.le||(e.le=bR(e,bo(t))),e.le}function bR(t,e){if(t.limitType==="F")return Zg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new mu(i.field,s)});const n=t.endAt?new pu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pu(t.startAt.position,t.startAt.inclusive):null;return Zg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Id(t,e,n){return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tc(t,e){return $f(Fn(t),Fn(e))&&t.limitType===e.limitType}function l1(t){return`${zf(Fn(t))}|lt:${t.limitType}`}function qi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>s1(i)).join(", ")}]`),Zu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ks(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ks(i)).join(",")),`Target(${r})`}(Fn(t))}; limitType=${t.limitType})`}function nc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of bo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=Yg(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,bo(r),i)||r.endAt&&!function(o,a,u){const c=Yg(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,bo(r),i))}(t,e)}function DR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function u1(t){return(e,n)=>{let r=!1;for(const i of bo(t)){const s=OR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function OR(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Ps(u,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return J0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new Be(ie.comparator);function hr(){return LR}const c1=new Be(ie.comparator);function wo(...t){let e=c1;for(const n of t)e=e.insert(n.key,n);return e}function h1(t){let e=c1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gi(){return Do()}function d1(){return Do()}function Do(){return new js(t=>t.toString(),(t,e)=>t.isEqual(e))}const VR=new Be(ie.comparator),MR=new gt(ie.comparator);function ce(...t){let e=MR;for(const n of t)e=e.add(n);return e}const UR=new gt(ye);function FR(){return UR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(e)?"-0":e}}function f1(t){return{integerValue:""+t}}function jR(t,e){return mR(e)?f1(e):Hf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this._=void 0}}function BR(t,e,n){return t instanceof gu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ff(s)&&(s=jf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof aa?m1(t,e):t instanceof la?g1(t,e):function(i,s){const o=p1(i,s),a=ty(o)+ty(i.Pe);return wd(o)&&wd(i.Pe)?f1(a):Hf(i.serializer,a)}(t,e)}function zR(t,e,n){return t instanceof aa?m1(t,e):t instanceof la?g1(t,e):n}function p1(t,e){return t instanceof yu?function(r){return wd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class gu extends rc{}class aa extends rc{constructor(e){super(),this.elements=e}}function m1(t,e){const n=y1(e);for(const r of t.elements)n.some(i=>Hn(i,r))||n.push(r);return{arrayValue:{values:n}}}class la extends rc{constructor(e){super(),this.elements=e}}function g1(t,e){let n=y1(e);for(const r of t.elements)n=n.filter(i=>!Hn(i,r));return{arrayValue:{values:n}}}class yu extends rc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ty(t){return Ke(t.integerValue||t.doubleValue)}function y1(t){return Bf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $R(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof aa&&i instanceof aa||r instanceof la&&i instanceof la?Cs(r.elements,i.elements,Hn):r instanceof yu&&i instanceof yu?Hn(r.Pe,i.Pe):r instanceof gu&&i instanceof gu}(t.transform,e.transform)}class HR{constructor(e,n){this.version=e,this.transformResults=n}}class jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ic{}function _1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wf(t.key,jn.none()):new Ta(t.key,t.data,jn.none());{const n=t.data,r=cn.empty();let i=new gt(pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ui(t.key,r,new In(i.toArray()),jn.none())}}function WR(t,e,n){t instanceof Ta?function(i,s,o){const a=i.value.clone(),u=ry(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ui?function(i,s,o){if(!kl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ry(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(v1(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Oo(t,e,n,r){return t instanceof Ta?function(s,o,a,u){if(!kl(s.precondition,o))return a;const c=s.value.clone(),h=iy(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ui?function(s,o,a,u){if(!kl(s.precondition,o))return a;const c=iy(s.fieldTransforms,u,o),h=o.data;return h.setAll(v1(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return kl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function qR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=p1(r.transform,i||null);s!=null&&(n===null&&(n=cn.empty()),n.set(r.field,s))}return n||null}function ny(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cs(r,i,(s,o)=>$R(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ta extends ic{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ui extends ic{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function v1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ry(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,zR(o,a,n[i]))}return r}function iy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,BR(s,o,e))}return r}class Wf extends ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KR extends ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&WR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Oo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=d1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=_1(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Cs(this.mutations,e.mutations,(n,r)=>ny(n,r))&&Cs(this.baseMutations,e.baseMutations,(n,r)=>ny(n,r))}}class qf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=function(){return VR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new qf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,fe;function YR(t){switch(t){default:return oe();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function w1(t){if(t===void 0)return cr("GRPC error has no .code"),G.UNKNOWN;switch(t){case Ye.OK:return G.OK;case Ye.CANCELLED:return G.CANCELLED;case Ye.UNKNOWN:return G.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return G.INTERNAL;case Ye.UNAVAILABLE:return G.UNAVAILABLE;case Ye.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Ye.NOT_FOUND:return G.NOT_FOUND;case Ye.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Ye.ABORTED:return G.ABORTED;case Ye.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Ye.DATA_LOSS:return G.DATA_LOSS;default:return oe()}}(fe=Ye||(Ye={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new wi([4294967295,4294967295],0);function sy(t){const e=JR().encode(t),n=new H0;return n.update(e),new Uint8Array(n.digest())}function oy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wi([n,r],0),new wi([i,s],0)]}class Kf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Eo(`Invalid padding: ${n}`);if(r<0)throw new Eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wi.fromNumber(r)));return i.compare(ZR)===1&&(i=new wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=sy(e),[r,i]=oy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Kf(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=sy(e),[r,i]=oy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ia.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sc(ae.min(),i,new Be(ye),hr(),ce())}}class Ia{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ia(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class E1{constructor(e,n){this.targetId=e,this.me=n}}class T1{constructor(e,n,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ay{constructor(){this.fe=0,this.ge=uy(),this.pe=vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new Ia(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=uy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eC{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=ly(),this.Qe=new Be(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Td(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,kt.newNoDocument(o,ae.min()))}else Te(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ki(r).toUint8Array()}catch(u){if(u instanceof Z0)return Rs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Kf(o,i,s)}catch(u){return Rs(u instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Td(a.target)){const u=new ie(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,kt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new sc(e,n,this.Qe,this.ke,r);return this.ke=hr(),this.qe=ly(),this.Qe=new Be(ye),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ay,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ay),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ly(){return new Be(ie.comparator)}function uy(){return new Be(ie.comparator)}const tC={asc:"ASCENDING",desc:"DESCENDING"},nC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rC={and:"AND",or:"OR"};class iC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sd(t,e){return t.useProto3Json||Zu(e)?e:{value:e}}function _u(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sC(t,e){return _u(t,e.toTimestamp())}function Bn(t){return Te(!!t),ae.fromTimestamp(function(n){const r=Jr(n);return new st(r.seconds,r.nanos)}(t))}function Gf(t,e){return Ad(t,e).canonicalString()}function Ad(t,e){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function S1(t){const e=Le.fromString(t);return Te(k1(e)),e}function Rd(t,e){return Gf(t.databaseId,e.path)}function uh(t,e){const n=S1(e);if(n.get(1)!==t.databaseId.projectId)throw new re(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(R1(n))}function A1(t,e){return Gf(t.databaseId,e)}function oC(t){const e=S1(t);return e.length===4?Le.emptyPath():R1(e)}function Cd(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R1(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cy(t,e,n){return{name:Rd(t,e),fields:n.value.mapValue.fields}}function aC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Te(h===void 0||typeof h=="string"),vt.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array),vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?G.UNKNOWN:w1(c.code);return new re(h,c.message||"")}(o);n=new T1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=uh(t,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):ae.min(),a=new cn({mapValue:{fields:r.document.fields}}),u=kt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new xl(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=uh(t,r.document),s=r.readTime?Bn(r.readTime):ae.min(),o=kt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=uh(t,r.document),s=r.removedTargetIds||[];n=new xl([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new XR(i,s),a=r.targetId;n=new E1(a,o)}}return n}function lC(t,e){let n;if(e instanceof Ta)n={update:cy(t,e.key,e.value)};else if(e instanceof Wf)n={delete:Rd(t,e.key)};else if(e instanceof Ui)n={update:cy(t,e.key,e.data),updateMask:yC(e.fieldMask)};else{if(!(e instanceof KR))return oe();n={verify:Rd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof gu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof la)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function uC(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Bn(i.updateTime):Bn(s);return o.isEqual(ae.min())&&(o=Bn(s)),new HR(o,i.transformResults||[])}(n,e))):[]}function cC(t,e){return{documents:[A1(t,e.path)]}}function hC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=A1(t,i);const s=function(c){if(c.length!==0)return P1(Wn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Ki(f.field),direction:pC(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function dC(t){let e=oC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=C1(d);return f instanceof Wn&&r1(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(E){return new mu(Gi(E.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Zu(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(d){const f=!!d.before,y=d.values||[];return new pu(y,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,y=d.values||[];return new pu(y,f)}(n.endAt)),xR(e,i,o,s,a,"F",u,c)}function fC(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gi(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gi(n.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gi(n.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gi(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Gi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wn.create(n.compositeFilter.filters.map(r=>C1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function pC(t){return tC[t]}function mC(t){return nC[t]}function gC(t){return rC[t]}function Ki(t){return{fieldPath:t.canonicalString()}}function Gi(t){return pt.fromServerFormat(t.fieldPath)}function P1(t){return t instanceof rt?function(n){if(n.op==="=="){if(Xg(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NAN"}};if(Qg(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xg(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NAN"}};if(Qg(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ki(n.field),op:mC(n.op),value:n.value}}}(t):t instanceof Wn?function(n){const r=n.getFilters().map(i=>P1(i));return r.length===1?r[0]:{compositeFilter:{op:gC(n.op),filters:r}}}(t):oe()}function yC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function k1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.ct=e}}function vC(t){const e=dC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Id(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.un=new EC}addToCollectionParentIndex(e,n){return this.un.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Yr.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class EC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new gt(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xs(0)}static kn(){return new xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Oo(r.mutation,i,In.empty(),st.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=gi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=wo();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hr();const o=Do(),a=function(){return Do()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ui)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Oo(h.mutation,c,h.mutation.getFieldMask(),st.now())):o.set(c.key,In.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new IC(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Do();let i=new Be((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||In.empty();h=a.applyToLocalView(c,h),r.set(u,h);const d=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=d1();h.forEach(f=>{if(!s.has(f)){const y=_1(n.get(f),r.get(f));y!==null&&d.set(f,y),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(gi());let a=-1,u=s;return o.next(c=>q.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{u=u.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ce())).next(h=>({batchId:a,changes:h1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=wo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=wo();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,u=>{const c=function(d,f){return new ec(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,kt.newInvalidDocument(h)))});let a=wo();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Oo(h.mutation,c,In.empty(),st.now()),nc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:vC(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.overlays=new Be(ie.comparator),this.Ir=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gi();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=gi(),s=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Be((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=gi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=gi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QR(n,r));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this.Tr=new gt(lt.Er),this.dr=new gt(lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new lt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new lt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Le([])),r=new lt(n,e),i=new lt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Le([])),r=new lt(n,e),i=new lt(n,e+1);let s=ce();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new lt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new gt(lt.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lt(n,0),i=new lt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(ye);return n.forEach(i=>{const s=new lt(i,0),o=new lt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new lt(new ie(s),0);let a=new gt(ye);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(n.mutations,i=>{const s=new lt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new lt(n,0),i=this.br.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.Mr=e,this.docs=function(){return new Be(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():kt.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hr();const o=n.path,a=new ie(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||hR(cR(h),r)<=0||(i.has(h.key)||nc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Or(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xC(this)}getSize(e){return q.resolve(this.size)}}class xC extends TC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.persistence=e,this.Nr=new js(n=>zf(n),$f),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qf,this.targetCount=0,this.kr=xs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Kn(n),q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Uf(0),this.Kr=!1,this.Kr=!0,this.$r=new CC,this.referenceDelegate=e(this),this.Ur=new NC(this),this.indexManager=new wC,this.remoteDocumentCache=function(i){return new kC(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new _C(n),this.Gr=new AC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new PC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new DC(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class DC extends fR{constructor(e){super(),this.currentSequenceNumber=e}}class Xf{constructor(e){this.persistence=e,this.Jr=new Qf,this.Yr=null}static Zr(e){return new Xf(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return q.or([()=>q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Yf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return MA()?8:pR(Nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new OC;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(co()<=he.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(co()<=he.DEBUG&&te("QueryEngine","Query:",qi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(co()<=he.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):q.resolve())}Yi(e,n){if(ey(n))return q.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Id(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,Id(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return ey(n)||i.isEqual(ae.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?q.resolve(null):(co()<=he.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qi(n)),this.rs(e,o,n,uR(i,-1)).next(a=>a))})}ts(e,n){let r=new gt(u1(e));return n.forEach((i,s)=>{nc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return co()<=he.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",qi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Be(ye),this._s=new js(s=>zf(s),$f),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function MC(t,e,n,r){return new VC(t,e,n,r)}async function x1(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ce();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function UC(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const d=c.batch,f=d.keys();let y=q.resolve();return f.forEach(E=>{y=y.next(()=>h.getEntry(u,E)).next(k=>{const x=c.docVersions.get(E);Te(x!==null),k.version.compareTo(x)<0&&(d.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function N1(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function FC(t,e){const n=le(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let y=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(vt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(d,y),function(k,x,v){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=hr(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(jC(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ae.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function jC(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function BC(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zC(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Pd(t,e,n){const r=le(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ea(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function hy(t,e,n){const r=le(t);let i=ae.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=le(u),f=d._s.get(h);return f!==void 0?q.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(r,o,Fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:ce())).next(a=>($C(r,DR(e),a),{documents:a,Ts:s})))}function $C(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class dy{constructor(){this.activeTargetIds=FR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HC{constructor(){this.so=new dy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul=null;function ch(){return ul===null?ul=function(){return 268435456+Math.round(2147483648*Math.random())}():ul++,"0x"+ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class GC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=ch(),u=this.xo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(te("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Rs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Us}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=qC[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=ch();return new Promise((o,a)=>{const u=new W0;u.setWithCredentials(!0),u.listenOnce(q0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Cl.NO_ERROR:const h=u.getResponseJson();te(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Cl.TIMEOUT:te(At,`RPC '${e}' ${s} timed out`),a(new re(G.DEADLINE_EXCEEDED,"Request time out"));break;case Cl.HTTP_ERROR:const d=u.getStatus();if(te(At,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const y=f==null?void 0:f.error;if(y&&y.status&&y.message){const E=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(v)>=0?v:G.UNKNOWN}(y.status);a(new re(E,y.message))}else a(new re(G.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new re(G.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{te(At,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);te(At,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=ch(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Q0(),a=G0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");te(At,`Creating RPC '${e}' stream ${i}: ${h}`,u);const d=o.createWebChannel(h,u);let f=!1,y=!1;const E=new KC({Io:x=>{y?te(At,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(f||(te(At,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),te(At,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},To:()=>d.close()}),k=(x,v,A)=>{x.listen(v,C=>{try{A(C)}catch(D){setTimeout(()=>{throw D},0)}})};return k(d,vo.EventType.OPEN,()=>{y||(te(At,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),k(d,vo.EventType.CLOSE,()=>{y||(y=!0,te(At,`RPC '${e}' stream ${i} transport closed`),E.So())}),k(d,vo.EventType.ERROR,x=>{y||(y=!0,Rs(At,`RPC '${e}' stream ${i} transport errored:`,x),E.So(new re(G.UNAVAILABLE,"The operation could not be completed")))}),k(d,vo.EventType.MESSAGE,x=>{var v;if(!y){const A=x.data[0];Te(!!A);const C=A,D=C.error||((v=C[0])===null||v===void 0?void 0:v.error);if(D){te(At,`RPC '${e}' stream ${i} received error:`,D);const V=D.status;let b=function(g){const w=Ye[g];if(w!==void 0)return w1(w)}(V),S=D.message;b===void 0&&(b=G.INTERNAL,S="Unknown error status: "+V+" with message "+D.message),y=!0,E.So(new re(b,S)),d.close()}else te(At,`RPC '${e}' stream ${i} received:`,A),E.bo(A)}}),k(a,K0.STAT_EVENT,x=>{x.stat===_d.PROXY?te(At,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===_d.NOPROXY&&te(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function hh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){return new iC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new b1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new re(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QC extends D1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=aC(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Bn(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Cd(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Td(u)?{documents:cC(s,u)}:{query:hC(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=I1(s,o.resumeToken);const c=Sd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=_u(s,o.snapshotVersion.toTimestamp());const c=Sd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=fC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Cd(this.serializer),n.removeTarget=e,this.a_(n)}}class XC extends D1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=uC(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Cd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new re(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ad(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(G.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ad(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(G.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Fi(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=le(u);c.L_.add(4),await Sa(c),c.q_.set("Unknown"),c.L_.delete(4),await ac(c)}(this))})}),this.q_=new JC(r,i)}}async function ac(t){if(Fi(t))for(const e of t.B_)await e(!0)}async function Sa(t){for(const e of t.B_)await e(!1)}function O1(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),tp(n)?ep(n):Bs(n).r_()&&Zf(n,e))}function Jf(t,e){const n=le(t),r=Bs(n);n.N_.delete(e),r.r_()&&L1(n,e),n.N_.size===0&&(r.r_()?r.o_():Fi(n)&&n.q_.set("Unknown"))}function Zf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bs(t).A_(e)}function L1(t,e){t.Q_.xe(e),Bs(t).R_(e)}function ep(t){t.Q_=new eC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bs(t).start(),t.q_.v_()}function tp(t){return Fi(t)&&!Bs(t).n_()&&t.N_.size>0}function Fi(t){return le(t).L_.size===0}function V1(t){t.Q_=void 0}async function eP(t){t.q_.set("Online")}async function tP(t){t.N_.forEach((e,n)=>{Zf(t,e)})}async function nP(t,e){V1(t),tp(t)?(t.q_.M_(e),ep(t)):t.q_.set("Unknown")}async function rP(t,e,n){if(t.q_.set("Online"),e instanceof T1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vu(t,r)}else if(e instanceof xl?t.Q_.Ke(e):e instanceof E1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await N1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),L1(s,u);const d=new Dr(h.target,u,c,h.sequenceNumber);Zf(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await vu(t,r)}}async function vu(t,e,n){if(!Ea(e))throw e;t.L_.add(1),await Sa(t),t.q_.set("Offline"),n||(n=()=>N1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ac(t)})}function M1(t,e){return e().catch(n=>vu(t,n,e))}async function lc(t){const e=le(t),n=Zr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iP(e);)try{const i=await BC(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,sP(e,i)}catch(i){await vu(e,i)}U1(e)&&F1(e)}function iP(t){return Fi(t)&&t.O_.length<10}function sP(t,e){t.O_.push(e);const n=Zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function U1(t){return Fi(t)&&!Zr(t).n_()&&t.O_.length>0}function F1(t){Zr(t).start()}async function oP(t){Zr(t).p_()}async function aP(t){const e=Zr(t);for(const n of t.O_)e.m_(n.mutations)}async function lP(t,e,n){const r=t.O_.shift(),i=qf.from(r,e,n);await M1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await lc(t)}async function uP(t,e){e&&Zr(t).V_&&await async function(r,i){if(function(o){return YR(o)&&o!==G.ABORTED}(i.code)){const s=r.O_.shift();Zr(r).s_(),await M1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await lc(r)}}(t,e),U1(t)&&F1(t)}async function py(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=Fi(n);n.L_.add(3),await Sa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ac(n)}async function cP(t,e){const n=le(t);e?(n.L_.delete(2),await ac(n)):e||(n.L_.add(2),await Sa(n),n.q_.set("Unknown"))}function Bs(t){return t.K_||(t.K_=function(n,r,i){const s=le(n);return s.w_(),new QC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:eP.bind(null,t),Ro:tP.bind(null,t),mo:nP.bind(null,t),d_:rP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),tp(t)?ep(t):t.q_.set("Unknown")):(await t.K_.stop(),V1(t))})),t.K_}function Zr(t){return t.U_||(t.U_=function(n,r,i){const s=le(n);return s.w_(),new XC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oP.bind(null,t),mo:uP.bind(null,t),f_:aP.bind(null,t),g_:lP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await lc(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new np(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(t,e){if(cr("AsyncQueue",`${e}: ${t}`),Ea(t))return new re(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=wo(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new ms(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ms;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.W_=new Be(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ns{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ns(e,n,ms.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class dP{constructor(){this.queries=gy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=le(n),s=i.queries;i.queries=gy(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new re(G.ABORTED,"Firestore shutting down"))}}function gy(){return new js(t=>l1(t),tc)}async function fP(t,e){const n=le(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new hP,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=rp(o,`Initialization of query '${qi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&ip(n)}async function pP(t,e){const n=le(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mP(t,e){const n=le(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ip(n)}function gP(t,e,n){const r=le(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function ip(t){t.Y_.forEach(e=>{e.next()})}var kd,yy;(yy=kd||(kd={})).ea="default",yy.Cache="cache";class yP{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.key=e}}class B1{constructor(e){this.key=e}}class _P{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=u1(e),this.Ra=new ms(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new my,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),y=nc(this.query,d)?d:null,E=!!f&&this.mutatedKeys.has(f.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;f&&y?f.data.isEqual(y.data)?E!==k&&(r.track({type:3,doc:y}),x=!0):this.ga(f,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!f&&y?(r.track({type:0,doc:y}),x=!0):f&&!y&&(r.track({type:1,doc:f}),x=!0,(u||c)&&(a=!0)),x&&(y?(o=o.add(y),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(y,E){const k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return k(y)-k(E)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Ns(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new my,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new B1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new j1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ns.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class vP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wP{constructor(e){this.key=e,this.va=!1}}class EP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new js(a=>l1(a),tc),this.Ma=new Map,this.xa=new Set,this.Oa=new Be(ie.comparator),this.Na=new Map,this.La=new Qf,this.Ba={},this.ka=new Map,this.qa=xs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function TP(t,e,n=!0){const r=K1(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await z1(r,e,n,!0),i}async function IP(t,e){const n=K1(t);await z1(n,e,!0,!1)}async function z1(t,e,n,r){const i=await zC(t.localStore,Fn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await SP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&O1(t.remoteStore,i),a}async function SP(t,e,n,r,i){t.Ka=(d,f,y)=>async function(k,x,v,A){let C=x.view.ma(v);C.ns&&(C=await hy(k.localStore,x.query,!1).then(({documents:S})=>x.view.ma(S,C)));const D=A&&A.targetChanges.get(x.targetId),V=A&&A.targetMismatches.get(x.targetId)!=null,b=x.view.applyChanges(C,k.isPrimaryClient,D,V);return vy(k,x.targetId,b.wa),b.snapshot}(t,d,f,y);const s=await hy(t.localStore,e,!0),o=new _P(e,s.Ts),a=o.ma(s.documents),u=Ia.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);vy(t,n,c.wa);const h=new vP(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function AP(t,e,n){const r=le(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!tc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Jf(r.remoteStore,i.targetId),xd(r,i.targetId)}).catch(wa)):(xd(r,i.targetId),await Pd(r.localStore,i.targetId,!0))}async function RP(t,e){const n=le(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jf(n.remoteStore,r.targetId))}async function CP(t,e,n){const r=OP(t);try{const i=await function(o,a){const u=le(o),c=st.now(),h=a.reduce((y,E)=>y.add(E.key),ce());let d,f;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=hr(),k=ce();return u.cs.getEntries(y,h).next(x=>{E=x,E.forEach((v,A)=>{A.isValidDocument()||(k=k.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(x=>{d=x;const v=[];for(const A of a){const C=qR(A,d.get(A.key).overlayedDocument);C!=null&&v.push(new Ui(A.key,C,e1(C.value.mapValue),jn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,v,a)}).next(x=>{f=x;const v=x.applyToLocalDocumentSet(d,k);return u.documentOverlayCache.saveOverlays(y,x.batchId,v)})}).then(()=>({batchId:f.batchId,changes:h1(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Be(ye)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Aa(r,i.changes),await lc(r.remoteStore)}catch(i){const s=rp(i,"Failed to persist write");n.reject(s)}}async function $1(t,e){const n=le(t);try{const r=await FC(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Te(o.va):i.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await Aa(n,r,e)}catch(r){await wa(r)}}function _y(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=le(o);u.onlineState=a;let c=!1;u.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&ip(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PP(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Be(ie.comparator);o=o.insert(s,kt.newNoDocument(s,ae.min()));const a=ce().add(s),u=new sc(ae.min(),new Map,new Be(ye),o,a);await $1(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),sp(r)}else await Pd(r.localStore,e,!1).then(()=>xd(r,e,n)).catch(wa)}async function kP(t,e){const n=le(t),r=e.batch.batchId;try{const i=await UC(n.localStore,e);W1(n,r,null),H1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Aa(n,i)}catch(i){await wa(i)}}async function xP(t,e,n){const r=le(t);try{const i=await function(o,a){const u=le(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(Te(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);W1(r,e,n),H1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Aa(r,i)}catch(i){await wa(i)}}function H1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function W1(t,e,n){const r=le(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function xd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||q1(t,r)})}function q1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Jf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sp(t))}function vy(t,e,n){for(const r of n)r instanceof j1?(t.La.addReference(r.key,e),NP(t,r)):r instanceof B1?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||q1(t,r.key)):oe()}function NP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),sp(t))}function sp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new wP(n)),t.Oa=t.Oa.insert(n,r),O1(t.remoteStore,new Dr(Fn(a1(n.path)),r,"TargetPurposeLimboResolution",Uf.oe))}}async function Aa(t,e,n){const r=le(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Yf.Wi(u.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=le(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>q.forEach(c,f=>q.forEach(f.$i,y=>h.persistence.referenceDelegate.addReference(d,f.targetId,y)).next(()=>q.forEach(f.Ui,y=>h.persistence.referenceDelegate.removeReference(d,f.targetId,y)))))}catch(d){if(!Ea(d))throw d;te("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const y=h.os.get(f),E=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(f,k)}}}(r.localStore,s))}async function bP(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await x1(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new re(G.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Aa(n,r.hs)}}function DP(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function K1(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PP.bind(null,e),e.Ca.d_=mP.bind(null,e.eventManager),e.Ca.$a=gP.bind(null,e.eventManager),e}function OP(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,e),e}class wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return MC(this.persistence,new LC,e.initialUser,this.serializer)}Ga(e){return new bC(Xf.Zr,this.serializer)}Wa(e){return new HC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wu.provider={build:()=>new wu};class Nd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_y(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bP.bind(null,this.syncEngine),await cP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dP}()}createDatastore(e){const n=oc(e.databaseInfo.databaseId),r=function(s){return new GC(s)}(e.databaseInfo);return function(s,o,a,u){return new YC(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ZC(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_y(this.syncEngine,n,0),function(){return fy.D()?new fy:new WC}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const d=new EP(i,s,o,a,u,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=le(i);te("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Sa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Nd.provider={build:()=>new Nd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=Y0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dh(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await x1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await MP(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>py(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>py(e.remoteStore,i)),t._onlineComponents=e}async function MP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await dh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Rs("Error using user provided cache. Falling back to memory cache: "+n),await dh(t,new wu)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await dh(t,new wu);return t._offlineComponents}async function G1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await wy(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await wy(t,new Nd))),t._onlineComponents}function UP(t){return G1(t).then(e=>e.syncEngine)}async function FP(t){const e=await G1(t),n=e.eventManager;return n.onListen=TP.bind(null,e.syncEngine),n.onUnlisten=AP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RP.bind(null,e.syncEngine),n}function jP(t,e,n={}){const r=new Wr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new LP({next:f=>{h.Za(),o.enqueueAndForget(()=>pP(s,d)),f.fromCache&&u.source==="server"?c.reject(new re(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new yP(a,h,{includeMetadataChanges:!0,_a:!0});return fP(s,d)}(await FP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e,n){if(!n)throw new re(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BP(t,e,n,r){if(e===!0&&r===!0)throw new re(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ty(t){if(!ie.isDocumentKey(t))throw new re(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Iy(t){if(ie.isDocumentKey(t))throw new re(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function ua(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=op(t);throw new re(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eR;switch(r.type){case"firstParty":return new iR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ey.get(n);r&&(te("ComponentProvider","Removing Datastore"),Ey.delete(n),r.terminate())}(this),Promise.resolve()}}function zP(t,e,n,r={}){var i;const s=(t=ua(t,uc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ct.MOCK_USER;else{a=U0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new re(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ct(c)}t._authCredentials=new tR(new X0(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cc(this.firestore,e,this._query)}}class Rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class qr extends cc{constructor(e,n,r){super(e,n,a1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new ie(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function bd(t,e,...n){if(t=_t(t),X1("collection","path",e),t instanceof uc){const r=Le.fromString(e,...n);return Iy(r),new qr(t,null,r)}{if(!(t instanceof Rn||t instanceof qr))throw new re(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Iy(r),new qr(t.firestore,null,r)}}function Y1(t,e,...n){if(t=_t(t),arguments.length===1&&(e=Y0.newId()),X1("doc","path",e),t instanceof uc){const r=Le.fromString(e,...n);return Ty(r),new Rn(t,null,new ie(r))}{if(!(t instanceof Rn||t instanceof qr))throw new re(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Ty(r),new Rn(t.firestore,t instanceof qr?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new b1(this,"async_queue_retry"),this.Vu=()=>{const r=hh();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=hh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=hh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Wr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ea(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw cr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=np.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class hc extends uc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ay,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ay(e),this._firestoreClient=void 0,await e}}}function $P(t,e){const n=typeof t=="object"?t:Vf(),r=typeof t=="string"?t:"(default)",i=Ju(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=L0("firestore");s&&zP(i,...s)}return i}function J1(t){if(t._terminated)throw new re(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HP(t),t._firestoreClient}function HP(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new yR(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Q1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new VP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bs(vt.fromBase64String(e))}catch(n){throw new re(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bs(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=/^__.*__$/;class qP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ta(e,this.data,n,this.fieldTransforms)}}function ew(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class cp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Eu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ew(this.Cu)&&WP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class KP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||oc(e)}Qu(e,n,r,i=!1){return new cp({Cu:e,methodName:n,qu:r,path:pt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GP(t){const e=t._freezeSettings(),n=oc(t._databaseId);return new KP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QP(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);iw("Data must be an object, but it was:",o,r);const a=nw(r,o);let u,c;if(s.merge)u=new In(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=XP(e,d,n);if(!o.contains(f))throw new re(G.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);JP(h,f)||h.push(f)}u=new In(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new qP(new cn(a),u,c)}function tw(t,e){if(rw(t=_t(t)))return iw("Unsupported field value:",e,t),nw(t,e);if(t instanceof Z1)return function(r,i){if(!ew(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=tw(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=st.fromDate(r);return{timestampValue:_u(i.serializer,s)}}if(r instanceof st){const s=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_u(i.serializer,s)}}if(r instanceof lp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bs)return{bytesValue:I1(i.serializer,r._byteString)};if(r instanceof Rn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof up)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Hf(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${op(r)}`)}(t,e)}function nw(t,e){const n={};return J0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,(r,i)=>{const s=tw(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function rw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof lp||t instanceof bs||t instanceof Rn||t instanceof Z1||t instanceof up)}function iw(t,e,n){if(!rw(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=op(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function XP(t,e,n){if((e=_t(e))instanceof ap)return e._internalPath;if(typeof e=="string")return sw(t,e);throw Eu("Field path arguments must be of type string or ",t,!1,void 0,n)}const YP=new RegExp("[~\\*/\\[\\]]");function sw(t,e,n){if(e.search(YP)>=0)throw Eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ap(...e.split("."))._internalPath}catch{throw Eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new re(G.INVALID_ARGUMENT,a+t+u)}function JP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(aw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZP extends ow{data(){return super.data()}}function aw(t,e){return typeof e=="string"?sw(t,e):e instanceof ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tk{convertValue(e,n="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ke(o.doubleValue));return new up(s)}convertGeoPoint(e){return new lp(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);Te(k1(r));const i=new sa(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||cr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rk extends ow{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(aw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Nl extends rk{data(e={}){return super.data(e)}}class ik{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nl(this._firestore,this._userDataWriter,r.key,r,new cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Nl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Nl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:sk(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function sk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}class ok extends tk{constructor(e){super(),this.firestore=e}convertBytes(e){return new bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function lw(t){t=ua(t,cc);const e=ua(t.firestore,hc),n=J1(e),r=new ok(e);return ek(t._query),jP(n,t._query).then(i=>new ik(e,r,t,i))}function ak(t){return uw(ua(t.firestore,hc),[new Wf(t._key,jn.none())])}function lk(t,e){const n=ua(t.firestore,hc),r=Y1(t),i=nk(t.converter,e);return uw(n,[QP(GP(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}function uw(t,e){return function(r,i){const s=new Wr;return r.asyncQueue.enqueueAndForget(async()=>CP(await UP(r),i,s)),s.promise}(J1(t),e)}(function(e,n=!0){(function(i){Us=i})(Mi),Ci(new Xr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new hc(new nR(r.getProvider("auth-internal")),new oR(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new re(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Un(Hg,"4.7.3",e),Un(Hg,"4.7.3","esm2017")})();var uk="firebase",ck="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un(uk,ck,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="firebasestorage.googleapis.com",hw="storageBucket",hk=2*60*1e3,dk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends Kn{constructor(e,n,r=0){super(fh(e),`Firebase Storage: ${n} (${fh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var He;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(He||(He={}));function fh(t){return"storage/"+t}function hp(){const t="An unknown error occurred, please check the error payload for server response.";return new We(He.UNKNOWN,t)}function fk(t){return new We(He.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function pk(t){return new We(He.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mk(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(He.UNAUTHENTICATED,t)}function gk(){return new We(He.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yk(t){return new We(He.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _k(){return new We(He.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vk(){return new We(He.CANCELED,"User canceled the upload/download.")}function wk(t){return new We(He.INVALID_URL,"Invalid URL '"+t+"'.")}function Ek(t){return new We(He.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Tk(){return new We(He.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hw+"' property when initializing the app?")}function Ik(){return new We(He.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Sk(){return new We(He.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ak(t){return new We(He.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dd(t){return new We(He.INVALID_ARGUMENT,t)}function dw(){return new We(He.APP_DELETED,"The Firebase app was deleted.")}function Rk(t){return new We(He.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lo(t,e){return new We(He.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ho(t){throw new We(He.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zt.makeFromUrl(e,n)}catch{return new Zt(e,"")}if(r.path==="")return r;throw Ek(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",y=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),E={bucket:1,path:3},k=n===cw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",v=new RegExp(`^https?://${k}/${i}/${x}`,"i"),C=[{regex:a,indices:u,postModify:s},{regex:y,indices:E,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<C.length;D++){const V=C[D],b=V.regex.exec(e);if(b){const S=b[V.indices.bucket];let m=b[V.indices.path];m||(m=""),r=new Zt(S,m),V.postModify(r);break}}if(r==null)throw wk(e);return r}}class Ck{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...x){c||(c=!0,e.apply(null,x))}function d(x){i=setTimeout(()=>{i=null,t(y,u())},x)}function f(){s&&clearTimeout(s)}function y(x,...v){if(c){f();return}if(x){f(),h.call(null,x,...v);return}if(u()||o){f(),h.call(null,x,...v);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,d(C)}let E=!1;function k(x){E||(E=!0,f(),!c&&(i!==null?(x||(a=2),clearTimeout(i),d(0)):x||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,k(!0)},n),k}function kk(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){return t!==void 0}function Nk(t){return typeof t=="object"&&!Array.isArray(t)}function dp(t){return typeof t=="string"||t instanceof String}function Ry(t){return fp()&&t instanceof Blob}function fp(){return typeof Blob<"u"}function Cy(t,e,n,r){if(r<e)throw Dd(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dd(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function fw(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ei;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ei||(Ei={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n,r,i,s,o,a,u,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new hl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ei.NO_ERROR,u=s.getStatus();if(!a||bk(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ei.ABORT;r(!1,new hl(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new hl(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());xk(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=hp();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?dw():vk();o(u)}else{const u=_k();o(u)}};this.canceled_?n(!1,new hl(!1,null,!0)):this.backoffId_=Pk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Ok(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Lk(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Vk(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Mk(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Uk(t,e,n,r,i,s,o=!0){const a=fw(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return Vk(c,e),Ok(c,n),Lk(c,s),Mk(c,r),new Dk(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jk(...t){const e=Fk();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(fp())return new Blob(t);throw new We(He.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Bk(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t){if(typeof atob>"u")throw Ak("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ph{constructor(e,n){this.data=e,this.contentType=n||null}}function $k(t,e){switch(t){case Ln.RAW:return new ph(pw(e));case Ln.BASE64:case Ln.BASE64URL:return new ph(mw(t,e));case Ln.DATA_URL:return new ph(Wk(e),qk(e))}throw hp()}function pw(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Hk(t){let e;try{e=decodeURIComponent(t)}catch{throw Lo(Ln.DATA_URL,"Malformed data URL.")}return pw(e)}function mw(t,e){switch(t){case Ln.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Lo(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ln.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Lo(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zk(e)}catch(i){throw i.message.includes("polyfill")?i:Lo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class gw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Lo(Ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Kk(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Wk(t){const e=new gw(t);return e.base64?mw(Ln.BASE64,e.rest):Hk(e.rest)}function qk(t){return new gw(t).contentType}function Kk(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){let r=0,i="";Ry(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ry(this.data_)){const r=this.data_,i=Bk(r,e,n);return i===null?null:new Ar(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ar(r,!0)}}static getBlob(...e){if(fp()){const n=e.map(r=>r instanceof Ar?r.data_:r);return new Ar(jk.apply(null,n))}else{const n=e.map(o=>dp(o)?$k(Ln.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ar(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t){let e;try{e=JSON.parse(t)}catch{return null}return Nk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Qk(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function _w(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e){return e}class Ot{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Xk}}let dl=null;function Yk(t){return!dp(t)||t.length<2?t:_w(t)}function vw(){if(dl)return dl;const t=[];t.push(new Ot("bucket")),t.push(new Ot("generation")),t.push(new Ot("metageneration")),t.push(new Ot("name","fullPath",!0));function e(s,o){return Yk(o)}const n=new Ot("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ot("size");return i.xform=r,t.push(i),t.push(new Ot("timeCreated")),t.push(new Ot("updated")),t.push(new Ot("md5Hash",null,!0)),t.push(new Ot("cacheControl",null,!0)),t.push(new Ot("contentDisposition",null,!0)),t.push(new Ot("contentEncoding",null,!0)),t.push(new Ot("contentLanguage",null,!0)),t.push(new Ot("contentType",null,!0)),t.push(new Ot("metadata","customMetadata",!0)),dl=t,dl}function Jk(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Zt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Zk(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Jk(r,t),r}function ww(t,e,n){const r=yw(e);return r===null?null:Zk(t,r,n)}function ex(t,e,n,r){const i=yw(e);if(i===null||!dp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),y=dc(f,n,r),E=fw({alt:"media",token:c});return y+E})[0]}function tx(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class pp{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){if(!t)throw hp()}function nx(t,e){function n(r,i){const s=ww(t,i,e);return Ew(s!==null),s}return n}function rx(t,e){function n(r,i){const s=ww(t,i,e);return Ew(s!==null),ex(s,i,t.host,t._protocol)}return n}function Tw(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=gk():i=mk():n.getStatus()===402?i=pk(t.bucket):n.getStatus()===403?i=yk(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Iw(t){const e=Tw(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=fk(t.path)),s.serverResponse=i.serverResponse,s}return n}function ix(t,e,n){const r=e.fullServerUrl(),i=dc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new pp(i,s,rx(t,n),o);return a.errorHandler=Iw(e),a}function sx(t,e){const n=e.fullServerUrl(),r=dc(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(u,c){}const a=new pp(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Iw(e),a}function ox(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ax(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ox(null,e)),r}function lx(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let D=0;D<2;D++)C=C+Math.random().toString().slice(2);return C}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=ax(e,r,i),h=tx(c,n),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+u+"--",y=Ar.getBlob(d,r,f);if(y===null)throw Ik();const E={name:c.fullPath},k=dc(s,t.host,t._protocol),x="POST",v=t.maxUploadRetryTime,A=new pp(k,x,nx(t,n),v);return A.urlParams=E,A.headers=o,A.body=y.uploadData(),A.errorHandler=Tw(e),A}class ux{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ei.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ei.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ei.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ho("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ho("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ho("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ho("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ho("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class cx extends ux{initXhr(){this.xhr_.responseType="text"}}function mp(){return new cx}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){this._service=e,n instanceof Zt?this._location=n:this._location=Zt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ni(e,n)}get root(){const e=new Zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _w(this._location.path)}get storage(){return this._service}get parent(){const e=Gk(this._location.path);if(e===null)return null;const n=new Zt(this._location.bucket,e);return new Ni(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Rk(e)}}function hx(t,e,n){t._throwIfRoot("uploadBytes");const r=lx(t.storage,t._location,vw(),new Ar(e,!0),n);return t.storage.makeRequestWithTokens(r,mp).then(i=>({metadata:i,ref:t}))}function dx(t){t._throwIfRoot("getDownloadURL");const e=ix(t.storage,t._location,vw());return t.storage.makeRequestWithTokens(e,mp).then(n=>{if(n===null)throw Sk();return n})}function fx(t){t._throwIfRoot("deleteObject");const e=sx(t.storage,t._location);return t.storage.makeRequestWithTokens(e,mp)}function px(t,e){const n=Qk(t._location.path,e),r=new Zt(t._location.bucket,n);return new Ni(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){return/^[A-Za-z]+:\/\//.test(t)}function gx(t,e){return new Ni(t,e)}function Sw(t,e){if(t instanceof gp){const n=t;if(n._bucket==null)throw Tk();const r=new Ni(n,n._bucket);return e!=null?Sw(r,e):r}else return e!==void 0?px(t,e):t}function yx(t,e){if(e&&mx(e)){if(t instanceof gp)return gx(t,e);throw Dd("To use ref(service, url), the first argument must be a Storage instance.")}else return Sw(t,e)}function Py(t,e){const n=e==null?void 0:e[hw];return n==null?null:Zt.makeFromBucketSpec(n,t)}function _x(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:U0(i,t.app.options.projectId))}class gp{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=cw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hk,this._maxUploadRetryTime=dk,this._requests=new Set,i!=null?this._bucket=Zt.makeFromBucketSpec(i,this._host):this._bucket=Py(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zt.makeFromBucketSpec(this._url,e):this._bucket=Py(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ni(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Ck(dw());{const o=Uk(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const ky="@firebase/storage",xy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="storage";function Ny(t,e,n){return t=_t(t),hx(t,e,n)}function by(t){return t=_t(t),dx(t)}function Dy(t){return t=_t(t),fx(t)}function Tu(t,e){return t=_t(t),yx(t,e)}function vx(t=Vf(),e){t=_t(t);const r=Ju(t,Aw).getImmediate({identifier:e}),i=L0("storage");return i&&wx(r,...i),r}function wx(t,e,n,r={}){_x(t,e,n,r)}function Ex(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new gp(n,r,i,e,Mi)}function Tx(){Ci(new Xr(Aw,Ex,"PUBLIC").setMultipleInstances(!0)),Un(ky,xy,""),Un(ky,xy,"esm2017")}Tx();function yp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Rw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ix=Rw,Cw=new _a("auth","Firebase",Rw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new Of("@firebase/auth");function Sx(t,...e){Iu.logLevel<=he.WARN&&Iu.warn(`Auth (${Mi}): ${t}`,...e)}function bl(t,...e){Iu.logLevel<=he.ERROR&&Iu.error(`Auth (${Mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,...e){throw _p(t,...e)}function zn(t,...e){return _p(t,...e)}function Pw(t,e,n){const r=Object.assign(Object.assign({},Ix()),{[e]:n});return new _a("auth","Firebase",r).create(e,{appName:t.name})}function Kr(t){return Pw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _p(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Cw.create(t,...e)}function se(t,e,...n){if(!t)throw _p(e,...n)}function tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bl(e),new Error(e)}function dr(t,e){t||tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ax(){return Oy()==="http:"||Oy()==="https:"}function Oy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ax()||OA()||"connection"in navigator)?navigator.onLine:!0}function Cx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=NA()||LA()}get(){return Rx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new Ra(3e4,6e4);function ji(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ri(t,e,n,r,i={}){return xw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=va(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return DA()||(c.referrerPolicy="no-referrer"),kw.fetch()(Nw(t,t.config.apiHost,n,a),c)})}async function xw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Px),e);try{const i=new Nx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw fl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw fl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw fl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Pw(t,h,c);Pn(t,h)}}catch(i){if(i instanceof Kn)throw i;Pn(t,"network-request-failed",{message:String(i)})}}async function fc(t,e,n,r,i={}){const s=await ri(t,e,n,r,i);return"mfaPendingCredential"in s&&Pn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Nw(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?vp(t.config,i):`${t.config.apiScheme}://${i}`}function xx(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Nx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zn(this.auth,"network-request-failed")),kx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zn(t,e,r);return i.customData._tokenResponse=n,i}function Ly(t){return t!==void 0&&t.enterprise!==void 0}class bx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Dx(t,e){return ri(t,"GET","/v2/recaptchaConfig",ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function bw(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Lx(t,e=!1){const n=_t(t),r=await n.getIdToken(e),i=wp(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Vo(mh(i.auth_time)),issuedAtTime:Vo(mh(i.iat)),expirationTime:Vo(mh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function mh(t){return Number(t)*1e3}function wp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bl("JWT malformed, contained fewer than 3 sections"),null;try{const i=D0(n);return i?JSON.parse(i):(bl("Failed to decode base64 JWT payload"),null)}catch(i){return bl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Vy(t){const e=wp(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kn&&Vx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Vx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vo(this.lastLoginAt),this.creationTime=Vo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ca(t,bw(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Dw(s.providerUserInfo):[],a=Fx(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ld(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function Ux(t){const e=_t(t);await Su(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Dw(t){return t.map(e=>{var{providerId:n}=e,r=yp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(t,e){const n=await xw(t,{},async()=>{const r=va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Nw(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kw.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Bx(t,e){return ri(t,"POST","/v2/accounts:revokeToken",ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=Vy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await jx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new gs;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gs,this.toJSON())}_performRefresh(){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ld(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ca(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Lx(this,e)}reload(){return Ux(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Su(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await ca(this,Ox(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,A=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:D,isAnonymous:V,providerData:b,stsTokenManager:S}=n;se(C&&S,e,"internal-error");const m=gs.fromJSON(this.name,S);se(typeof C=="string",e,"internal-error"),wr(d,e.name),wr(f,e.name),se(typeof D=="boolean",e,"internal-error"),se(typeof V=="boolean",e,"internal-error"),wr(y,e.name),wr(E,e.name),wr(k,e.name),wr(x,e.name),wr(v,e.name),wr(A,e.name);const g=new nr({uid:C,auth:e,email:f,emailVerified:D,displayName:d,isAnonymous:V,photoURL:E,phoneNumber:y,tenantId:k,stsTokenManager:m,createdAt:v,lastLoginAt:A});return b&&Array.isArray(b)&&(g.providerData=b.map(w=>Object.assign({},w))),x&&(g._redirectEventId=x),g}static async _fromIdTokenResponse(e,n,r=!1){const i=new gs;i.updateFromServerResponse(n);const s=new nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Su(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Dw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new gs;a.updateFromIdToken(r);const u=new nr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ld(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;function rr(t){dr(t instanceof Function,"Expected a class definition");let e=My.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,My.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ow.type="NONE";const Uy=Ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e,n){return`firebase:${t}:${e}:${n}`}class ys{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Dl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Dl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ys(rr(Uy),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||rr(Uy);const o=Dl(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=nr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ys(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ys(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jw(e))return"Blackberry";if(Bw(e))return"Webos";if(Vw(e))return"Safari";if((e.includes("chrome/")||Mw(e))&&!e.includes("edge/"))return"Chrome";if(Fw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Lw(t=Nt()){return/firefox\//i.test(t)}function Vw(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mw(t=Nt()){return/crios\//i.test(t)}function Uw(t=Nt()){return/iemobile/i.test(t)}function Fw(t=Nt()){return/android/i.test(t)}function jw(t=Nt()){return/blackberry/i.test(t)}function Bw(t=Nt()){return/webos/i.test(t)}function Ep(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zx(t=Nt()){var e;return Ep(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $x(){return VA()&&document.documentMode===10}function zw(t=Nt()){return Ep(t)||Fw(t)||Bw(t)||jw(t)||/windows phone/i.test(t)||Uw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e=[]){let n;switch(t){case"Browser":n=Fy(Nt());break;case"Worker":n=`${Fy(Nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(t,e={}){return ri(t,"GET","/v2/passwordPolicy",ji(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=6;class Kx{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:qx,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jy(this),this.idTokenSubscription=new jy(this),this.beforeStateQueue=new Hx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ys.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bw(this,{idToken:e}),r=await nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Su(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Cx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(Kr(this));const n=e?_t(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Wx(this),n=new Kx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _a("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Bx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await ys.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$w(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Sx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zs(t){return _t(t)}class jy{constructor(e){this.auth=e,this.observer=null,this.addObserver=HA(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qx(t){pc=t}function Hw(t){return pc.loadJS(t)}function Xx(){return pc.recaptchaEnterpriseScript}function Yx(){return pc.gapiScript}function Jx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Zx="recaptcha-enterprise",eN="NO_RECAPTCHA";class tN{constructor(e){this.type=Zx,this.auth=zs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Dx(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new bx(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;Ly(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(eN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Ly(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Xx();u.length!==0&&(u+=a),Hw(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function By(t,e,n,r=!1){const i=new tN(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function zy(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await By(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await By(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t,e){const n=Ju(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(hu(s,e??{}))return i;Pn(i,"already-initialized")}return n.initialize({options:e})}function rN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iN(t,e,n){const r=zs(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Ww(e),{host:o,port:a}=sN(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),oN()}function Ww(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sN(t){const e=Ww(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:$y(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:$y(o)}}}function $y(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,n){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}}async function aN(t,e){return ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(t,e){return fc(t,"POST","/v1/accounts:signInWithPassword",ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e){return fc(t,"POST","/v1/accounts:signInWithEmailLink",ji(t,e))}async function cN(t,e){return fc(t,"POST","/v1/accounts:signInWithEmailLink",ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Tp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ha(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ha(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,n,"signInWithPassword",lN);case"emailLink":return uN(e,{email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,r,"signUpPassword",aN);case"emailLink":return cN(e,{idToken:n,email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(t,e){return fc(t,"POST","/v1/accounts:signInWithIdp",ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="http://localhost";class bi extends Tp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=yp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _s(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_s(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_s(e,n)}buildRequest(){const e={requestUri:hN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=va(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fN(t){const e=yo(_o(t)).link,n=e?yo(_o(e)).deep_link_id:null,r=yo(_o(t)).deep_link_id;return(r?yo(_o(r)).link:null)||r||n||e||t}class Ip{constructor(e){var n,r,i,s,o,a;const u=yo(_o(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,d=dN((i=u.mode)!==null&&i!==void 0?i:null);se(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=fN(e);try{return new Ip(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.providerId=$s.PROVIDER_ID}static credential(e,n){return ha._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ip.parseLink(n);return se(r,"argument-error"),ha._fromEmailAndCode(e,r.code,r.tenantId)}}$s.PROVIDER_ID="password";$s.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$s.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends qw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Ca{constructor(){super("facebook.com")}static credential(e){return bi._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bi._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ca{constructor(){super("github.com")}static credential(e){return bi._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ca{constructor(){super("twitter.com")}static credential(e,n){return bi._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.TWITTER_SIGN_IN_METHOD="twitter.com";kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await nr._fromIdTokenResponse(e,r,i),o=Hy(r);return new Ds({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Hy(r);return new Ds({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Hy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Kn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Au(e,n,r,i)}}function Kw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Au._fromErrorAndOperation(t,s,e,r):s})}async function pN(t,e,n=!1){const r=await ca(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ds._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(t,e,n=!1){const{auth:r}=t;if(er(r.app))return Promise.reject(Kr(r));const i="reauthenticate";try{const s=await ca(t,Kw(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=wp(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Ds._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(t,e,n=!1){if(er(t.app))return Promise.reject(Kr(t));const r="signIn",i=await Kw(t,r,e),s=await Ds._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function gN(t,e){return Gw(zs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t){const e=zs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function _N(t,e,n){return er(t.app)?Promise.reject(Kr(t)):gN(_t(t),$s.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yN(t),r})}function vN(t,e,n,r){return _t(t).onIdTokenChanged(e,n,r)}function wN(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}const Ru="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ru,"1"),this.storage.removeItem(Ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=1e3,TN=10;class Xw extends Qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$x()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,TN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},EN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xw.type="LOCAL";const IN=Xw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw extends Qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Yw.type="SESSION";const Jw=Yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new mc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await SN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Sp("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return window}function RN(t){$n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}async function CN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kN(){return Zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firebaseLocalStorageDb",xN=1,Cu="firebaseLocalStorage",tE="fbase_key";class Pa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gc(t,e){return t.transaction([Cu],e?"readwrite":"readonly").objectStore(Cu)}function NN(){const t=indexedDB.deleteDatabase(eE);return new Pa(t).toPromise()}function Vd(){const t=indexedDB.open(eE,xN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cu,{keyPath:tE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cu)?e(r):(r.close(),await NN(),e(await Vd()))})})}async function Wy(t,e,n){const r=gc(t,!0).put({[tE]:e,value:n});return new Pa(r).toPromise()}async function bN(t,e){const n=gc(t,!1).get(e),r=await new Pa(n).toPromise();return r===void 0?null:r.value}function qy(t,e){const n=gc(t,!0).delete(e);return new Pa(n).toPromise()}const DN=800,ON=3;class nE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ON)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(kN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CN(),!this.activeServiceWorker)return;this.sender=new AN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vd();return await Wy(e,Ru,"1"),await qy(e,Ru),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gc(i,!1).getAll();return new Pa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nE.type="LOCAL";const LN=nE;new Ra(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e){return e?rr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends Tp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _s(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _s(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _s(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MN(t){return Gw(t.auth,new Ap(t),t.bypassAuthState)}function UN(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),mN(n,new Ap(t),t.bypassAuthState)}async function FN(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),pN(n,new Ap(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MN;case"linkViaPopup":case"linkViaRedirect":return FN;case"reauthViaPopup":case"reauthViaRedirect":return UN;default:Pn(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new Ra(2e3,1e4);class as extends rE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=Sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jN.get())};e()}}as.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="pendingRedirect",Ol=new Map;class zN extends rE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ol.get(this.auth._key());if(!e){try{const r=await $N(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ol.set(this.auth._key(),e)}return this.bypassAuthState||Ol.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $N(t,e){const n=qN(e),r=WN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HN(t,e){Ol.set(t._key(),e)}function WN(t){return rr(t._redirectPersistence)}function qN(t){return Dl(BN,t.config.apiKey,t.name)}async function KN(t,e,n=!1){if(er(t.app))return Promise.reject(Kr(t));const r=zs(t),i=VN(r,e),o=await new zN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=10*60*1e3;class QN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ky(e))}saveEventToCache(e){this.cachedEventUids.add(Ky(e)),this.lastProcessedEventTime=Date.now()}}function Ky(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZN=/^https?/;async function eb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YN(t);for(const n of e)try{if(tb(n))return}catch{}Pn(t,"unauthorized-domain")}function tb(t){const e=Od(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZN.test(n))return!1;if(JN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new Ra(3e4,6e4);function Gy(){const t=$n().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rb(t){return new Promise((e,n)=>{var r,i,s;function o(){Gy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gy(),n(zn(t,"network-request-failed"))},timeout:nb.get()})}if(!((i=(r=$n().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=$n().gapi)===null||s===void 0)&&s.load)o();else{const a=Jx("iframefcb");return $n()[a]=()=>{gapi.load?o():n(zn(t,"network-request-failed"))},Hw(`${Yx()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ll=null,e})}let Ll=null;function ib(t){return Ll=Ll||rb(t),Ll}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Ra(5e3,15e3),ob="__/auth/iframe",ab="emulator/auth/iframe",lb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ub=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cb(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vp(e,ab):`https://${t.config.authDomain}/${ob}`,r={apiKey:e.apiKey,appName:t.name,v:Mi},i=ub.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${va(r).slice(1)}`}async function hb(t){const e=await ib(t),n=$n().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:cb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lb,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=zn(t,"network-request-failed"),a=$n().setTimeout(()=>{s(o)},sb.get());function u(){$n().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fb=500,pb=600,mb="_blank",gb="http://localhost";class Qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yb(t,e,n,r=fb,i=pb){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},db),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Nt().toLowerCase();n&&(a=Mw(c)?mb:n),Lw(c)&&(e=e||gb,u.scrollbars="yes");const h=Object.entries(u).reduce((f,[y,E])=>`${f}${y}=${E},`,"");if(zx(c)&&a!=="_self")return _b(e||"",a),new Qy(null);const d=window.open(e||"",a,h);se(d,t,"popup-blocked");try{d.focus()}catch{}return new Qy(d)}function _b(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="__/auth/handler",wb="emulator/auth/handler",Eb=encodeURIComponent("fac");async function Xy(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mi,eventId:i};if(e instanceof qw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$A(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Ca){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${Eb}=${encodeURIComponent(u)}`:"";return`${Tb(t)}?${va(a).slice(1)}${c}`}function Tb({config:t}){return t.emulator?vp(t,wb):`https://${t.authDomain}/${vb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="webStorageSupport";class Ib{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=KN,this._overrideRedirectResult=HN}async _openPopup(e,n,r,i){var s;dr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Xy(e,n,r,Od(),i);return yb(e,o,Sp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Xy(e,n,r,Od(),i);return RN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(dr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await hb(e),r=new QN(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gh,{type:gh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gh];o!==void 0&&n(!!o),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zw()||Vw()||Ep()}}const Sb=Ib;var Yy="@firebase/auth",Jy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cb(t){Ci(new Xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$w(t)},c=new Gx(r,i,s,u);return rN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ci(new Xr("auth-internal",e=>{const n=zs(e.getProvider("auth").getImmediate());return(r=>new Ab(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Un(Yy,Jy,Rb(t)),Un(Yy,Jy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=5*60,kb=M0("authIdTokenMaxAge")||Pb;let Zy=null;const xb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kb)return;const i=n==null?void 0:n.token;Zy!==i&&(Zy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Nb(t=Vf()){const e=Ju(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nN(t,{popupRedirectResolver:Sb,persistence:[LN,IN,Jw]}),r=M0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=xb(s.toString());wN(n,o,()=>o(n.currentUser)),vN(n,a=>o(a))}}const i=O0("auth");return i&&iN(n,`http://${i}`),n}function bb(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Qx({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=zn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",bb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cb("Browser");const Db={apiKey:"AIzaSyDZhYai747LR21Vla2_JSkzp15YnUw4RQM",authDomain:"miboda-888a3.firebaseapp.com",projectId:"miboda-888a3",storageBucket:"miboda-888a3.appspot.com",messagingSenderId:"802409922716",appId:"1:802409922716:web:689cc8e6b129b381066d59",measurementId:"G-9PQ0SRB4H3"},Rp=B0(Db),Pu=vx(Rp),Vl=$P(Rp),Ob=Nb(Rp),sE=({src:t,placeholder:e,alt:n,className:r})=>{const[i,s]=X.useState(e);return X.useEffect(()=>{const o=new Image;o.src=t,o.onload=()=>{s(t)}},[t]),W.jsx("img",{src:i,alt:n,className:`${r} ${i===e?"blur-sm":"blur-0"} transition-all duration-500`})},oE=({photo:t,onClose:e,photos:n,onDeletePhoto:r,isPublic:i=!1})=>{const[s,o]=X.useState(t),[a,u]=X.useState(1);X.useEffect(()=>{const f=y=>{y.key==="Escape"&&e(),y.key==="ArrowLeft"&&c(-1),y.key==="ArrowRight"&&c(1)};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[s]);const c=f=>{const E=(n.findIndex(k=>k.id===s.id)+f+n.length)%n.length;o(n[E]),u(1)},h=f=>{u(y=>Math.max(.5,Math.min(3,y+f)))},d=()=>{i||(r(s.id),n.length>1?c(1):e())};return W.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:W.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[W.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white",children:W.jsx(wA,{size:24})}),W.jsx("button",{onClick:()=>c(-1),className:"absolute left-4 text-white",children:W.jsx(yA,{size:24})}),W.jsx("button",{onClick:()=>c(1),className:"absolute right-4 text-white",children:W.jsx(_A,{size:24})}),W.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:[W.jsx("button",{onClick:()=>h(.1),className:"bg-white rounded-full p-2",children:W.jsx(EA,{size:20})}),W.jsx("button",{onClick:()=>h(-.1),className:"bg-white rounded-full p-2",children:W.jsx(TA,{size:20})}),!i&&W.jsx("button",{onClick:d,className:"bg-red-500 text-white rounded-full p-2",children:W.jsx(k0,{size:20})})]}),W.jsx("img",{src:s.url,alt:"Foto de boda",className:"max-w-full max-h-full object-contain transition-transform duration-200 ease-in-out",style:{transform:`scale(${a})`}}),W.jsx("div",{className:"absolute bottom-16 left-1/2 transform -translate-x-1/2 bg-white bg-opacity-75 px-4 py-2 rounded-full",children:s.category})]})})};function Lb(){const[t,e]=X.useState([]),[n,r]=X.useState(null),[i,s]=X.useState(null);X.useEffect(()=>{(async()=>{const h=(await lw(bd(Vl,"photos"))).docs.map(d=>({id:d.id,url:d.data().url,category:d.data().category||"Sin categora",thumbnailUrl:d.data().thumbnailUrl}));e(h)})()},[]);const o=["Ceremonia","Fiesta","Invitados","Detalles","Sin categora"],a=n?t.filter(u=>u.category===n):t;return W.jsxs("div",{className:"min-h-screen bg-gray-100",children:[W.jsx("header",{className:"bg-white shadow",children:W.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[W.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[W.jsx(C0,{className:"mr-2"}),"Nuestro Casamiento"]}),W.jsxs(R0,{to:"/login",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",children:[W.jsx(P0,{className:"mr-2"}),"Iniciar Sesin"]})]})}),W.jsx("main",{children:W.jsxs("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[W.jsxs("div",{className:"mb-4 flex space-x-2 overflow-x-auto pb-2",children:[W.jsx("button",{onClick:()=>r(null),className:`px-4 py-2 rounded-full ${n===null?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Todas"}),o.map(u=>W.jsx("button",{onClick:()=>r(u),className:`px-4 py-2 rounded-full ${n===u?"bg-blue-500 text-white":"bg-gray-200"}`,children:u},u))]}),W.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:a.map(u=>W.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden cursor-pointer",onClick:()=>s(u),children:[W.jsx(sE,{src:u.url,placeholder:u.thumbnailUrl||u.url,alt:"Foto de boda",className:"w-full h-64 object-cover"}),W.jsx("div",{className:"p-2 text-sm text-gray-600",children:u.category})]},u.id))})]})}),i&&W.jsx(oE,{photo:i,onClose:()=>s(null),photos:a,onDeletePhoto:()=>{},isPublic:!0})]})}function Vb(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function aE(t,e){return new Promise(function(n,r){let i;return Mb(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const Mb=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const u=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const c=o+10;let h;switch(s.getUint16(c)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,h)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(c+4,h),f=c+d+2+12*s.getUint16(c+d,h);for(let y=c+d+2;y<f;y+=12)if(s.getUint16(y,h)==274){if(s.getUint16(y+2,h)!==3)return n("Orientation data type is invalid");if(s.getUint32(y+4,h)!==1)return n("Orientation data count is invalid");s.setUint16(y+8,1,h);break}return e(i.slice(o,o+2+u))}o+=2+u}return e(new Blob)}),r.readAsArrayBuffer(t)});var ku={},Ub={get exports(){return ku},set exports(t){ku=t}};(function(t){var e,n,r={};Ub.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,u=0,c={},h=new Uint8Array(i),d=h.length-4;a(h,d)!=101010256;)d--;u=d,u+=4;var f=o(h,u+=4);o(h,u+=2);var y=a(h,u+=2),E=a(h,u+=4);u+=4,u=E;for(var k=0;k<f;k++){a(h,u),u+=4,u+=4,u+=4,a(h,u+=4),y=a(h,u+=4);var x=a(h,u+=4),v=o(h,u+=4),A=o(h,u+2),C=o(h,u+4);u+=6;var D=a(h,u+=8);u+=4,u+=v+A+C,r._readLocal(h,D,c,y,x,s)}return c},r._readLocal=function(i,s,o,a,u,c){var h=r.bin.readUshort,d=r.bin.readUint;d(i,s),h(i,s+=4),h(i,s+=2);var f=h(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var y=h(i,s+=8),E=h(i,s+=2);s+=2;var k=r.bin.readUTF8(i,s,y);if(s+=y,s+=E,c)o[k]={size:u,csize:a};else{var x=new Uint8Array(i.buffer,s);if(f==0)o[k]=new Uint8Array(x.buffer.slice(s,s+a));else{if(f!=8)throw"unknown compression method: "+f;var v=new Uint8Array(u);r.inflateRaw(x,v),o[k]=v}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var u=r.adler(i,0,i.length);return a[o+0]=u>>>24&255,a[o+1]=u>>>16&255,a[o+2]=u>>>8&255,a[o+3]=u>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,u=r.bin.writeUshort,c={};for(var h in i){var d=!r._noNeed(h)&&!s,f=i[h],y=r.crc.crc(f,0,f.length);c[h]={cpr:d,usize:f.length,crc:y,file:d?r.deflateRaw(f):f}}for(var h in c)o+=c[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var E=new Uint8Array(o),k=0,x=[];for(var h in c){var v=c[h];x.push(k),k=r._writeHeader(E,k,h,v,0)}var A=0,C=k;for(var h in c)v=c[h],x.push(k),k=r._writeHeader(E,k,h,v,1,x[A++]);var D=k-C;return a(E,k,101010256),k+=4,u(E,k+=4,A),u(E,k+=2,A),a(E,k+=2,D),a(E,k+=4,C),k+=4,k+=2,E.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,u,c){var h=r.bin.writeUint,d=r.bin.writeUshort,f=a.file;return h(i,s,u==0?67324752:33639248),s+=4,u==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,a.cpr?8:0),h(i,s+=2,0),h(i,s+=4,a.crc),h(i,s+=4,f.length),h(i,s+=4,a.usize),d(i,s+=4,r.bin.sizeUTF8(o)),d(i,s+=2,0),s+=2,u==1&&(s+=2,s+=2,h(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,o),u==0&&(i.set(f,s),s+=f.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var u=0;u<a;u++)i=r.crc.table[255&(i^s[o+u])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,u=0,c=s,h=s+o;c<h;){for(var d=Math.min(c+5552,h);c<d;)u+=a+=i[c++];a%=65521,u%=65521}return u<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",u=0;u<o;u++)a+=String.fromCharCode(i[s+u]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,u="",c=0;c<o;c++)u+="%"+r.bin.pad(i[s+c].toString(16));try{a=decodeURIComponent(u)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,u=0,c=0;c<a;c++){var h=o.charCodeAt(c);if(!(4294967168&h))i[s+u]=h,u++;else if(!(4294965248&h))i[s+u]=192|h>>6,i[s+u+1]=128|h>>0&63,u+=2;else if(!(4294901760&h))i[s+u]=224|h>>12,i[s+u+1]=128|h>>6&63,i[s+u+2]=128|h>>0&63,u+=3;else{if(4292870144&h)throw"e";i[s+u]=240|h>>18,i[s+u+1]=128|h>>12&63,i[s+u+2]=128|h>>6&63,i[s+u+3]=128|h>>0&63,u+=4}}return u},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var u=i.charCodeAt(a);if(!(4294967168&u))o++;else if(!(4294965248&u))o+=2;else if(!(4294901760&u))o+=3;else{if(4292870144&u)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,h=r.F._goodIndex;r.F._hash;var d=r.F._putsE,f=0,y=o<<3,E=0,k=i.length;if(a==0){for(;f<k;)d(s,y,f+(I=Math.min(65535,k-f))==k?1:0),y=r.F._copyExact(i,f,I,s,y+8),f+=I;return y>>>3}var x=c.lits,v=c.strt,A=c.prev,C=0,D=0,V=0,b=0,S=0,m=0;for(k>2&&(v[m=r.F._hash(i,0)]=0),f=0;f<k;f++){if(S=m,f+1<k-2){m=r.F._hash(i,f+1);var g=f+1&32767;A[g]=v[m],v[m]=g}if(E<=f){(C>14e3||D>26697)&&k-f>100&&(E<f&&(x[C]=f-E,C+=2,E=f),y=r.F._writeBlock(f==k-1||E==k?1:0,x,C,b,i,V,f-V,s,y),C=D=b=0,V=f);var w=0;f<k-2&&(w=r.F._bestMatch(i,f,A,S,Math.min(u[2],k-f),u[3]));var I=w>>>16,R=65535&w;if(w!=0){R=65535&w;var T=h(I=w>>>16,c.of0);c.lhst[257+T]++;var L=h(R,c.df0);c.dhst[L]++,b+=c.exb[T]+c.dxb[L],x[C]=I<<23|f-E,x[C+1]=R<<16|T<<8|L,C+=2,E=f+I}else c.lhst[i[f]]++;D++}}for(V==f&&i.length!=0||(E<f&&(x[C]=f-E,C+=2,E=f),y=r.F._writeBlock(1,x,C,b,i,V,f-V,s,y),C=0,D=0,C=D=b=0,V=f);7&y;)y++;return y>>>3},r.F._bestMatch=function(i,s,o,a,u,c){var h=32767&s,d=o[h],f=h-d+32768&32767;if(d==h||a!=r.F._hash(i,s-f))return 0;for(var y=0,E=0,k=Math.min(32767,s);f<=k&&--c!=0&&d!=h;){if(y==0||i[s+y]==i[s+y-f]){var x=r.F._howLong(i,s,f);if(x>y){if(E=f,(y=x)>=u)break;f+2<x&&(x=f+2);for(var v=0,A=0;A<x-2;A++){var C=s-f+A+32768&32767,D=C-o[C]+32768&32767;D>v&&(v=D,d=C)}}}f+=(h=d)-(d=o[h])+32768&32767}return y<<16|E},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,u=Math.min(i.length,s+258);for(s+=3;s<u&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,u,c,h,d,f){var y,E,k,x,v,A,C,D,V,b=r.F.U,S=r.F._putsF,m=r.F._putsE;b.lhst[256]++,E=(y=r.F.getTrees())[0],k=y[1],x=y[2],v=y[3],A=y[4],C=y[5],D=y[6],V=y[7];var g=32+(f+3&7?8-(f+3&7):0)+(h<<3),w=a+r.F.contSize(b.fltree,b.lhst)+r.F.contSize(b.fdtree,b.dhst),I=a+r.F.contSize(b.ltree,b.lhst)+r.F.contSize(b.dtree,b.dhst);I+=14+3*C+r.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var R=0;R<286;R++)b.lhst[R]=0;for(R=0;R<30;R++)b.dhst[R]=0;for(R=0;R<19;R++)b.ihst[R]=0;var T=g<w&&g<I?0:w<I?1:2;if(S(d,f,i),S(d,f+1,T),f+=3,T==0){for(;7&f;)f++;f=r.F._copyExact(u,c,h,d,f)}else{var L,B;if(T==1&&(L=b.fltree,B=b.fdtree),T==2){r.F.makeCodes(b.ltree,E),r.F.revCodes(b.ltree,E),r.F.makeCodes(b.dtree,k),r.F.revCodes(b.dtree,k),r.F.makeCodes(b.itree,x),r.F.revCodes(b.itree,x),L=b.ltree,B=b.dtree,m(d,f,v-257),m(d,f+=5,A-1),m(d,f+=5,C-4),f+=4;for(var O=0;O<C;O++)m(d,f+3*O,b.itree[1+(b.ordr[O]<<1)]);f+=3*C,f=r.F._codeTiny(D,b.itree,d,f),f=r.F._codeTiny(V,b.itree,d,f)}for(var N=c,U=0;U<o;U+=2){for(var M=s[U],j=M>>>23,J=N+(8388607&M);N<J;)f=r.F._writeLit(u[N++],L,d,f);if(j!=0){var H=s[U+1],Y=H>>16,K=H>>8&255,$=255&H;m(d,f=r.F._writeLit(257+K,L,d,f),j-b.of0[K]),f+=b.exb[K],S(d,f=r.F._writeLit($,B,d,f),Y-b.df0[$]),f+=b.dxb[$],N+=j}}f=r.F._writeLit(256,L,d,f)}return f},r.F._copyExact=function(i,s,o,a,u){var c=u>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(i.buffer,s,o),c),u+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],u=r.F._lenCodes(i.ltree,a),c=[],h=r.F._lenCodes(i.dtree,c),d=0;d<a.length;d+=2)i.ihst[a[d]]++;for(d=0;d<c.length;d+=2)i.ihst[c[d]]++;for(var f=r.F._hufTree(i.ihst,i.itree,7),y=19;y>4&&i.itree[1+(i.ordr[y-1]<<1)]==0;)y--;return[s,o,f,u,h,y,a,c]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var u=0;u<i.length;u+=2){var c=i[u],h=i[u+1];a=r.F._writeLit(c,s,o,a);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,h,d),a+=d)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var u=i[a+1],c=a+3<o?i[a+3]:-1,h=a+5<o?i[a+5]:-1,d=a==0?-1:i[a-1];if(u==0&&c==u&&h==u){for(var f=a+5;f+2<o&&i[f+2]==u;)f+=2;(y=Math.min(f+1-a>>>1,138))<11?s.push(17,y-3):s.push(18,y-11),a+=2*y-2}else if(u==d&&c==u&&h==u){for(f=a+5;f+2<o&&i[f+2]==u;)f+=2;var y=Math.min(f+1-a>>>1,6);s.push(16,y-3),a+=2*y-2}else s.push(u,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],u=i.length,c=s.length,h=0;for(h=0;h<c;h+=2)s[h]=0,s[h+1]=0;for(h=0;h<u;h++)i[h]!=0&&a.push({lit:h,f:i[h]});var d=a.length,f=a.slice(0);if(d==0)return 0;if(d==1){var y=a[0].lit;return f=y==0?1:0,s[1+(y<<1)]=1,s[1+(f<<1)]=1,1}a.sort(function(D,V){return D.f-V.f});var E=a[0],k=a[1],x=0,v=1,A=2;for(a[0]={lit:-1,f:E.f+k.f,l:E,r:k,d:0};v!=d-1;)E=x!=v&&(A==d||a[x].f<a[A].f)?a[x++]:a[A++],k=x!=v&&(A==d||a[x].f<a[A].f)?a[x++]:a[A++],a[v++]={lit:-1,f:E.f+k.f,l:E,r:k};var C=r.F.setDepth(a[v-1],0);for(C>o&&(r.F.restrictDepth(f,o,C),C=o),h=0;h<d;h++)s[1+(f[h].lit<<1)]=f[h].d;return C},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,u=1<<o-s,c=0;for(i.sort(function(d,f){return f.d==d.d?d.f-f.f:f.d-d.d}),a=0;a<i.length&&i[a].d>s;a++){var h=i[a].d;i[a].d=s,c+=u-(1<<o-h)}for(c>>>=o-s;c>0;)(h=i[a].d)<s?(i[a].d++,c-=1<<s-h-1):a++;for(;a>=0;a--)i[a].d==s&&c<0&&(i[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,u=a._bitsF,c=a._bitsE,h=a._decodeTiny,d=a.makeCodes,f=a.codes2map,y=a._get17,E=a.U,k=s==null;k&&(s=new o(i.length>>>2<<3));for(var x,v,A=0,C=0,D=0,V=0,b=0,S=0,m=0,g=0,w=0;A==0;)if(A=u(i,w,1),C=u(i,w+1,2),w+=3,C!=0){if(k&&(s=r.F._check(s,g+(1<<17))),C==1&&(x=E.flmap,v=E.fdmap,S=511,m=31),C==2){D=c(i,w,5)+257,V=c(i,w+5,5)+1,b=c(i,w+10,4)+4,w+=14;for(var I=0;I<38;I+=2)E.itree[I]=0,E.itree[I+1]=0;var R=1;for(I=0;I<b;I++){var T=c(i,w+3*I,3);E.itree[1+(E.ordr[I]<<1)]=T,T>R&&(R=T)}w+=3*b,d(E.itree,R),f(E.itree,R,E.imap),x=E.lmap,v=E.dmap,w=h(E.imap,(1<<R)-1,D+V,i,w,E.ttree);var L=a._copyOut(E.ttree,0,D,E.ltree);S=(1<<L)-1;var B=a._copyOut(E.ttree,D,V,E.dtree);m=(1<<B)-1,d(E.ltree,L),f(E.ltree,L,x),d(E.dtree,B),f(E.dtree,B,v)}for(;;){var O=x[y(i,w)&S];w+=15&O;var N=O>>>4;if(!(N>>>8))s[g++]=N;else{if(N==256)break;var U=g+N-254;if(N>264){var M=E.ldef[N-257];U=g+(M>>>3)+c(i,w,7&M),w+=7&M}var j=v[y(i,w)&m];w+=15&j;var J=j>>>4,H=E.ddef[J],Y=(H>>>4)+u(i,w,15&H);for(w+=15&H,k&&(s=r.F._check(s,g+(1<<17)));g<U;)s[g]=s[g++-Y],s[g]=s[g++-Y],s[g]=s[g++-Y],s[g]=s[g++-Y];g=U}}}else{7&w&&(w+=8-(7&w));var K=4+(w>>>3),$=i[K-4]|i[K-3]<<8;k&&(s=r.F._check(s,g+$)),s.set(new o(i.buffer,i.byteOffset+K,$),g),w=K+$<<3,g+=$}return s.length==g?s:s.slice(0,g)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,u,c){for(var h=r.F._bitsE,d=r.F._get17,f=0;f<o;){var y=i[d(a,u)&s];u+=15&y;var E=y>>>4;if(E<=15)c[f]=E,f++;else{var k=0,x=0;E==16?(x=3+h(a,u,2),u+=2,k=c[f-1]):E==17?(x=3+h(a,u,3),u+=3):E==18&&(x=11+h(a,u,7),u+=7);for(var v=f+x;f<v;)c[f]=k,f++}}return u},r.F._copyOut=function(i,s,o,a){for(var u=0,c=0,h=a.length>>>1;c<o;){var d=i[c+s];a[c<<1]=0,a[1+(c<<1)]=d,d>u&&(u=d),c++}for(;c<h;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return u},r.F.makeCodes=function(i,s){for(var o,a,u,c,h=r.F.U,d=i.length,f=h.bl_count,y=0;y<=s;y++)f[y]=0;for(y=1;y<d;y+=2)f[i[y]]++;var E=h.next_code;for(o=0,f[0]=0,a=1;a<=s;a++)o=o+f[a-1]<<1,E[a]=o;for(u=0;u<d;u+=2)(c=i[u+1])!=0&&(i[u]=E[c],E[c]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,u=r.F.U.rev15,c=0;c<a;c+=2)if(i[c+1]!=0)for(var h=c>>1,d=i[c+1],f=h<<4|d,y=s-d,E=i[c]<<y,k=E+(1<<y);E!=k;)o[u[E]>>>15-s]=f,E++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,u=0;u<i.length;u+=2){var c=i[u]<<s-i[u+1];i[u]=o[c]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(u,c,h){for(;c--!=0;)u.push(0,h)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var Fb=Vb({__proto__:null,default:ku},[ku]);const vn=function(){var t={nextZero(h,d){for(;h[d]!=0;)d++;return d},readUshort:(h,d)=>h[d]<<8|h[d+1],writeUshort(h,d,f){h[d]=f>>8&255,h[d+1]=255&f},readUint:(h,d)=>16777216*h[d]+(h[d+1]<<16|h[d+2]<<8|h[d+3]),writeUint(h,d,f){h[d]=f>>24&255,h[d+1]=f>>16&255,h[d+2]=f>>8&255,h[d+3]=255&f},readASCII(h,d,f){let y="";for(let E=0;E<f;E++)y+=String.fromCharCode(h[d+E]);return y},writeASCII(h,d,f){for(let y=0;y<f.length;y++)h[d+y]=f.charCodeAt(y)},readBytes(h,d,f){const y=[];for(let E=0;E<f;E++)y.push(h[d+E]);return y},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,d,f){let y,E="";for(let k=0;k<f;k++)E+=`%${t.pad(h[d+k].toString(16))}`;try{y=decodeURIComponent(E)}catch{return t.readASCII(h,d,f)}return y}};function e(h,d,f,y){const E=d*f,k=s(y),x=Math.ceil(d*k/8),v=new Uint8Array(4*E),A=new Uint32Array(v.buffer),{ctype:C}=y,{depth:D}=y,V=t.readUshort;if(C==6){const M=E<<2;if(D==8)for(var b=0;b<M;b+=4)v[b]=h[b],v[b+1]=h[b+1],v[b+2]=h[b+2],v[b+3]=h[b+3];if(D==16)for(b=0;b<M;b++)v[b]=h[b<<1]}else if(C==2){const M=y.tabs.tRNS;if(M==null){if(D==8)for(b=0;b<E;b++){var S=3*b;A[b]=255<<24|h[S+2]<<16|h[S+1]<<8|h[S]}if(D==16)for(b=0;b<E;b++)S=6*b,A[b]=255<<24|h[S+4]<<16|h[S+2]<<8|h[S]}else{var m=M[0];const j=M[1],J=M[2];if(D==8)for(b=0;b<E;b++){var g=b<<2;S=3*b,A[b]=255<<24|h[S+2]<<16|h[S+1]<<8|h[S],h[S]==m&&h[S+1]==j&&h[S+2]==J&&(v[g+3]=0)}if(D==16)for(b=0;b<E;b++)g=b<<2,S=6*b,A[b]=255<<24|h[S+4]<<16|h[S+2]<<8|h[S],V(h,S)==m&&V(h,S+2)==j&&V(h,S+4)==J&&(v[g+3]=0)}}else if(C==3){const M=y.tabs.PLTE,j=y.tabs.tRNS,J=j?j.length:0;if(D==1)for(var w=0;w<f;w++){var I=w*x,R=w*d;for(b=0;b<d;b++){g=R+b<<2;var T=3*(L=h[I+(b>>3)]>>7-((7&b)<<0)&1);v[g]=M[T],v[g+1]=M[T+1],v[g+2]=M[T+2],v[g+3]=L<J?j[L]:255}}if(D==2)for(w=0;w<f;w++)for(I=w*x,R=w*d,b=0;b<d;b++)g=R+b<<2,T=3*(L=h[I+(b>>2)]>>6-((3&b)<<1)&3),v[g]=M[T],v[g+1]=M[T+1],v[g+2]=M[T+2],v[g+3]=L<J?j[L]:255;if(D==4)for(w=0;w<f;w++)for(I=w*x,R=w*d,b=0;b<d;b++)g=R+b<<2,T=3*(L=h[I+(b>>1)]>>4-((1&b)<<2)&15),v[g]=M[T],v[g+1]=M[T+1],v[g+2]=M[T+2],v[g+3]=L<J?j[L]:255;if(D==8)for(b=0;b<E;b++){var L;g=b<<2,T=3*(L=h[b]),v[g]=M[T],v[g+1]=M[T+1],v[g+2]=M[T+2],v[g+3]=L<J?j[L]:255}}else if(C==4){if(D==8)for(b=0;b<E;b++){g=b<<2;var B=h[O=b<<1];v[g]=B,v[g+1]=B,v[g+2]=B,v[g+3]=h[O+1]}if(D==16)for(b=0;b<E;b++){var O;g=b<<2,B=h[O=b<<2],v[g]=B,v[g+1]=B,v[g+2]=B,v[g+3]=h[O+2]}}else if(C==0)for(m=y.tabs.tRNS?y.tabs.tRNS:-1,w=0;w<f;w++){const M=w*x,j=w*d;if(D==1)for(var N=0;N<d;N++){var U=(B=255*(h[M+(N>>>3)]>>>7-(7&N)&1))==255*m?0:255;A[j+N]=U<<24|B<<16|B<<8|B}else if(D==2)for(N=0;N<d;N++)U=(B=85*(h[M+(N>>>2)]>>>6-((3&N)<<1)&3))==85*m?0:255,A[j+N]=U<<24|B<<16|B<<8|B;else if(D==4)for(N=0;N<d;N++)U=(B=17*(h[M+(N>>>1)]>>>4-((1&N)<<2)&15))==17*m?0:255,A[j+N]=U<<24|B<<16|B<<8|B;else if(D==8)for(N=0;N<d;N++)U=(B=h[M+N])==m?0:255,A[j+N]=U<<24|B<<16|B<<8|B;else if(D==16)for(N=0;N<d;N++)B=h[M+(N<<1)],U=V(h,M+(N<<1))==m?0:255,A[j+N]=U<<24|B<<16|B<<8|B}return v}function n(h,d,f,y){const E=s(h),k=Math.ceil(f*E/8),x=new Uint8Array((k+1+h.interlace)*y);return d=h.tabs.CgBI?i(d,x):r(d,x),h.interlace==0?d=o(d,h,0,f,y):h.interlace==1&&(d=function(A,C){const D=C.width,V=C.height,b=s(C),S=b>>3,m=Math.ceil(D*b/8),g=new Uint8Array(V*m);let w=0;const I=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],T=[8,8,8,4,4,2,2],L=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const N=T[B],U=L[B];let M=0,j=0,J=I[B];for(;J<V;)J+=N,j++;let H=R[B];for(;H<D;)H+=U,M++;const Y=Math.ceil(M*b/8);o(A,C,w,M,j);let K=0,$=I[B];for(;$<V;){let ne=R[B],de=w+K*Y<<3;for(;ne<D;){var O;if(b==1&&(O=(O=A[de>>3])>>7-(7&de)&1,g[$*m+(ne>>3)]|=O<<7-((7&ne)<<0)),b==2&&(O=(O=A[de>>3])>>6-(7&de)&3,g[$*m+(ne>>2)]|=O<<6-((3&ne)<<1)),b==4&&(O=(O=A[de>>3])>>4-(7&de)&15,g[$*m+(ne>>1)]|=O<<4-((1&ne)<<2)),b>=8){const ve=$*m+ne*S;for(let me=0;me<S;me++)g[ve+me]=A[(de>>3)+me]}de+=b,ne+=U}K++,$+=N}M*j!=0&&(w+=j*(1+Y)),B+=1}return g}(d,h)),d}function r(h,d){return i(new Uint8Array(h.buffer,2,h.length-6),d)}var i=function(){const h={H:{}};return h.H.N=function(d,f){const y=Uint8Array;let E,k,x=0,v=0,A=0,C=0,D=0,V=0,b=0,S=0,m=0;if(d[0]==3&&d[1]==0)return f||new y(0);const g=h.H,w=g.b,I=g.e,R=g.R,T=g.n,L=g.A,B=g.Z,O=g.m,N=f==null;for(N&&(f=new y(d.length>>>2<<5));x==0;)if(x=w(d,m,1),v=w(d,m+1,2),m+=3,v!=0){if(N&&(f=h.H.W(f,S+(1<<17))),v==1&&(E=O.J,k=O.h,V=511,b=31),v==2){A=I(d,m,5)+257,C=I(d,m+5,5)+1,D=I(d,m+10,4)+4,m+=14;let M=1;for(var U=0;U<38;U+=2)O.Q[U]=0,O.Q[U+1]=0;for(U=0;U<D;U++){const H=I(d,m+3*U,3);O.Q[1+(O.X[U]<<1)]=H,H>M&&(M=H)}m+=3*D,T(O.Q,M),L(O.Q,M,O.u),E=O.w,k=O.d,m=R(O.u,(1<<M)-1,A+C,d,m,O.v);const j=g.V(O.v,0,A,O.C);V=(1<<j)-1;const J=g.V(O.v,A,C,O.D);b=(1<<J)-1,T(O.C,j),L(O.C,j,E),T(O.D,J),L(O.D,J,k)}for(;;){const M=E[B(d,m)&V];m+=15&M;const j=M>>>4;if(!(j>>>8))f[S++]=j;else{if(j==256)break;{let J=S+j-254;if(j>264){const ne=O.q[j-257];J=S+(ne>>>3)+I(d,m,7&ne),m+=7&ne}const H=k[B(d,m)&b];m+=15&H;const Y=H>>>4,K=O.c[Y],$=(K>>>4)+w(d,m,15&K);for(m+=15&K;S<J;)f[S]=f[S++-$],f[S]=f[S++-$],f[S]=f[S++-$],f[S]=f[S++-$];S=J}}}}else{7&m&&(m+=8-(7&m));const M=4+(m>>>3),j=d[M-4]|d[M-3]<<8;N&&(f=h.H.W(f,S+j)),f.set(new y(d.buffer,d.byteOffset+M,j),S),m=M+j<<3,S+=j}return f.length==S?f:f.slice(0,S)},h.H.W=function(d,f){const y=d.length;if(f<=y)return d;const E=new Uint8Array(y<<1);return E.set(d,0),E},h.H.R=function(d,f,y,E,k,x){const v=h.H.e,A=h.H.Z;let C=0;for(;C<y;){const D=d[A(E,k)&f];k+=15&D;const V=D>>>4;if(V<=15)x[C]=V,C++;else{let b=0,S=0;V==16?(S=3+v(E,k,2),k+=2,b=x[C-1]):V==17?(S=3+v(E,k,3),k+=3):V==18&&(S=11+v(E,k,7),k+=7);const m=C+S;for(;C<m;)x[C]=b,C++}}return k},h.H.V=function(d,f,y,E){let k=0,x=0;const v=E.length>>>1;for(;x<y;){const A=d[x+f];E[x<<1]=0,E[1+(x<<1)]=A,A>k&&(k=A),x++}for(;x<v;)E[x<<1]=0,E[1+(x<<1)]=0,x++;return k},h.H.n=function(d,f){const y=h.H.m,E=d.length;let k,x,v,A;const C=y.j;for(var D=0;D<=f;D++)C[D]=0;for(D=1;D<E;D+=2)C[d[D]]++;const V=y.K;for(k=0,C[0]=0,x=1;x<=f;x++)k=k+C[x-1]<<1,V[x]=k;for(v=0;v<E;v+=2)A=d[v+1],A!=0&&(d[v]=V[A],V[A]++)},h.H.A=function(d,f,y){const E=d.length,k=h.H.m.r;for(let x=0;x<E;x+=2)if(d[x+1]!=0){const v=x>>1,A=d[x+1],C=v<<4|A,D=f-A;let V=d[x]<<D;const b=V+(1<<D);for(;V!=b;)y[k[V]>>>15-f]=C,V++}},h.H.l=function(d,f){const y=h.H.m.r,E=15-f;for(let k=0;k<d.length;k+=2){const x=d[k]<<f-d[k+1];d[k]=y[x]>>>E}},h.H.M=function(d,f,y){y<<=7&f;const E=f>>>3;d[E]|=y,d[E+1]|=y>>>8},h.H.I=function(d,f,y){y<<=7&f;const E=f>>>3;d[E]|=y,d[E+1]|=y>>>8,d[E+2]|=y>>>16},h.H.e=function(d,f,y){return(d[f>>>3]|d[1+(f>>>3)]<<8)>>>(7&f)&(1<<y)-1},h.H.b=function(d,f,y){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)&(1<<y)-1},h.H.Z=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)},h.H.i=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16|d[3+(f>>>3)]<<24)>>>(7&f)},h.H.m=function(){const d=Uint16Array,f=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=h.H.m;for(var f=0;f<32768;f++){let E=f;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,d.r[f]=(E>>>16|E<<16)>>>17}function y(E,k,x){for(;k--!=0;)E.push(0,x)}for(f=0;f<32;f++)d.q[f]=d.S[f]<<3|d.T[f],d.c[f]=d.p[f]<<4|d.z[f];y(d._,144,8),y(d._,112,9),y(d._,24,7),y(d._,8,8),h.H.n(d._,9),h.H.A(d._,9,d.J),h.H.l(d._,9),y(d.$,32,5),h.H.n(d.$,5),h.H.A(d.$,5,d.h),h.H.l(d.$,5),y(d.Q,19,0),y(d.C,286,0),y(d.D,30,0),y(d.v,320,0)}(),h.H.N}();function s(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,d,f,y,E){let k=s(d);const x=Math.ceil(y*k/8);let v,A;k=Math.ceil(k/8);let C=h[f],D=0;if(C>1&&(h[f]=[0,0,1][C-2]),C==3)for(D=k;D<x;D++)h[D+1]=h[D+1]+(h[D+1-k]>>>1)&255;for(let V=0;V<E;V++)if(v=f+V*x,A=v+V+1,C=h[A-1],D=0,C==0)for(;D<x;D++)h[v+D]=h[A+D];else if(C==1){for(;D<k;D++)h[v+D]=h[A+D];for(;D<x;D++)h[v+D]=h[A+D]+h[v+D-k]}else if(C==2)for(;D<x;D++)h[v+D]=h[A+D]+h[v+D-x];else if(C==3){for(;D<k;D++)h[v+D]=h[A+D]+(h[v+D-x]>>>1);for(;D<x;D++)h[v+D]=h[A+D]+(h[v+D-x]+h[v+D-k]>>>1)}else{for(;D<k;D++)h[v+D]=h[A+D]+a(0,h[v+D-x],0);for(;D<x;D++)h[v+D]=h[A+D]+a(h[v+D-k],h[v+D-x],h[v+D-k-x])}return h}function a(h,d,f){const y=h+d-f,E=y-h,k=y-d,x=y-f;return E*E<=k*k&&E*E<=x*x?h:k*k<=x*x?d:f}function u(h,d,f){f.width=t.readUint(h,d),d+=4,f.height=t.readUint(h,d),d+=4,f.depth=h[d],d++,f.ctype=h[d],d++,f.compress=h[d],d++,f.filter=h[d],d++,f.interlace=h[d],d++}function c(h,d,f,y,E,k,x,v,A){const C=Math.min(d,E),D=Math.min(f,k);let V=0,b=0;for(let B=0;B<D;B++)for(let O=0;O<C;O++)if(x>=0&&v>=0?(V=B*d+O<<2,b=(v+B)*E+x+O<<2):(V=(-v+B)*d-x+O<<2,b=B*E+O<<2),A==0)y[b]=h[V],y[b+1]=h[V+1],y[b+2]=h[V+2],y[b+3]=h[V+3];else if(A==1){var S=h[V+3]*.00392156862745098,m=h[V]*S,g=h[V+1]*S,w=h[V+2]*S,I=y[b+3]*(1/255),R=y[b]*I,T=y[b+1]*I,L=y[b+2]*I;const N=1-S,U=S+I*N,M=U==0?0:1/U;y[b+3]=255*U,y[b+0]=(m+R*N)*M,y[b+1]=(g+T*N)*M,y[b+2]=(w+L*N)*M}else if(A==2)S=h[V+3],m=h[V],g=h[V+1],w=h[V+2],I=y[b+3],R=y[b],T=y[b+1],L=y[b+2],S==I&&m==R&&g==T&&w==L?(y[b]=0,y[b+1]=0,y[b+2]=0,y[b+3]=0):(y[b]=m,y[b+1]=g,y[b+2]=w,y[b+3]=S);else if(A==3){if(S=h[V+3],m=h[V],g=h[V+1],w=h[V+2],I=y[b+3],R=y[b],T=y[b+1],L=y[b+2],S==I&&m==R&&g==T&&w==L)continue;if(S<220&&I>20)return!1}return!0}return{decode:function(d){const f=new Uint8Array(d);let y=8;const E=t,k=E.readUshort,x=E.readUint,v={tabs:{},frames:[]},A=new Uint8Array(f.length);let C,D=0,V=0;const b=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(f[S]!=b[S])throw"The input is not a PNG file!";for(;y<f.length;){const B=E.readUint(f,y);y+=4;const O=E.readASCII(f,y,4);if(y+=4,O=="IHDR")u(f,y,v);else if(O=="iCCP"){for(var m=y;f[m]!=0;)m++;E.readASCII(f,y,m-y),f[m+1];const N=f.slice(m+2,y+B);let U=null;try{U=r(N)}catch{U=i(N)}v.tabs[O]=U}else if(O=="CgBI")v.tabs[O]=f.slice(y,y+4);else if(O=="IDAT"){for(S=0;S<B;S++)A[D+S]=f[y+S];D+=B}else if(O=="acTL")v.tabs[O]={num_frames:x(f,y),num_plays:x(f,y+4)},C=new Uint8Array(f.length);else if(O=="fcTL"){V!=0&&((L=v.frames[v.frames.length-1]).data=n(v,C.slice(0,V),L.rect.width,L.rect.height),V=0);const N={x:x(f,y+12),y:x(f,y+16),width:x(f,y+4),height:x(f,y+8)};let U=k(f,y+22);U=k(f,y+20)/(U==0?100:U);const M={rect:N,delay:Math.round(1e3*U),dispose:f[y+24],blend:f[y+25]};v.frames.push(M)}else if(O=="fdAT"){for(S=0;S<B-4;S++)C[V+S]=f[y+S+4];V+=B-4}else if(O=="pHYs")v.tabs[O]=[E.readUint(f,y),E.readUint(f,y+4),f[y+8]];else if(O=="cHRM")for(v.tabs[O]=[],S=0;S<8;S++)v.tabs[O].push(E.readUint(f,y+4*S));else if(O=="tEXt"||O=="zTXt"){v.tabs[O]==null&&(v.tabs[O]={});var g=E.nextZero(f,y),w=E.readASCII(f,y,g-y),I=y+B-g-1;if(O=="tEXt")T=E.readASCII(f,g+1,I);else{var R=r(f.slice(g+2,g+2+I));T=E.readUTF8(R,0,R.length)}v.tabs[O][w]=T}else if(O=="iTXt"){v.tabs[O]==null&&(v.tabs[O]={}),g=0,m=y,g=E.nextZero(f,m),w=E.readASCII(f,m,g-m);const N=f[m=g+1];var T;f[m+1],m+=2,g=E.nextZero(f,m),E.readASCII(f,m,g-m),m=g+1,g=E.nextZero(f,m),E.readUTF8(f,m,g-m),I=B-((m=g+1)-y),N==0?T=E.readUTF8(f,m,I):(R=r(f.slice(m,m+I)),T=E.readUTF8(R,0,R.length)),v.tabs[O][w]=T}else if(O=="PLTE")v.tabs[O]=E.readBytes(f,y,B);else if(O=="hIST"){const N=v.tabs.PLTE.length/3;for(v.tabs[O]=[],S=0;S<N;S++)v.tabs[O].push(k(f,y+2*S))}else if(O=="tRNS")v.ctype==3?v.tabs[O]=E.readBytes(f,y,B):v.ctype==0?v.tabs[O]=k(f,y):v.ctype==2&&(v.tabs[O]=[k(f,y),k(f,y+2),k(f,y+4)]);else if(O=="gAMA")v.tabs[O]=E.readUint(f,y)/1e5;else if(O=="sRGB")v.tabs[O]=f[y];else if(O=="bKGD")v.ctype==0||v.ctype==4?v.tabs[O]=[k(f,y)]:v.ctype==2||v.ctype==6?v.tabs[O]=[k(f,y),k(f,y+2),k(f,y+4)]:v.ctype==3&&(v.tabs[O]=f[y]);else if(O=="IEND")break;y+=B,E.readUint(f,y),y+=4}var L;return V!=0&&((L=v.frames[v.frames.length-1]).data=n(v,C.slice(0,V),L.rect.width,L.rect.height)),v.data=n(v,A,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(d){const f=d.width,y=d.height;if(d.tabs.acTL==null)return[e(d.data,f,y,d).buffer];const E=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const k=f*y*4,x=new Uint8Array(k),v=new Uint8Array(k),A=new Uint8Array(k);for(let D=0;D<d.frames.length;D++){const V=d.frames[D],b=V.rect.x,S=V.rect.y,m=V.rect.width,g=V.rect.height,w=e(V.data,m,g,d);if(D!=0)for(var C=0;C<k;C++)A[C]=x[C];if(V.blend==0?c(w,m,g,x,f,y,b,S,0):V.blend==1&&c(w,m,g,x,f,y,b,S,1),E.push(x.buffer.slice(0)),V.dispose!=0){if(V.dispose==1)c(v,m,g,x,f,y,b,S,0);else if(V.dispose==2)for(C=0;C<k;C++)x[C]=A[C]}}return E},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=vn,{_bin:e}=vn,n=vn._paeth;var r={table:function(){const m=new Uint32Array(256);for(let g=0;g<256;g++){let w=g;for(let I=0;I<8;I++)1&w?w=3988292384^w>>>1:w>>>=1;m[g]=w}return m}(),update(m,g,w,I){for(let R=0;R<I;R++)m=r.table[255&(m^g[w+R])]^m>>>8;return m},crc:(m,g,w)=>4294967295^r.update(4294967295,m,g,w)};function i(m,g,w,I){g[w]+=m[0]*I>>4,g[w+1]+=m[1]*I>>4,g[w+2]+=m[2]*I>>4,g[w+3]+=m[3]*I>>4}function s(m){return Math.max(0,Math.min(255,m))}function o(m,g){const w=m[0]-g[0],I=m[1]-g[1],R=m[2]-g[2],T=m[3]-g[3];return w*w+I*I+R*R+T*T}function a(m,g,w,I,R,T,L){L==null&&(L=1);const B=I.length,O=[];for(var N=0;N<B;N++){const $=I[N];O.push([$>>>0&255,$>>>8&255,$>>>16&255,$>>>24&255])}for(N=0;N<B;N++){let $=4294967295;for(var U=0,M=0;M<B;M++){var j=o(O[N],O[M]);M!=N&&j<$&&($=j,U=M)}}const J=new Uint32Array(R.buffer),H=new Int16Array(g*w*4),Y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(N=0;N<Y.length;N++)Y[N]=255*((Y[N]+.5)/16-.5);for(let $=0;$<w;$++)for(let ne=0;ne<g;ne++){var K;N=4*($*g+ne),L!=2?K=[s(m[N]+H[N]),s(m[N+1]+H[N+1]),s(m[N+2]+H[N+2]),s(m[N+3]+H[N+3])]:(j=Y[4*(3&$)+(3&ne)],K=[s(m[N]+j),s(m[N+1]+j),s(m[N+2]+j),s(m[N+3]+j)]),U=0;let de=16777215;for(M=0;M<B;M++){const _e=o(K,O[M]);_e<de&&(de=_e,U=M)}const ve=O[U],me=[K[0]-ve[0],K[1]-ve[1],K[2]-ve[2],K[3]-ve[3]];L==1&&(ne!=g-1&&i(me,H,N+4,7),$!=w-1&&(ne!=0&&i(me,H,N+4*g-4,3),i(me,H,N+4*g,5),ne!=g-1&&i(me,H,N+4*g+4,1))),T[N>>2]=U,J[N>>2]=I[U]}}function u(m,g,w,I,R){R==null&&(R={});const{crc:T}=r,L=e.writeUint,B=e.writeUshort,O=e.writeASCII;let N=8;const U=m.frames.length>1;let M,j=!1,J=33+(U?20:0);if(R.sRGB!=null&&(J+=13),R.pHYs!=null&&(J+=21),R.iCCP!=null&&(M=pako.deflate(R.iCCP),J+=21+M.length+4),m.ctype==3){for(var H=m.plte.length,Y=0;Y<H;Y++)m.plte[Y]>>>24!=255&&(j=!0);J+=8+3*H+4+(j?8+1*H+4:0)}for(var K=0;K<m.frames.length;K++)U&&(J+=38),J+=(ve=m.frames[K]).cimg.length+12,K!=0&&(J+=4);J+=12;const $=new Uint8Array(J),ne=[137,80,78,71,13,10,26,10];for(Y=0;Y<8;Y++)$[Y]=ne[Y];if(L($,N,13),N+=4,O($,N,"IHDR"),N+=4,L($,N,g),N+=4,L($,N,w),N+=4,$[N]=m.depth,N++,$[N]=m.ctype,N++,$[N]=0,N++,$[N]=0,N++,$[N]=0,N++,L($,N,T($,N-17,17)),N+=4,R.sRGB!=null&&(L($,N,1),N+=4,O($,N,"sRGB"),N+=4,$[N]=R.sRGB,N++,L($,N,T($,N-5,5)),N+=4),R.iCCP!=null){const me=13+M.length;L($,N,me),N+=4,O($,N,"iCCP"),N+=4,O($,N,"ICC profile"),N+=11,N+=2,$.set(M,N),N+=M.length,L($,N,T($,N-(me+4),me+4)),N+=4}if(R.pHYs!=null&&(L($,N,9),N+=4,O($,N,"pHYs"),N+=4,L($,N,R.pHYs[0]),N+=4,L($,N,R.pHYs[1]),N+=4,$[N]=R.pHYs[2],N++,L($,N,T($,N-13,13)),N+=4),U&&(L($,N,8),N+=4,O($,N,"acTL"),N+=4,L($,N,m.frames.length),N+=4,L($,N,R.loop!=null?R.loop:0),N+=4,L($,N,T($,N-12,12)),N+=4),m.ctype==3){for(L($,N,3*(H=m.plte.length)),N+=4,O($,N,"PLTE"),N+=4,Y=0;Y<H;Y++){const me=3*Y,_e=m.plte[Y],Ae=255&_e,Ve=_e>>>8&255,mn=_e>>>16&255;$[N+me+0]=Ae,$[N+me+1]=Ve,$[N+me+2]=mn}if(N+=3*H,L($,N,T($,N-3*H-4,3*H+4)),N+=4,j){for(L($,N,H),N+=4,O($,N,"tRNS"),N+=4,Y=0;Y<H;Y++)$[N+Y]=m.plte[Y]>>>24&255;N+=H,L($,N,T($,N-H-4,H+4)),N+=4}}let de=0;for(K=0;K<m.frames.length;K++){var ve=m.frames[K];U&&(L($,N,26),N+=4,O($,N,"fcTL"),N+=4,L($,N,de++),N+=4,L($,N,ve.rect.width),N+=4,L($,N,ve.rect.height),N+=4,L($,N,ve.rect.x),N+=4,L($,N,ve.rect.y),N+=4,B($,N,I[K]),N+=2,B($,N,1e3),N+=2,$[N]=ve.dispose,N++,$[N]=ve.blend,N++,L($,N,T($,N-30,30)),N+=4);const me=ve.cimg;L($,N,(H=me.length)+(K==0?0:4)),N+=4;const _e=N;O($,N,K==0?"IDAT":"fdAT"),N+=4,K!=0&&(L($,N,de++),N+=4),$.set(me,N),N+=H,L($,N,T($,_e,N-_e)),N+=4}return L($,N,0),N+=4,O($,N,"IEND"),N+=4,L($,N,T($,N-4,4)),N+=4,$.buffer}function c(m,g,w){for(let I=0;I<m.frames.length;I++){const R=m.frames[I];R.rect.width;const T=R.rect.height,L=new Uint8Array(T*R.bpl+T);R.cimg=y(R.img,T,R.bpp,R.bpl,L,g,w)}}function h(m,g,w,I,R){const T=R[0],L=R[1],B=R[2],O=R[3],N=R[4],U=R[5];let M=6,j=8,J=255;for(var H=0;H<m.length;H++){const et=new Uint8Array(m[H]);for(var Y=et.length,K=0;K<Y;K+=4)J&=et[K+3]}const $=J!=255,ne=function(Ce,Ie,Qe,tt,Me,bt){const De=[];for(var we=0;we<Ce.length;we++){const ot=new Uint8Array(Ce[we]),Kt=new Uint32Array(ot.buffer);var wt;let at=0,sn=0,Gt=Ie,gn=Qe,Hs=tt?1:0;if(we!=0){const _c=bt||tt||we==1||De[we-2].dispose!=0?1:2;let ii=0,Ws=1e9;for(let pr=0;pr<_c;pr++){var ke=new Uint8Array(Ce[we-1-pr]);const si=new Uint32Array(Ce[we-1-pr]);let on=Ie,an=Qe,jt=-1,mr=-1;for(let xn=0;xn<Qe;xn++)for(let Qt=0;Qt<Ie;Qt++)Kt[qe=xn*Ie+Qt]!=si[qe]&&(Qt<on&&(on=Qt),Qt>jt&&(jt=Qt),xn<an&&(an=xn),xn>mr&&(mr=xn));jt==-1&&(on=an=jt=mr=0),Me&&((1&on)==1&&on--,(1&an)==1&&an--);const oi=(jt-on+1)*(mr-an+1);oi<Ws&&(Ws=oi,ii=pr,at=on,sn=an,Gt=jt-on+1,gn=mr-an+1)}ke=new Uint8Array(Ce[we-1-ii]),ii==1&&(De[we-1].dispose=2),wt=new Uint8Array(Gt*gn*4),t(ke,Ie,Qe,wt,Gt,gn,-at,-sn,0),Hs=t(ot,Ie,Qe,wt,Gt,gn,-at,-sn,3)?1:0,Hs==1?f(ot,Ie,Qe,wt,{x:at,y:sn,width:Gt,height:gn}):t(ot,Ie,Qe,wt,Gt,gn,-at,-sn,0)}else wt=ot.slice(0);De.push({rect:{x:at,y:sn,width:Gt,height:gn},img:wt,blend:Hs,dispose:0})}if(tt)for(we=0;we<De.length;we++){if((kn=De[we]).blend==1)continue;const ot=kn.rect,Kt=De[we-1].rect,at=Math.min(ot.x,Kt.x),sn=Math.min(ot.y,Kt.y),Gt={x:at,y:sn,width:Math.max(ot.x+ot.width,Kt.x+Kt.width)-at,height:Math.max(ot.y+ot.height,Kt.y+Kt.height)-sn};De[we-1].dispose=1,we-1!=0&&d(Ce,Ie,Qe,De,we-1,Gt,Me),d(Ce,Ie,Qe,De,we,Gt,Me)}let Xe=0;if(Ce.length!=1)for(var qe=0;qe<De.length;qe++){var kn;Xe+=(kn=De[qe]).rect.width*kn.rect.height}return De}(m,g,w,T,L,B),de={},ve=[],me=[];if(I!=0){const et=[];for(K=0;K<ne.length;K++)et.push(ne[K].img.buffer);const Ce=function(Me){let bt=0;for(var De=0;De<Me.length;De++)bt+=Me[De].byteLength;const we=new Uint8Array(bt);let wt=0;for(De=0;De<Me.length;De++){const ke=new Uint8Array(Me[De]),Xe=ke.length;for(let qe=0;qe<Xe;qe+=4){let kn=ke[qe],ot=ke[qe+1],Kt=ke[qe+2];const at=ke[qe+3];at==0&&(kn=ot=Kt=0),we[wt+qe]=kn,we[wt+qe+1]=ot,we[wt+qe+2]=Kt,we[wt+qe+3]=at}wt+=Xe}return we.buffer}(et),Ie=k(Ce,I);for(K=0;K<Ie.plte.length;K++)ve.push(Ie.plte[K].est.rgba);let Qe=0;for(K=0;K<ne.length;K++){const tt=(Ae=ne[K]).img.length;var _e=new Uint8Array(Ie.inds.buffer,Qe>>2,tt>>2);me.push(_e);const Me=new Uint8Array(Ie.abuf,Qe,tt);U&&a(Ae.img,Ae.rect.width,Ae.rect.height,ve,Me,_e),Ae.img.set(Me),Qe+=tt}}else for(H=0;H<ne.length;H++){var Ae=ne[H];const et=new Uint32Array(Ae.img.buffer);var Ve=Ae.rect.width;for(Y=et.length,_e=new Uint8Array(Y),me.push(_e),K=0;K<Y;K++){const Ce=et[K];if(K!=0&&Ce==et[K-1])_e[K]=_e[K-1];else if(K>Ve&&Ce==et[K-Ve])_e[K]=_e[K-Ve];else{let Ie=de[Ce];if(Ie==null&&(de[Ce]=Ie=ve.length,ve.push(Ce),ve.length>=300))break;_e[K]=Ie}}}const mn=ve.length;for(mn<=256&&N==0&&(j=mn<=2?1:mn<=4?2:mn<=16?4:8,j=Math.max(j,O)),H=0;H<ne.length;H++){(Ae=ne[H]).rect.x,Ae.rect.y,Ve=Ae.rect.width;const et=Ae.rect.height;let Ce=Ae.img;new Uint32Array(Ce.buffer);let Ie=4*Ve,Qe=4;if(mn<=256&&N==0){Ie=Math.ceil(j*Ve/8);var Ft=new Uint8Array(Ie*et);const tt=me[H];for(let Me=0;Me<et;Me++){K=Me*Ie;const bt=Me*Ve;if(j==8)for(var Re=0;Re<Ve;Re++)Ft[K+Re]=tt[bt+Re];else if(j==4)for(Re=0;Re<Ve;Re++)Ft[K+(Re>>1)]|=tt[bt+Re]<<4-4*(1&Re);else if(j==2)for(Re=0;Re<Ve;Re++)Ft[K+(Re>>2)]|=tt[bt+Re]<<6-2*(3&Re);else if(j==1)for(Re=0;Re<Ve;Re++)Ft[K+(Re>>3)]|=tt[bt+Re]<<7-1*(7&Re)}Ce=Ft,M=3,Qe=1}else if($==0&&ne.length==1){Ft=new Uint8Array(Ve*et*3);const tt=Ve*et;for(K=0;K<tt;K++){const Me=3*K,bt=4*K;Ft[Me]=Ce[bt],Ft[Me+1]=Ce[bt+1],Ft[Me+2]=Ce[bt+2]}Ce=Ft,M=2,Qe=3,Ie=3*Ve}Ae.img=Ce,Ae.bpl=Ie,Ae.bpp=Qe}return{ctype:M,depth:j,plte:ve,frames:ne}}function d(m,g,w,I,R,T,L){const B=Uint8Array,O=Uint32Array,N=new B(m[R-1]),U=new O(m[R-1]),M=R+1<m.length?new B(m[R+1]):null,j=new B(m[R]),J=new O(j.buffer);let H=g,Y=w,K=-1,$=-1;for(let de=0;de<T.height;de++)for(let ve=0;ve<T.width;ve++){const me=T.x+ve,_e=T.y+de,Ae=_e*g+me,Ve=J[Ae];Ve==0||I[R-1].dispose==0&&U[Ae]==Ve&&(M==null||M[4*Ae+3]!=0)||(me<H&&(H=me),me>K&&(K=me),_e<Y&&(Y=_e),_e>$&&($=_e))}K==-1&&(H=Y=K=$=0),L&&((1&H)==1&&H--,(1&Y)==1&&Y--),T={x:H,y:Y,width:K-H+1,height:$-Y+1};const ne=I[R];ne.rect=T,ne.blend=1,ne.img=new Uint8Array(T.width*T.height*4),I[R-1].dispose==0?(t(N,g,w,ne.img,T.width,T.height,-T.x,-T.y,0),f(j,g,w,ne.img,T)):t(j,g,w,ne.img,T.width,T.height,-T.x,-T.y,0)}function f(m,g,w,I,R){t(m,g,w,I,R.width,R.height,-R.x,-R.y,2)}function y(m,g,w,I,R,T,L){const B=[];let O,N=[0,1,2,3,4];T!=-1?N=[T]:(g*I>5e5||w==1)&&(N=[0]),L&&(O={level:0});const U=Fb;for(var M=0;M<N.length;M++){for(let H=0;H<g;H++)E(R,m,H,I,w,N[M]);B.push(U.deflate(R,O))}let j,J=1e9;for(M=0;M<B.length;M++)B[M].length<J&&(j=M,J=B[M].length);return B[j]}function E(m,g,w,I,R,T){const L=w*I;let B=L+w;if(m[B]=T,B++,T==0)if(I<500)for(var O=0;O<I;O++)m[B+O]=g[L+O];else m.set(new Uint8Array(g.buffer,L,I),B);else if(T==1){for(O=0;O<R;O++)m[B+O]=g[L+O];for(O=R;O<I;O++)m[B+O]=g[L+O]-g[L+O-R]+256&255}else if(w==0){for(O=0;O<R;O++)m[B+O]=g[L+O];if(T==2)for(O=R;O<I;O++)m[B+O]=g[L+O];if(T==3)for(O=R;O<I;O++)m[B+O]=g[L+O]-(g[L+O-R]>>1)+256&255;if(T==4)for(O=R;O<I;O++)m[B+O]=g[L+O]-n(g[L+O-R],0,0)+256&255}else{if(T==2)for(O=0;O<I;O++)m[B+O]=g[L+O]+256-g[L+O-I]&255;if(T==3){for(O=0;O<R;O++)m[B+O]=g[L+O]+256-(g[L+O-I]>>1)&255;for(O=R;O<I;O++)m[B+O]=g[L+O]+256-(g[L+O-I]+g[L+O-R]>>1)&255}if(T==4){for(O=0;O<R;O++)m[B+O]=g[L+O]+256-n(0,g[L+O-I],0)&255;for(O=R;O<I;O++)m[B+O]=g[L+O]+256-n(g[L+O-R],g[L+O-I],g[L+O-R-I])&255}}}function k(m,g){const w=new Uint8Array(m),I=w.slice(0),R=new Uint32Array(I.buffer),T=x(I,g),L=T[0],B=T[1],O=w.length,N=new Uint8Array(O>>2);let U;if(w.length<2e7)for(var M=0;M<O;M+=4)U=v(L,j=w[M]*(1/255),J=w[M+1]*(1/255),H=w[M+2]*(1/255),Y=w[M+3]*(1/255)),N[M>>2]=U.ind,R[M>>2]=U.est.rgba;else for(M=0;M<O;M+=4){var j=w[M]*.00392156862745098,J=w[M+1]*(1/255),H=w[M+2]*(1/255),Y=w[M+3]*(1/255);for(U=L;U.left;)U=A(U.est,j,J,H,Y)<=0?U.left:U.right;N[M>>2]=U.ind,R[M>>2]=U.est.rgba}return{abuf:I.buffer,inds:N,plte:B}}function x(m,g,w){w==null&&(w=1e-4);const I=new Uint32Array(m.buffer),R={i0:0,i1:m.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=V(m,R.i0,R.i1),R.est=b(R.bst);const T=[R];for(;T.length<g;){let B=0,O=0;for(var L=0;L<T.length;L++)T[L].est.L>B&&(B=T[L].est.L,O=L);if(B<w)break;const N=T[O],U=C(m,I,N.i0,N.i1,N.est.e,N.est.eMq255);if(N.i0>=U||N.i1<=U){N.est.L=0;continue}const M={i0:N.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};M.bst=V(m,M.i0,M.i1),M.est=b(M.bst);const j={i0:U,i1:N.i1,bst:null,est:null,tdst:0,left:null,right:null};for(j.bst={R:[],m:[],N:N.bst.N-M.bst.N},L=0;L<16;L++)j.bst.R[L]=N.bst.R[L]-M.bst.R[L];for(L=0;L<4;L++)j.bst.m[L]=N.bst.m[L]-M.bst.m[L];j.est=b(j.bst),N.left=M,N.right=j,T[O]=M,T.push(j)}for(T.sort((B,O)=>O.bst.N-B.bst.N),L=0;L<T.length;L++)T[L].ind=L;return[R,T]}function v(m,g,w,I,R){if(m.left==null)return m.tdst=function(M,j,J,H,Y){const K=j-M[0],$=J-M[1],ne=H-M[2],de=Y-M[3];return K*K+$*$+ne*ne+de*de}(m.est.q,g,w,I,R),m;const T=A(m.est,g,w,I,R);let L=m.left,B=m.right;T>0&&(L=m.right,B=m.left);const O=v(L,g,w,I,R);if(O.tdst<=T*T)return O;const N=v(B,g,w,I,R);return N.tdst<O.tdst?N:O}function A(m,g,w,I,R){const{e:T}=m;return T[0]*g+T[1]*w+T[2]*I+T[3]*R-m.eMq}function C(m,g,w,I,R,T){for(I-=4;w<I;){for(;D(m,w,R)<=T;)w+=4;for(;D(m,I,R)>T;)I-=4;if(w>=I)break;const L=g[w>>2];g[w>>2]=g[I>>2],g[I>>2]=L,w+=4,I-=4}for(;D(m,w,R)>T;)w-=4;return w+4}function D(m,g,w){return m[g]*w[0]+m[g+1]*w[1]+m[g+2]*w[2]+m[g+3]*w[3]}function V(m,g,w){const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],T=w-g>>2;for(let L=g;L<w;L+=4){const B=m[L]*.00392156862745098,O=m[L+1]*(1/255),N=m[L+2]*(1/255),U=m[L+3]*(1/255);R[0]+=B,R[1]+=O,R[2]+=N,R[3]+=U,I[0]+=B*B,I[1]+=B*O,I[2]+=B*N,I[3]+=B*U,I[5]+=O*O,I[6]+=O*N,I[7]+=O*U,I[10]+=N*N,I[11]+=N*U,I[15]+=U*U}return I[4]=I[1],I[8]=I[2],I[9]=I[6],I[12]=I[3],I[13]=I[7],I[14]=I[11],{R:I,m:R,N:T}}function b(m){const{R:g}=m,{m:w}=m,{N:I}=m,R=w[0],T=w[1],L=w[2],B=w[3],O=I==0?0:1/I,N=[g[0]-R*R*O,g[1]-R*T*O,g[2]-R*L*O,g[3]-R*B*O,g[4]-T*R*O,g[5]-T*T*O,g[6]-T*L*O,g[7]-T*B*O,g[8]-L*R*O,g[9]-L*T*O,g[10]-L*L*O,g[11]-L*B*O,g[12]-B*R*O,g[13]-B*T*O,g[14]-B*L*O,g[15]-B*B*O],U=N,M=S;let j=[Math.random(),Math.random(),Math.random(),Math.random()],J=0,H=0;if(I!=0)for(let K=0;K<16&&(j=M.multVec(U,j),H=Math.sqrt(M.dot(j,j)),j=M.sml(1/H,j),!(K!=0&&Math.abs(H-J)<1e-9));K++)J=H;const Y=[R*O,T*O,L*O,B*O];return{Cov:N,q:Y,e:j,L:J,eMq255:M.dot(M.sml(255,Y),j),eMq:M.dot(j,Y),rgba:(Math.round(255*Y[3])<<24|Math.round(255*Y[2])<<16|Math.round(255*Y[1])<<8|Math.round(255*Y[0])<<0)>>>0}}var S={multVec:(m,g)=>[m[0]*g[0]+m[1]*g[1]+m[2]*g[2]+m[3]*g[3],m[4]*g[0]+m[5]*g[1]+m[6]*g[2]+m[7]*g[3],m[8]*g[0]+m[9]*g[1]+m[10]*g[2]+m[11]*g[3],m[12]*g[0]+m[13]*g[1]+m[14]*g[2]+m[15]*g[3]],dot:(m,g)=>m[0]*g[0]+m[1]*g[1]+m[2]*g[2]+m[3]*g[3],sml:(m,g)=>[m*g[0],m*g[1],m*g[2],m*g[3]]};vn.encode=function(g,w,I,R,T,L,B){R==null&&(R=0),B==null&&(B=!1);const O=h(g,w,I,R,[!1,!1,!1,0,B,!1]);return c(O,-1),u(O,w,I,T,L)},vn.encodeLL=function(g,w,I,R,T,L,B,O){const N={ctype:0+(R==1?0:2)+(T==0?0:4),depth:L,frames:[]},U=(R+T)*L,M=U*w;for(let j=0;j<g.length;j++)N.frames.push({rect:{x:0,y:0,width:w,height:I},img:new Uint8Array(g[j]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil(M/8)});return c(N,0,!0),u(N,w,I,B,O)},vn.encode.compress=h,vn.encode.dither=a,vn.quantize=k,vn.quantize.getKDtree=x,vn.quantize.getNearest=v})();const lE={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,u=a*r,c=122+u,h=new ArrayBuffer(c),d=new DataView(h),f=1<<20;let y,E,k,x,v=f,A=0,C=0,D=0;function V(m){d.setUint16(C,m,!0),C+=2}function b(m){d.setUint32(C,m,!0),C+=4}function S(m){C+=m}V(19778),b(c),S(4),b(122),b(108),b(n),b(-r>>>0),V(1),V(32),b(3),b(u),b(2835),b(2835),S(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function m(){for(;A<r&&v>0;){for(x=122+A*a,y=0;y<i;)v--,E=o[D++],k=E>>>24,d.setUint32(x+y,E<<8|k),y+=4;A++}D<o.length?(v=f,setTimeout(m,lE._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var zt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},jb={[zt.CHROME]:16384,[zt.FIREFOX]:11180,[zt.DESKTOP_SAFARI]:16384,[zt.IE]:8192,[zt.IOS]:4096,[zt.ETC]:8192};const Cp=typeof window<"u",uE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,xu=Cp&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Bb=(Cp||uE)&&(xu&&xu.getOriginalSymbol(window,"File")||typeof File<"u"&&File),cE=(Cp||uE)&&(xu&&xu.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Pp(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const u=new Uint8Array(a);for(;a--;)u[a]=o.charCodeAt(a);const c=new Blob([u],{type:s});c.name=e,c.lastModified=n,r(c)})}function hE(t){return new Promise((e,n)=>{const r=new cE;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function dE(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function yi(){if(yi.cachedResult!==void 0)return yi.cachedResult;let t=zt.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=zt.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=zt.IOS:/Safari/i.test(e)?t=zt.DESKTOP_SAFARI:/Firefox/i.test(e)?t=zt.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=zt.IE),yi.cachedResult=t,yi.cachedResult}function fE(t,e){const n=yi(),r=jb[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const u=(r+i)/2,c=(r+s)/2;u<c?(s=c,i=c*a):(s=u*a,i=u),o=i*s}return{width:i,height:s}}function yc(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function pE(t,e){const{width:n,height:r}=fE(t.width,t.height),[i,s]=yc(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function Ml(){return Ml.cachedResult!==void 0||(Ml.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ml.cachedResult}function Nu(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=pE(i,e.fileType||t.type),n([i,s])}catch(u){return r(u)}},a=function(u){try{var c=function(h){try{throw h}catch(d){return r(d)}};try{let h;return hE(t).then(function(d){try{return h=d,dE(h).then(function(f){try{return i=f,function(){try{return o()}catch(y){return r(y)}}()}catch(y){return c(y)}},c)}catch(f){return c(f)}},c)}catch(h){c(h)}}catch(h){return r(h)}};try{if(Ml()||[zt.DESKTOP_SAFARI,zt.MOBILE_SAFARI].includes(yi()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(u){try{return i=u,o()}catch{return a()}},a)}catch{a()}})}function bu(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let d,f,y;return d=t.getContext("2d"),{data:f}=d.getImageData(0,0,t.width,t.height),y=vn.encode([f.buffer],t.width,t.height,4096*i),a=new Blob([y],{type:e}),a.name=n,a.lastModified=r,u.call(this)}{let d=function(){return u.call(this)};var c=d;if(e==="image/bmp")return new Promise(f=>lE.toBlob(t,f)).then((function(f){try{return a=f,a.name=n,a.lastModified=r,d.call(this)}catch(y){return o(y)}}).bind(this),o);{let f=function(){return d.call(this)};var h=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(y){try{return a=y,a.name=n,a.lastModified=r,f.call(this)}catch(E){return o(E)}}).bind(this),o);{let y;return y=t.toDataURL(e,i),Pp(y,n,r).then((function(E){try{return a=E,f.call(this)}catch(k){return o(k)}}).bind(this),o)}}}function u(){return s(a)}})}function Dn(t){t.width=0,t.height=0}function ls(){return new Promise(function(t,e){let n,r,i,s;return ls.cachedResult!==void 0?t(ls.cachedResult):Pp("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Nu(n).then(function(a){try{return r=a[1],bu(r,n.type,n.name,n.lastModified).then(function(u){try{return i=u,Dn(r),Nu(i).then(function(c){try{return s=c[0],ls.cachedResult=s.width===1&&s.height===2,t(ls.cachedResult)}catch(h){return e(h)}},e)}catch(c){return e(c)}},e)}catch(u){return e(u)}},e)}catch(a){return e(a)}},e)})}function mE(t){return new Promise((e,n)=>{const r=new cE;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const u=s.getUint16(a,!1);if(a+=2,u==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,c);const h=s.getUint16(a,c);a+=2;for(let d=0;d<h;d++)if(s.getUint16(a+12*d,c)==274)return e(s.getUint16(a+12*d+8,c))}else{if((65280&u)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function gE(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=yc(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),Dn(t)),o}function yE(t,e){const{width:n}=t,{height:r}=t,[i,s]=yc(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Dn(t),i}function e_(t,e,n=0){return new Promise(function(r,i){let s,o,a,u,c,h,d,f,y,E,k,x,v,A,C,D,V,b,S,m;function g(I=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=I,e.onProgress(Math.min(s,100))}function w(I){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(I,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,g(),Nu(t,e).then((function(I){try{return[,u]=I,g(),c=gE(u,e),g(),new Promise(function(R,T){var L;if(!(L=e.exifOrientation))return mE(t).then((function(O){try{return L=O,B.call(this)}catch(N){return T(N)}}).bind(this),T);function B(){return R(L)}return B.call(this)}).then((function(R){try{return h=R,g(),ls().then((function(T){try{return d=T?c:yE(c,h),g(),f=e.initialQuality||1,y=e.fileType||t.type,bu(d,y,t.name,t.lastModified,f).then((function(L){try{{let U=function(){if(o--&&(C>a||C>v)){let j,J;return j=m?.95*S.width:S.width,J=m?.95*S.height:S.height,[V,b]=yc(j,J),b.drawImage(S,0,0,j,J),f*=y==="image/png"?.85:.95,bu(V,y,t.name,t.lastModified,f).then(function(H){try{return D=H,Dn(S),S=V,C=D.size,w(Math.min(99,Math.floor((A-C)/(A-a)*100))),U}catch(Y){return i(Y)}},i)}return[1]},M=function(){return Dn(S),Dn(V),Dn(c),Dn(d),Dn(u),w(100),r(D)};var O=U,N=M;if(E=L,g(),k=E.size>a,x=E.size>t.size,!k&&!x)return w(100),r(E);var B;return v=t.size,A=E.size,C=A,S=d,m=!e.alwaysKeepResolution&&k,(B=(function(j){for(;j;){if(j.then)return void j.then(B,i);try{if(j.pop){if(j.length)return j.pop()?M.call(this):j;j=U}else j=j.call(this)}catch(J){return i(J)}}}).bind(this))(U)}}catch(U){return i(U)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)}catch(T){return i(T)}}).bind(this),i)}catch(R){return i(R)}}).bind(this),i)})}const zb=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let yh;function $b(t,e){return new Promise((n,r)=>{yh||(yh=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(zb));const i=new Worker(yh);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Rt(t,e){return new Promise(function(n,r){let i,s,o,a,u,c;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=y=>{o=y,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof Bb))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||c)return e_(t,i).then((function(y){try{return s=y,f.call(this)}catch(E){return r(E)}}).bind(this),r);var h=(function(){try{return f.call(this)}catch(y){return r(y)}}).bind(this),d=function(y){try{return e_(t,i).then(function(E){try{return s=E,h()}catch(k){return r(k)}},r)}catch(E){return r(E)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",$b(t,i).then(function(y){try{return s=y,h()}catch{return d()}},d)}catch{d()}function f(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=aE(t,s))}catch{}return n(s)}})}Rt.getDataUrlFromFile=hE,Rt.getFilefromDataUrl=Pp,Rt.loadImage=dE,Rt.drawImageInCanvas=pE,Rt.drawFileInCanvas=Nu,Rt.canvasToFile=bu,Rt.getExifOrientation=mE,Rt.handleMaxWidthOrHeight=gE,Rt.followExifOrientation=yE,Rt.cleanupCanvasMemory=Dn,Rt.isAutoOrientationInBrowser=ls,Rt.approximateBelowMaximumCanvasSizeOfBrowser=fE,Rt.copyExifWithoutOrientation=aE,Rt.getBrowserName=yi,Rt.version="2.0.2";const Hb=({onPhotoUpload:t,categories:e})=>{const[n,r]=X.useState(null),[i,s]=X.useState(!1),[o,a]=X.useState(e[0]),u=d=>{d.target.files&&d.target.files[0]&&r(d.target.files[0])},c=async(d,f)=>{try{return await Rt(d,f)}catch(y){return console.error("Error compressing image:",y),d}},h=async d=>{if(d.preventDefault(),n){s(!0);try{const f=await c(n,{maxSizeMB:1,maxWidthOrHeight:1920}),y=await c(n,{maxSizeMB:.1,maxWidthOrHeight:300}),E=Tu(Pu,`wedding-photos/${Date.now()}_${n.name}`);await Ny(E,f);const k=await by(E),x=Tu(Pu,`wedding-photos/thumbnails/${Date.now()}_${n.name}`);await Ny(x,y);const v=await by(x);t({id:E.fullPath,url:k,category:o,thumbnailUrl:v})}catch(f){console.error("Error uploading file: ",f),alert("Error al subir la foto. Por favor, intente de nuevo.")}finally{s(!1)}}};return W.jsxs("div",{className:"bg-white shadow sm:rounded-lg p-6",children:[W.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Subir Nueva Foto"}),W.jsxs("form",{onSubmit:h,className:"space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"photo",className:"block text-sm font-medium text-gray-700",children:"Seleccionar Foto"}),W.jsx("input",{type:"file",id:"photo",name:"photo",accept:"image/*",onChange:u,className:`mt-1 block w-full text-sm text-gray-500
                      file:mr-4 file:py-2 file:px-4
                      file:rounded-full file:border-0
                      file:text-sm file:font-semibold
                      file:bg-blue-50 file:text-blue-700
                      hover:file:bg-blue-100`})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Categora"}),W.jsx("select",{id:"category",name:"category",value:o,onChange:d=>a(d.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:e.map(d=>W.jsx("option",{value:d,children:d},d))})]}),W.jsxs("button",{type:"submit",disabled:!n||i,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${!n||i?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:[W.jsx(x0,{className:"mr-2"}),i?"Subiendo...":"Subir Foto"]})]})]})},Wb=({photos:t,onDeletePhoto:e})=>{const[n,r]=X.useState(null);return W.jsxs(W.Fragment,{children:[W.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:t.map(i=>W.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden relative group",children:[W.jsxs("div",{className:"cursor-pointer",onClick:()=>r(i),children:[W.jsx(sE,{src:i.url,placeholder:i.thumbnailUrl||i.url,alt:"Foto de boda",className:"w-full h-64 object-cover"}),W.jsx("div",{className:"p-2 text-sm text-gray-600",children:i.category})]}),W.jsx("button",{onClick:()=>e(i.id),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:W.jsx(k0,{size:16})})]},i.id))}),n&&W.jsx(oE,{photo:n,onClose:()=>r(null),photos:t,onDeletePhoto:e})]})};function qb(){const[t,e]=X.useState([]),[n,r]=X.useState(!1),[i,s]=X.useState(null);X.useEffect(()=>{(async()=>{const d=(await lw(bd(Vl,"photos"))).docs.map(f=>({id:f.id,url:f.data().url,category:f.data().category||"Sin categora",thumbnailUrl:f.data().thumbnailUrl}));e(d)})()},[]);const o=async c=>{const h=await lk(bd(Vl,"photos"),{url:c.url,category:c.category,thumbnailUrl:c.thumbnailUrl});e([...t,{...c,id:h.id}]),r(!1)},a=async c=>{if(window.confirm("Ests seguro de que quieres eliminar esta foto?"))try{await ak(Y1(Vl,"photos",c));const h=t.find(d=>d.id===c);if(h){const d=Tu(Pu,h.url);if(await Dy(d),h.thumbnailUrl){const f=Tu(Pu,h.thumbnailUrl);await Dy(f)}}e(t.filter(d=>d.id!==c))}catch(h){console.error("Error al eliminar la foto:",h),alert("Hubo un error al eliminar la foto. Por favor, intenta de nuevo.")}},u=["Ceremonia","Fiesta","Invitados","Detalles","Sin categora"];return W.jsxs("div",{className:"min-h-screen bg-gray-100",children:[W.jsx("header",{className:"bg-white shadow",children:W.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[W.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[W.jsx(C0,{className:"mr-2"}),"Dashboard - Nuestro Casamiento"]}),W.jsxs("div",{className:"flex items-center space-x-4",children:[W.jsxs("button",{onClick:()=>r(!n),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",children:[W.jsx(x0,{className:"mr-2"}),"Subir Foto"]}),W.jsxs(R0,{to:"/",className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded flex items-center",children:[W.jsx(vA,{className:"mr-2"}),"Salir"]})]})]})}),W.jsx("main",{children:W.jsxs("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[W.jsxs("div",{className:"mb-4 flex space-x-2 overflow-x-auto pb-2",children:[W.jsx("button",{onClick:()=>s(null),className:`px-4 py-2 rounded-full ${i===null?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Todas"}),u.map(c=>W.jsx("button",{onClick:()=>s(c),className:`px-4 py-2 rounded-full ${i===c?"bg-blue-500 text-white":"bg-gray-200"}`,children:c},c))]}),n?W.jsx(Hb,{onPhotoUpload:o,categories:u}):W.jsx(Wb,{photos:i?t.filter(c=>c.category===i):t,onDeletePhoto:a})]})})]})}function Kb(){const[t,e]=X.useState(""),[n,r]=X.useState(""),[i,s]=X.useState(""),o=T0(),a=async u=>{u.preventDefault(),s("");try{await _N(Ob,t,n),o("/dashboard")}catch{s("Failed to log in. Please check your credentials.")}};return W.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[W.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:W.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Iniciar Sesin"})}),W.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:W.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:W.jsxs("form",{className:"space-y-6",onSubmit:a,children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electrnico"}),W.jsx("div",{className:"mt-1",children:W.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:u=>e(u.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrasea"}),W.jsx("div",{className:"mt-1",children:W.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:u=>r(u.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),i&&W.jsx("p",{className:"text-red-500 text-sm",children:i}),W.jsx("div",{children:W.jsxs("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[W.jsx(P0,{className:"mr-2"}),"Iniciar Sesin"]})})]})})})]})}function Gb(){return W.jsx(hA,{children:W.jsxs(iA,{children:[W.jsx(Rl,{path:"/",element:W.jsx(Lb,{})}),W.jsx(Rl,{path:"/login",element:W.jsx(Kb,{})}),W.jsx(Rl,{path:"/dashboard",element:W.jsx(qb,{})})]})})}f0(document.getElementById("root")).render(W.jsx(X.StrictMode,{children:W.jsx(Gb,{})}));
